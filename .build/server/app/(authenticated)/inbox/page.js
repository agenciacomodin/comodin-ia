(()=>{var e={};e.id=8988,e.ids=[8988],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},86624:e=>{"use strict";e.exports=require("querystring")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},8598:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>d,routeModule:()=>u,tree:()=>o}),a(17776),a(69910),a(71363),a(15307);var t=a(36576),r=a(72007),n=a(21818),i=a.n(n),l=a(88897),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);a.d(s,c);let o=["",{children:["(authenticated)",{children:["inbox",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,17776)),"/home/ubuntu/comodin_ia/app/app/(authenticated)/inbox/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,69910)),"/home/ubuntu/comodin_ia/app/app/(authenticated)/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,71363,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,15307)),"/home/ubuntu/comodin_ia/app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,71363,23)),"next/dist/client/components/not-found-error"]}],d=["/home/ubuntu/comodin_ia/app/app/(authenticated)/inbox/page.tsx"],x="/(authenticated)/inbox/page",m={require:a,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(authenticated)/inbox/page",pathname:"/inbox",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},17026:(e,s,a)=>{Promise.resolve().then(a.bind(a,39749))},39749:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>eu});var t=a(62901),r=a(24383),n=a(84700),i=a(87752),l=a(48119),c=a(68537),o=a(66843),d=a(77185),x=a(71945);let m=(0,x.Z)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var u=a(91046),h=a(94437),p=a(32614),j=a(250),g=a(27878),f=a(31606),y=a(56580),N=a(19406),v=a(68637),b=a(97623);function w({conversations:e,selectedConversationId:s,onSelectConversation:a,searchTerm:n,onSearchChange:i,statusFilter:l,onStatusFilterChange:x,currentUserId:w}){let[C,k]=(0,r.useState)("ALL"),D=e=>{if(!e)return"";let s=new Date,a=new Date(e),t=s.getTime()-a.getTime(),r=Math.floor(t/6e4),n=Math.floor(t/36e5),i=Math.floor(t/864e5);return r<1?"Ahora":r<60?`${r}m`:n<24?`${n}h`:i<7?`${i}d`:a.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit"})},A=e=>e.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2),Z=e=>{switch(b.WC[e]){case"red":return"bg-red-500";case"orange":return"bg-orange-500";case"blue":return"bg-blue-500";default:return"bg-gray-400"}},S=e.filter(e=>{let s=e.contact.name.toLowerCase().includes(n.toLowerCase())||e.contact.phone.includes(n)||(e.lastMessageText||"").toLowerCase().includes(n.toLowerCase()),a="ALL"===l||e.status===l,t=(()=>{switch(C){case"MINE":return e.assignedAgent?.id===w;case"UNASSIGNED":return!e.assignedAgent;default:return!0}})();return s&&a&&t});return(0,t.jsxs)("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Chats"}),(0,t.jsxs)(N.h_,{children:[t.jsx(N.$F,{asChild:!0,children:t.jsx(g.z,{variant:"ghost",size:"sm",children:t.jsx(c.Z,{className:"h-4 w-4"})})}),(0,t.jsxs)(N.AW,{align:"end",children:[t.jsx(N.Ju,{children:"Filtrar por estado"}),t.jsx(N.VD,{}),t.jsx(N.Xi,{onClick:()=>x("ALL"),children:"Todos"}),t.jsx(N.Xi,{onClick:()=>x("OPEN"),children:b.WY.OPEN}),t.jsx(N.Xi,{onClick:()=>x("PENDING"),children:b.WY.PENDING}),t.jsx(N.Xi,{onClick:()=>x("RESOLVED"),children:b.WY.RESOLVED})]})]})]}),(0,t.jsxs)("div",{className:"flex space-x-1 mb-3",children:[(0,t.jsxs)(g.z,{variant:"ALL"===C?"default":"ghost",size:"sm",onClick:()=>k("ALL"),className:"flex items-center text-xs h-8",children:[t.jsx(o.Z,{className:"h-3 w-3 mr-1"}),"Todas"]}),(0,t.jsxs)(g.z,{variant:"MINE"===C?"default":"ghost",size:"sm",onClick:()=>k("MINE"),className:"flex items-center text-xs h-8",children:[t.jsx(d.Z,{className:"h-3 w-3 mr-1"}),"M\xedas"]}),(0,t.jsxs)(g.z,{variant:"UNASSIGNED"===C?"default":"ghost",size:"sm",onClick:()=>k("UNASSIGNED"),className:"flex items-center text-xs h-8",children:[t.jsx(m,{className:"h-3 w-3 mr-1"}),"Sin asignar"]})]}),(0,t.jsxs)("div",{className:"relative",children:[t.jsx(u.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx(j.I,{type:"text",placeholder:"Buscar chats...",value:n,onChange:e=>i(e.target.value),className:"pl-10"})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:0===S.length?(0,t.jsxs)("div",{className:"p-4 text-center text-gray-500",children:[t.jsx(h.Z,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),t.jsx("p",{className:"text-sm",children:"No hay conversaciones"})]}):t.jsx("div",{className:"space-y-1",children:S.map(e=>t.jsx("div",{onClick:()=>a(e.id),className:(0,v.cn)("p-3 hover:bg-gray-50 cursor-pointer transition-colors border-l-4 border-transparent",s===e.id&&"bg-blue-50 border-l-blue-500"),children:(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)(y.qE,{className:"h-12 w-12",children:[t.jsx(y.F$,{src:e.contact.avatar}),t.jsx(y.Q5,{className:"bg-gray-100 text-gray-600",children:A(e.contact.name)})]}),e.contact.isVip&&t.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-xs text-white font-bold",children:"★"})})]}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:e.contact.name}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:["MEDIUM"!==e.priority&&t.jsx("div",{className:(0,v.cn)("w-2 h-2 rounded-full",Z(e.priority))}),t.jsx("span",{className:"text-xs text-gray-500",children:D(e.lastMessageAt)})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600 truncate flex-1",children:["OUTGOING"===e.lastMessageFrom&&t.jsx("span",{className:"text-gray-400 mr-1",children:"→"}),e.lastMessageText||"Sin mensajes"]}),e.unreadCount>0&&t.jsx(f.C,{variant:"destructive",className:"ml-2 text-xs",children:e.unreadCount>99?"99+":e.unreadCount})]}),(0,t.jsxs)("div",{className:"flex items-center mt-1",children:[t.jsx(p.Z,{className:"h-3 w-3 text-gray-400 mr-1"}),t.jsx("span",{className:"text-xs text-gray-500",children:e.contact.phone})]})]})]})},e.id))})})]})}let C=(0,x.Z)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);var k=a(30502),D=a(52),A=a(23803),Z=a(21395);let S=(0,x.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),M=(0,x.Z)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);var E=a(32317),I=a(42594),R=a(64093),z=a(21391);let P=(0,x.Z)("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),O=(0,x.Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);var q=a(26482),T=a(39350);let L=[{id:"qr1",title:"Saludo Inicial",shortcut:"hola",content:"\xa1Hola! Gracias por contactarnos. \xbfEn qu\xe9 podemos ayudarte hoy?",category:"Saludos",tags:["saludo","bienvenida"],usageCount:156,lastUsedAt:new Date,createdAt:new Date,createdByName:"Ana Mart\xednez"},{id:"qr2",title:"Informaci\xf3n de Precios",shortcut:"precios",content:"Te env\xedo nuestra lista de precios actualizada. Si tienes alguna duda espec\xedfica, no dudes en consultarme.",category:"Ventas",tags:["precios","ventas","productos"],usageCount:89,lastUsedAt:new Date,createdAt:new Date,createdByName:"Carlos Rivera"},{id:"qr3",title:"Horarios de Atenci\xf3n",shortcut:"horarios",content:"Nuestros horarios de atenci\xf3n son:\n\n\uD83D\uDCC5 Lunes a Viernes: 9:00 AM - 6:00 PM\n\uD83D\uDCC5 S\xe1bados: 9:00 AM - 2:00 PM\n\uD83D\uDCC5 Domingos: Cerrado",category:"Informaci\xf3n",tags:["horarios","atencion","disponibilidad"],usageCount:124,lastUsedAt:new Date,createdAt:new Date,createdByName:"Mar\xeda Gonz\xe1lez"},{id:"qr4",title:"Agradecimiento",shortcut:"gracias",content:"\xa1Gracias por contactarnos! Ha sido un placer atenderte. Si tienes alguna otra consulta, estaremos aqu\xed para ayudarte.",category:"Despedida",tags:["gracias","despedida","cierre"],usageCount:203,lastUsedAt:new Date,createdAt:new Date,createdByName:"Luis Herrera"},{id:"qr5",title:"Soporte T\xe9cnico",shortcut:"soporte",content:"Para brindarte el mejor soporte t\xe9cnico, necesito algunos datos adicionales:\n\n• Modelo del producto\n• Descripci\xf3n del problema\n• Fotos si es necesario",category:"Soporte",tags:["soporte","tecnico","ayuda"],usageCount:67,lastUsedAt:new Date,createdAt:new Date,createdByName:"Diego Morales"}];function G({conversationId:e,onSendMessage:s,disabled:a=!1,placeholder:i="Escribe tu mensaje..."}){let{data:l}=(0,n.useSession)()||{},[c,o]=(0,r.useState)({content:"",files:[],showQuickReplies:!1,quickReplySearch:""}),[d,x]=(0,r.useState)({isRecording:!1,isPaused:!1,duration:0}),m=(0,r.useRef)(null),u=(0,r.useRef)(null),h=(0,r.useRef)(null),p=(0,r.useRef)([]),j=(0,r.useRef)(null),y=e=>b.aE.image.includes(e.type)?"image":b.aE.video.includes(e.type)?"video":b.aE.audio.includes(e.type)?"audio":"document",N=e=>{let s=y(e),a=b.n9[s];return e.size>a?`El archivo es muy grande. M\xe1ximo ${Math.round(a/1048576)}MB para ${s}`:null},v=e=>{let s=0,a=setInterval(()=>{(s+=20*Math.random())>=100&&(s=100,clearInterval(a)),o(a=>({...a,files:a.files.map(a=>a.id===e?{...a,uploadProgress:s}:a)}))},200)},w=e=>{o(s=>({...s,files:s.files.filter(s=>s.id!==e)}))},k=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0}),s=new MediaRecorder(e);h.current=s,p.current=[],s.ondataavailable=e=>{e.data.size>0&&p.current.push(e.data)},s.onstop=()=>{let s=new Blob(p.current,{type:"audio/wav"}),a=URL.createObjectURL(s);x(e=>({...e,audioBlob:s,audioUrl:a,isRecording:!1})),e.getTracks().forEach(e=>e.stop())},s.start(),x(e=>({...e,isRecording:!0,duration:0})),j.current=setInterval(()=>{x(e=>({...e,duration:e.duration+1}))},1e3)}catch(e){T.Am.error("No se pudo acceder al micr\xf3fono"),console.error("Error al acceder al micr\xf3fono:",e)}},G=()=>{h.current&&"inactive"!==h.current.state&&h.current.stop(),j.current&&(clearInterval(j.current),j.current=null)},U=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`,_=e=>{o(s=>{let a={...s,content:e};if(e.endsWith("/"))return{...a,showQuickReplies:!0,quickReplySearch:""};if(s.showQuickReplies){let s=e.lastIndexOf("/");if(-1!==s){let t=e.substring(s+1);return{...a,quickReplySearch:t}}}return a})},V=L.filter(e=>{if(!c.quickReplySearch)return!0;let s=c.quickReplySearch.toLowerCase();return e.shortcut.toLowerCase().includes(s)||e.title.toLowerCase().includes(s)||e.content.toLowerCase().includes(s)||e.tags.some(e=>e.toLowerCase().includes(s))}),F=e=>{let s=c.content.lastIndexOf("/"),a=(s>0?c.content.substring(0,s):"")+e.content;o(s=>({...s,content:a,showQuickReplies:!1,quickReplySearch:"",selectedQuickReply:e})),m.current?.focus()},B=()=>{if(a)return;let e=c.content.trim(),t=c.files.length>0,r=d.audioBlob;if(!e&&!t&&!r){m.current?.focus();return}let n="TEXT";if(r)n="AUDIO";else if(t){let e=c.files[0];n="image"===e.type?"IMAGE":"video"===e.type?"VIDEO":"DOCUMENT"}s({content:c.content.trim(),type:n,files:c.files.map(e=>e.file),audioBlob:d.audioBlob,quickReplyId:c.selectedQuickReply?.id}),o({content:"",files:[],showQuickReplies:!1,quickReplySearch:""}),x({isRecording:!1,isPaused:!1,duration:0}),m.current?.focus()},$=e=>{switch(e){case"image":return t.jsx(S,{className:"h-4 w-4"});case"video":return t.jsx(C,{className:"h-4 w-4"});case"audio":return t.jsx(M,{className:"h-4 w-4"});default:return t.jsx(E.Z,{className:"h-4 w-4"})}},W=c.content.trim()||c.files.length>0||d.audioBlob;return(0,t.jsxs)("div",{className:"border-t border-gray-200 bg-white",children:[c.files.length>0&&t.jsx("div",{className:"p-3 border-b border-gray-100",children:t.jsx("div",{className:"flex flex-wrap gap-2",children:c.files.map(e=>t.jsx(A.Zb,{className:"relative w-20 h-20",children:(0,t.jsxs)(A.aY,{className:"p-2 h-full",children:[e.preview?t.jsx("img",{src:e.preview,alt:e.file.name,className:"w-full h-full object-cover rounded"}):(0,t.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center bg-gray-50 rounded",children:[$(e.type),t.jsx("span",{className:"text-xs mt-1 text-center truncate w-full",children:e.file.name.split(".").pop()?.toUpperCase()})]}),void 0!==e.uploadProgress&&e.uploadProgress<100&&t.jsx("div",{className:"absolute bottom-1 left-1 right-1",children:t.jsx(Z.E,{value:e.uploadProgress,className:"h-1"})}),t.jsx(g.z,{size:"sm",variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 p-0",onClick:()=>w(e.id),children:t.jsx(I.Z,{className:"h-3 w-3"})})]})},e.id))})}),d.audioBlob&&t.jsx("div",{className:"p-3 border-b border-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3 bg-blue-50 p-3 rounded-lg",children:[t.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:t.jsx(M,{className:"h-4 w-4 text-blue-600"})}),(0,t.jsxs)("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Audio grabado"}),t.jsx("p",{className:"text-xs text-blue-600",children:U(d.duration)})]}),d.audioUrl&&t.jsx("audio",{controls:!0,className:"w-32",children:t.jsx("source",{src:d.audioUrl,type:"audio/wav"})}),t.jsx(g.z,{size:"sm",variant:"outline",onClick:()=>{G(),x({isRecording:!1,isPaused:!1,duration:0})},children:t.jsx(I.Z,{className:"h-4 w-4"})})]})}),c.showQuickReplies&&t.jsx("div",{className:"p-3 border-b border-gray-100 max-h-60 overflow-y-auto",children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600 mb-2",children:[t.jsx(R.Z,{className:"h-4 w-4"}),t.jsx("span",{children:"Respuestas r\xe1pidas"}),c.quickReplySearch&&(0,t.jsxs)("span",{className:"text-blue-600",children:['"',c.quickReplySearch,'"']})]}),V.length>0?t.jsx("div",{className:"space-y-1",children:V.slice(0,5).map(e=>t.jsx("button",{onClick:()=>F(e),className:"w-full text-left p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("span",{className:"font-medium text-sm text-gray-900",children:["/",e.shortcut]}),t.jsx(f.C,{variant:"secondary",className:"text-xs",children:e.category})]}),t.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:e.content})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-500 ml-2",children:[t.jsx(z.Z,{className:"h-3 w-3"}),t.jsx("span",{children:e.usageCount})]})]})},e.id))}):t.jsx("p",{className:"text-sm text-gray-500 py-2",children:"No se encontraron respuestas r\xe1pidas"})]})}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,t.jsxs)("div",{className:"relative",children:[t.jsx(g.z,{variant:"ghost",size:"sm",className:"text-gray-500",onClick:()=>u.current?.click(),disabled:a,children:t.jsx(P,{className:"h-5 w-5"})}),t.jsx("input",{ref:u,type:"file",multiple:!0,accept:Object.values(b.aE).flat().join(","),onChange:e=>{Array.from(e.target.files||[]).forEach(e=>{let s=N(e);if(s){T.Am.error(s);return}let a={id:`file_${Date.now()}_${Math.random()}`,file:e,type:y(e),uploadProgress:0};if("image"===a.type){let s=new FileReader;s.onload=e=>{o(s=>({...s,files:s.files.map(s=>s.id===a.id?{...s,preview:e.target?.result}:s)}))},s.readAsDataURL(e)}o(e=>({...e,files:[...e.files,a]})),v(a.id)}),e.target.value=""},className:"hidden"})]}),t.jsx("div",{className:"flex-1 min-w-0",children:t.jsx(D.g,{ref:m,value:c.content,onChange:e=>_(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),B()),"Escape"===e.key&&c.showQuickReplies&&o(e=>({...e,showQuickReplies:!1}))},placeholder:d.isRecording?"Grabando audio...":i,disabled:a||d.isRecording,className:"resize-none min-h-[40px] max-h-[120px] border-0 focus-visible:ring-0 p-3",rows:1})}),t.jsx("div",{className:"relative",children:d.isRecording?(0,t.jsxs)("div",{className:"flex space-x-1",children:[t.jsx(g.z,{variant:"ghost",size:"sm",onClick:G,className:"text-red-600 hover:text-red-700",children:t.jsx(O,{className:"h-5 w-5 fill-current"})}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 px-2",children:[t.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),t.jsx("span",{className:"text-sm text-red-600 font-mono",children:U(d.duration)})]})]}):t.jsx(g.z,{variant:"ghost",size:"sm",className:"text-gray-500",onMouseDown:k,disabled:a,title:"Mant\xe9n presionado para grabar",children:t.jsx(M,{className:"h-5 w-5"})})}),t.jsx(g.z,{onClick:B,disabled:a||!W,size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:t.jsx(q.Z,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-2 text-xs text-gray-500",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[t.jsx("span",{children:"Escribe / para respuestas r\xe1pidas"}),c.selectedQuickReply&&(0,t.jsxs)(f.C,{variant:"outline",className:"text-xs",children:["Usaste: ",c.selectedQuickReply.shortcut]})]}),d.isRecording&&t.jsx("span",{className:"text-red-600",children:"Presiona el bot\xf3n cuadrado para detener"})]})]})]})}var U=a(65923),_=a(80568),V=a(60979);let F=(0,x.Z)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);var B=a(35825),$=a(558),W=a(87552),H=a(82063);function Y({conversationId:e,contactName:s}){let[a,n]=(0,r.useState)(!1),[i,l]=(0,r.useState)(""),[c,o]=(0,r.useState)(!1),[x,m]=(0,r.useState)(null),[u,h]=(0,r.useState)(null),p=async()=>{if(!i.trim()){h("Por favor ingrese un mensaje para simular");return}o(!0),h(null),m(null);try{let s=await fetch("/api/crm/messages/simulate-incoming",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversationId:e,content:i.trim()})}),a=await s.json();a.success?(m(a.data),l("")):h(a.error||"Error simulando mensaje")}catch(e){console.error("Error simulando mensaje:",e),h("Error de conexi\xf3n")}finally{o(!1)}},j=e=>{l(e),m(null),h(null)};return(0,t.jsxs)(U.Vq,{open:a,onOpenChange:n,children:[t.jsx(U.hg,{asChild:!0,children:(0,t.jsxs)(g.z,{variant:"outline",size:"sm",className:"ml-2",children:[t.jsx(V.Z,{className:"h-4 w-4 mr-2"}),"Probar IA"]})}),(0,t.jsxs)(U.cZ,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,t.jsxs)(U.fK,{children:[(0,t.jsxs)(U.$N,{className:"flex items-center gap-2",children:[t.jsx(F,{className:"h-5 w-5 text-primary"}),"Simulador de IA Activa"]}),(0,t.jsxs)(U.Be,{children:["Simule un mensaje entrante de ",s," para probar c\xf3mo responder\xe1n las automatizaciones"]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Mensaje simulado:"}),t.jsx(D.g,{value:i,onChange:e=>l(e.target.value),placeholder:"Escriba el mensaje que el contacto enviar\xeda...",rows:4,className:"resize-none"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Mensajes de prueba r\xe1pida:"}),t.jsx("div",{className:"grid grid-cols-1 gap-2",children:["Hola, me interesa conocer m\xe1s sobre sus productos y precios","Tengo un problema con mi pedido, necesito ayuda urgente","Buenos d\xedas, quisiera hacer una queja sobre el servicio","\xbfPodr\xedan ayudarme a agendar una cita para ma\xf1ana?","\xbfC\xf3mo puedo realizar el pago de mi factura pendiente?","Muchas gracias por su atenci\xf3n, que tengan buen d\xeda"].map((e,s)=>(0,t.jsxs)(g.z,{variant:"ghost",size:"sm",onClick:()=>j(e),className:"text-xs h-auto py-2 px-3 whitespace-normal text-left justify-start",children:[t.jsx(q.Z,{className:"h-3 w-3 mr-2 flex-shrink-0"}),e]},s))})]}),t.jsx(g.z,{onClick:p,disabled:c||!i.trim(),className:"w-full",children:c?(0,t.jsxs)(t.Fragment,{children:[t.jsx(V.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Simulando y procesando con IA..."]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(F,{className:"h-4 w-4 mr-2"}),"Simular Mensaje Entrante"]})}),u&&(0,t.jsxs)(_.bZ,{variant:"destructive",children:[t.jsx(B.Z,{className:"h-4 w-4"}),t.jsx(_.X,{children:u})]}),x&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(_.bZ,{children:[t.jsx($.Z,{className:"h-4 w-4"}),t.jsx(_.X,{children:"✅ Mensaje simulado exitosamente. El mensaje aparecer\xe1 en la conversaci\xf3n y se proces\xf3 con IA."})]}),x.aiProcessing&&(0,t.jsxs)(A.Zb,{children:[t.jsx(A.Ol,{children:(0,t.jsxs)(A.ll,{className:"text-base flex items-center gap-2",children:[t.jsx(V.Z,{className:"h-4 w-4"}),"Resultado del An\xe1lisis de IA"]})}),(0,t.jsxs)(A.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(W.Z,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm font-medium",children:"Intenciones Detectadas"}),(0,t.jsxs)(f.C,{variant:"outline",children:["Confianza: ",Math.round(100*x.aiProcessing.analysis.confidenceScore),"%"]})]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:x.aiProcessing.analysis.detectedIntentions.map(e=>t.jsx(f.C,{variant:"default",children:b.ED[e]||e},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(H.Z,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm font-medium",children:"Automatizaciones"})]}),(0,t.jsxs)("div",{className:"flex gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx($.Z,{className:"h-4 w-4 text-green-600"}),(0,t.jsxs)("span",{children:[x.aiProcessing.automationsExecuted," ejecutadas"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(z.Z,{className:"h-4 w-4 text-gray-500"}),(0,t.jsxs)("span",{children:[x.aiProcessing.automationsSkipped," omitidas"]})]})]})]}),x.aiProcessing.analysis.keywordsExtracted.length>0&&(0,t.jsxs)("div",{children:[t.jsx("div",{className:"flex items-center gap-2 mb-2",children:t.jsx("span",{className:"text-sm font-medium",children:"Palabras Clave"})}),t.jsx("div",{className:"flex flex-wrap gap-2",children:x.aiProcessing.analysis.keywordsExtracted.map((e,s)=>t.jsx(f.C,{variant:"secondary",children:e},s))})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-xs pt-2 border-t",children:[(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium",children:"Sentimiento"}),t.jsx("div",{className:(e=>{switch(e){case"positive":return"text-green-600";case"negative":return"text-red-600";default:return"text-gray-600"}})(x.aiProcessing.analysis.sentiment),children:"positive"===x.aiProcessing.analysis.sentiment?"Positivo":"negative"===x.aiProcessing.analysis.sentiment?"Negativo":"Neutral"})]}),(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium",children:"Tiempo de Procesamiento"}),(0,t.jsxs)("div",{className:"text-muted-foreground",children:[x.aiProcessing.analysis.processingTime,"ms"]})]})]})]})]}),(0,t.jsxs)(_.bZ,{children:[t.jsx(d.Z,{className:"h-4 w-4"}),(0,t.jsxs)(_.X,{children:["\uD83D\uDCA1 ",t.jsx("strong",{children:"Tip:"})," Revise la conversaci\xf3n para ver el mensaje simulado y cualquier acci\xf3n autom\xe1tica que se haya ejecutado (etiquetas, asignaciones, respuestas autom\xe1ticas, etc.)."]})]})]}),t.jsx("div",{className:"flex justify-end pt-4",children:t.jsx(g.z,{variant:"outline",onClick:()=>n(!1),children:"Cerrar"})})]})]})]})}var Q=a(23094),X=a(21680),K=a(11192);let J=(0,x.Z)("FileSearch",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]]);var ee=a(68832);function es({conversationId:e,className:s}){let[a,n]=(0,r.useState)(!0),[i,l]=(0,r.useState)(0),[c,o]=(0,r.useState)(0);return(0,t.jsxs)(U.Vq,{children:[t.jsx(U.hg,{asChild:!0,children:t.jsx(f.C,{variant:"outline",className:`${a?"bg-green-100 text-green-800 border-green-200":"bg-gray-100 text-gray-600 border-gray-200"} cursor-pointer hover:shadow-md transition-shadow ${s}`,children:(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[a?t.jsx(Q.Z,{className:"h-3 w-3"}):t.jsx(X.Z,{className:"h-3 w-3"}),t.jsx(K.Z,{className:"h-3 w-3"}),(0,t.jsxs)("span",{className:"font-medium",children:["IA Resolutiva ",a?"Activa":"Inactiva"]})]})})}),(0,t.jsxs)(U.cZ,{className:"max-w-2xl",children:[(0,t.jsxs)(U.fK,{children:[(0,t.jsxs)(U.$N,{className:"flex items-center gap-2",children:[t.jsx(V.Z,{className:"h-5 w-5 text-blue-500"}),"Estado del Sistema de IA Resolutiva"]}),t.jsx(U.Be,{children:"Sistema inteligente que responde autom\xe1ticamente usando el entrenamiento de IA"})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[t.jsx(A.Zb,{children:t.jsx(A.aY,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${a?"bg-green-100":"bg-gray-100"}`,children:a?t.jsx(H.Z,{className:"h-5 w-5 text-green-600"}):t.jsx(X.Z,{className:"h-5 w-5 text-gray-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"font-semibold text-lg",children:["Sistema ",a?"Operativo":"Inactivo"]}),t.jsx("p",{className:"text-gray-600 text-sm",children:a?"La IA est\xe1 respondiendo autom\xe1ticamente a consultas de clientes":"La IA no est\xe1 procesando mensajes autom\xe1ticamente"})]})]}),(0,t.jsxs)(g.z,{variant:a?"destructive":"default",size:"sm",onClick:()=>n(!a),children:[a?"Desactivar":"Activar"," IA"]})]})})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsx(A.Zb,{children:(0,t.jsxs)(A.aY,{className:"pt-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(J,{className:"h-4 w-4 text-blue-500"}),t.jsx("span",{className:"font-medium text-sm",children:"B\xfasqueda Sem\xe1ntica"})]}),t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i}),t.jsx("p",{className:"text-xs text-gray-600",children:"Fuentes activas"})]})}),t.jsx(A.Zb,{children:(0,t.jsxs)(A.aY,{className:"pt-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(W.Z,{className:"h-4 w-4 text-green-500"}),t.jsx("span",{className:"font-medium text-sm",children:"Resoluciones"})]}),t.jsx("div",{className:"text-2xl font-bold text-green-600",children:c}),t.jsx("p",{className:"text-xs text-gray-600",children:"\xdaltimos 7 d\xedas"})]})}),t.jsx(A.Zb,{children:(0,t.jsxs)(A.aY,{className:"pt-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(ee.Z,{className:"h-4 w-4 text-purple-500"}),t.jsx("span",{className:"font-medium text-sm",children:"Precisi\xf3n"})]}),t.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"87%"}),t.jsx("p",{className:"text-xs text-gray-600",children:"Confianza promedio"})]})})]}),(0,t.jsxs)(A.Zb,{children:[t.jsx(A.Ol,{children:t.jsx(A.ll,{className:"text-base",children:"\xbfC\xf3mo Funciona?"})}),t.jsx(A.aY,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:t.jsx("span",{className:"text-blue-600 text-xs font-bold",children:"1"})}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium",children:"An\xe1lisis Inteligente"}),t.jsx("p",{className:"text-xs text-gray-600",children:"La IA analiza cada mensaje entrante para detectar intenciones y necesidades"})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:t.jsx("span",{className:"text-green-600 text-xs font-bold",children:"2"})}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium",children:"B\xfasqueda en Knowledge Base"}),t.jsx("p",{className:"text-xs text-gray-600",children:"Busca informaci\xf3n relevante en documentos, manuales y cat\xe1logos subidos"})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:t.jsx("span",{className:"text-purple-600 text-xs font-bold",children:"3"})}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium",children:"Respuesta + Archivos"}),t.jsx("p",{className:"text-xs text-gray-600",children:"Genera respuesta contextual y env\xeda autom\xe1ticamente los archivos relevantes"})]})]})]})})]}),(0,t.jsxs)(A.Zb,{children:[(0,t.jsxs)(A.Ol,{children:[t.jsx(A.ll,{className:"text-base",children:"Configuraci\xf3n R\xe1pida"}),t.jsx(A.SZ,{children:"Ajusta el comportamiento de la IA para este chat espec\xedfico"})]}),(0,t.jsxs)(A.aY,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(E.Z,{className:"h-4 w-4 text-gray-500"}),t.jsx("span",{className:"text-sm",children:"Enviar archivos autom\xe1ticamente"})]}),t.jsx(f.C,{variant:"secondary",children:"Activo"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(z.Z,{className:"h-4 w-4 text-gray-500"}),t.jsx("span",{className:"text-sm",children:"Respuesta inmediata (sin delay)"})]}),t.jsx(f.C,{variant:"secondary",children:"Activo"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(W.Z,{className:"h-4 w-4 text-gray-500"}),t.jsx("span",{className:"text-sm",children:"Confianza m\xednima para responder"})]}),t.jsx(f.C,{variant:"outline",children:"70%"})]})]})]})]})]})]})}function ea({conversation:e,onSendMessage:s,onUpdateStatus:a,onAssignAgent:n}){let[i,l]=(0,r.useState)(""),c=(0,r.useRef)(null);(0,r.useRef)(null);let o=e=>new Date(e).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),d=e=>{let s=new Date,a=new Date(e);if(a.toDateString()===s.toDateString())return"Hoy";let t=new Date(s);return(t.setDate(t.getDate()-1),a.toDateString()===t.toDateString())?"Ayer":a.toLocaleDateString("es-ES",{day:"2-digit",month:"short"})},x=e=>e.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2);if(!e)return t.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gray-200 rounded-full flex items-center justify-center",children:t.jsx(p.Z,{className:"w-8 h-8 text-gray-400"})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Selecciona una conversaci\xf3n"}),t.jsx("p",{className:"text-gray-500",children:"Elige un chat de la lista para comenzar a conversar"})]})});let m=(e=>{let s={};return e.forEach(e=>{let a=new Date(e.sentAt).toDateString();s[a]||(s[a]=[]),s[a].push(e)}),Object.entries(s).map(([e,s])=>({date:new Date(e),messages:s}))})(e.messages);return(0,t.jsxs)("div",{className:"flex-1 flex flex-col bg-white",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-white",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)(y.qE,{className:"h-10 w-10",children:[t.jsx(y.F$,{src:e.contact.avatar}),t.jsx(y.Q5,{className:"bg-gray-100 text-gray-600",children:x(e.contact.name)})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.contact.name,e.contact.isVip&&t.jsx(f.C,{variant:"secondary",className:"ml-2 bg-yellow-100 text-yellow-800",children:"VIP"}),t.jsx(es,{conversationId:e.id,className:"ml-2"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[t.jsx("span",{children:e.contact.phone}),t.jsx("span",{children:"•"}),t.jsx(f.C,{variant:"outline",className:(0,v.cn)("text-xs","OPEN"===e.status&&"border-green-200 text-green-700","PENDING"===e.status&&"border-yellow-200 text-yellow-700","RESOLVED"===e.status&&"border-gray-200 text-gray-700"),children:b.WY[e.status]}),t.jsx(f.C,{variant:"outline",className:"text-xs",children:b.Go[e.priority]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(Y,{conversationId:e.id,contactName:e.contact.name}),t.jsx(g.z,{variant:"ghost",size:"sm",children:t.jsx(p.Z,{className:"h-4 w-4"})}),t.jsx(g.z,{variant:"ghost",size:"sm",children:t.jsx(C,{className:"h-4 w-4"})}),(0,t.jsxs)(N.h_,{children:[t.jsx(N.$F,{asChild:!0,children:t.jsx(g.z,{variant:"ghost",size:"sm",children:t.jsx(k.Z,{className:"h-4 w-4"})})}),(0,t.jsxs)(N.AW,{align:"end",children:[t.jsx(N.Ju,{children:"Acciones"}),t.jsx(N.VD,{}),t.jsx(N.Xi,{onClick:()=>a("PENDING"),children:"Marcar como pendiente"}),t.jsx(N.Xi,{onClick:()=>a("RESOLVED"),children:"Marcar como resuelta"}),t.jsx(N.Xi,{onClick:()=>a("ARCHIVED"),children:"Archivar conversaci\xf3n"})]})]})]})]})}),t.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50",children:(0,t.jsxs)("div",{className:"space-y-4",children:[m.map((s,a)=>(0,t.jsxs)("div",{children:[t.jsx("div",{className:"flex justify-center my-4",children:t.jsx("span",{className:"px-3 py-1 bg-gray-200 text-xs text-gray-600 rounded-full",children:d(s.date)})}),t.jsx("div",{className:"space-y-2",children:s.messages.map(s=>(0,t.jsxs)("div",{className:(0,v.cn)("flex items-end space-x-2","OUTGOING"===s.direction?"justify-end":"justify-start"),children:["INCOMING"===s.direction&&(0,t.jsxs)(y.qE,{className:"h-6 w-6",children:[t.jsx(y.F$,{src:e.contact.avatar}),t.jsx(y.Q5,{className:"text-xs",children:x(e.contact.name)})]}),(0,t.jsxs)("div",{className:(0,v.cn)("max-w-xs lg:max-w-md xl:max-w-lg px-4 py-2 rounded-lg shadow-sm","OUTGOING"===s.direction?"bg-blue-600 text-white":"bg-white text-gray-900 border"),children:[s.replyTo&&(0,t.jsxs)("div",{className:(0,v.cn)("text-xs border-l-2 pl-2 mb-1 opacity-70","OUTGOING"===s.direction?"border-blue-300":"border-gray-300"),children:[t.jsx("p",{className:"font-medium",children:s.replyTo.sentByName||"Cliente"}),t.jsx("p",{children:s.replyTo.content})]}),t.jsx("p",{className:"text-sm whitespace-pre-wrap",children:s.content}),(0,t.jsxs)("div",{className:"flex items-center justify-end mt-1 space-x-1",children:[t.jsx("span",{className:(0,v.cn)("text-xs","OUTGOING"===s.direction?"text-blue-200":"text-gray-500"),children:o(s.sentAt)}),"OUTGOING"===s.direction&&(0,t.jsxs)("div",{className:"flex space-x-1",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-200"}),s.isRead&&t.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-200"})]})]})]}),"OUTGOING"===s.direction&&s.sentByName&&t.jsx("div",{className:"text-xs text-gray-500",children:s.sentByName})]},s.id))})]},a)),t.jsx("div",{ref:c})]})}),t.jsx(G,{conversationId:e.id,onSendMessage:e=>{s(e.content,e.type),console.log("Enviando mensaje con opciones:",e)},placeholder:"Escribe tu mensaje..."})]})}var et=a(79046),er=a(19918),en=a(5185),ei=a(7259),el=a(60004),ec=a(70818),eo=a(9233),ed=a(97718);function ex({contact:e,onAddNote:s,onAddTag:a,onRemoveTag:n,onUpdateContact:i}){let[l,c]=(0,r.useState)(""),[o,d]=(0,r.useState)(""),[x,m]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),[N,b]=(0,r.useState)(!0),[w,C]=(0,r.useState)(!0),[k,Z]=(0,r.useState)(!0),[S,M]=(0,r.useState)(!0),E=()=>{if(o.trim()){let e=["blue","green","yellow","red","purple","pink"],s=e[Math.floor(Math.random()*e.length)];a(o.trim(),s),d(""),h(!1)}},I=e=>new Date(e).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return e?(0,t.jsxs)("div",{className:"w-80 bg-white border-l border-gray-200 flex flex-col h-full overflow-y-auto",children:[t.jsx("div",{className:"p-6 border-b border-gray-200",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"relative inline-block mb-3",children:[(0,t.jsxs)(y.qE,{className:"h-20 w-20",children:[t.jsx(y.F$,{src:e.avatar}),t.jsx(y.Q5,{className:"text-xl bg-gray-100 text-gray-600",children:e.name.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2)})]}),e.isVip&&t.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-yellow-400 rounded-full flex items-center justify-center",children:t.jsx(et.Z,{className:"w-3 h-3 text-white fill-current"})})]}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center justify-center text-sm text-gray-500 mb-2",children:[t.jsx(p.Z,{className:"w-4 h-4 mr-1"}),e.phone]}),e.email&&(0,t.jsxs)("div",{className:"flex items-center justify-center text-sm text-gray-500 mb-3",children:[t.jsx(er.Z,{className:"w-4 h-4 mr-1"}),e.email]}),t.jsx(f.C,{variant:"ACTIVE"===e.status?"default":"secondary",className:"mb-4",children:"ACTIVE"===e.status?"Activo":e.status})]})}),(0,t.jsxs)("div",{className:"p-4 space-y-4",children:[(0,t.jsxs)(A.Zb,{children:[t.jsx(A.Ol,{className:"pb-3 cursor-pointer",onClick:()=>b(!N),children:(0,t.jsxs)(A.ll,{className:"text-sm flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx(en.Z,{className:"w-4 h-4 mr-2"}),"Informaci\xf3n"]}),N?t.jsx(ei.Z,{className:"w-4 h-4 text-gray-500"}):t.jsx(el.Z,{className:"w-4 h-4 text-gray-500"})]})}),N&&(0,t.jsxs)(A.aY,{className:"pt-0 space-y-2",children:[e.company&&(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Empresa"}),t.jsx("p",{className:"text-sm",children:e.company})]}),e.jobTitle&&(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Cargo"}),t.jsx("p",{className:"text-sm",children:e.jobTitle})]}),(e.city||e.country)&&(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Ubicaci\xf3n"}),(0,t.jsxs)("div",{className:"flex items-center text-sm",children:[t.jsx(ec.Z,{className:"w-3 h-3 mr-1"}),[e.city,e.country].filter(Boolean).join(", ")]})]}),e.source&&(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Origen"}),t.jsx("p",{className:"text-sm",children:e.source})]})]})]}),(0,t.jsxs)(A.Zb,{children:[t.jsx(A.Ol,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>C(!w),children:[(0,t.jsxs)(A.ll,{className:"text-sm flex items-center",children:[t.jsx(eo.Z,{className:"w-4 h-4 mr-2"}),"Etiquetas",w?t.jsx(ei.Z,{className:"w-4 h-4 ml-auto text-gray-500"}):t.jsx(el.Z,{className:"w-4 h-4 ml-auto text-gray-500"})]}),w&&t.jsx(g.z,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),h(!0)},children:t.jsx(ed.Z,{className:"w-3 h-3"})})]})}),w&&(0,t.jsxs)(A.aY,{className:"pt-0",children:[t.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:e.tags.map(e=>(0,t.jsxs)(f.C,{variant:"outline",className:(0,v.cn)("text-xs cursor-pointer hover:bg-red-50 hover:border-red-200","blue"===e.color&&"border-blue-200 text-blue-700 bg-blue-50","green"===e.color&&"border-green-200 text-green-700 bg-green-50","yellow"===e.color&&"border-yellow-200 text-yellow-700 bg-yellow-50","red"===e.color&&"border-red-200 text-red-700 bg-red-50","purple"===e.color&&"border-purple-200 text-purple-700 bg-purple-50","pink"===e.color&&"border-pink-200 text-pink-700 bg-pink-50"),onClick:()=>n(e.id),children:[e.name," \xd7"]},e.id))}),u&&(0,t.jsxs)("div",{className:"flex space-x-2",children:[t.jsx(j.I,{value:o,onChange:e=>d(e.target.value),placeholder:"Nueva etiqueta",className:"text-xs",onKeyPress:e=>"Enter"===e.key&&E()}),t.jsx(g.z,{size:"sm",onClick:E,children:t.jsx(ed.Z,{className:"w-3 h-3"})})]})]})]}),(0,t.jsxs)(A.Zb,{children:[t.jsx(A.Ol,{className:"pb-3 cursor-pointer",onClick:()=>Z(!k),children:(0,t.jsxs)(A.ll,{className:"text-sm flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx(z.Z,{className:"w-4 h-4 mr-2"}),"Actividad"]}),k?t.jsx(ei.Z,{className:"w-4 h-4 text-gray-500"}):t.jsx(el.Z,{className:"w-4 h-4 text-gray-500"})]})}),k&&(0,t.jsxs)(A.aY,{className:"pt-0 space-y-3",children:[e.firstContact&&(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Primer contacto"}),t.jsx("p",{className:"text-sm",children:I(e.firstContact)})]}),e.lastContact&&(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"\xdaltimo contacto"}),t.jsx("p",{className:"text-sm",children:I(e.lastContact)})]}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Mensajes no le\xeddos"}),t.jsx("p",{className:"text-sm font-medium text-blue-600",children:e.unreadCount})]}),void 0!==e.leadScore&&(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Puntaje de lead"}),(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2 mr-2",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${e.leadScore}%`}})}),(0,t.jsxs)("span",{className:"text-sm font-medium",children:[e.leadScore,"/100"]})]})]})]})]}),(0,t.jsxs)(A.Zb,{children:[t.jsx(A.Ol,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>M(!S),children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(A.ll,{className:"text-sm flex items-center",children:["Notas Internas",S?t.jsx(ei.Z,{className:"w-4 h-4 ml-2 text-gray-500"}):t.jsx(el.Z,{className:"w-4 h-4 ml-2 text-gray-500"})]}),t.jsx(A.SZ,{className:"text-xs",children:"Solo visibles para tu equipo"})]}),S&&t.jsx(g.z,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),m(!0)},children:t.jsx(ed.Z,{className:"w-3 h-3"})})]})}),S&&(0,t.jsxs)(A.aY,{className:"pt-0",children:[x&&(0,t.jsxs)("div",{className:"mb-4 p-3 border rounded-lg bg-gray-50",children:[t.jsx(D.g,{value:l,onChange:e=>c(e.target.value),placeholder:"Escribe una nota interna...",className:"text-sm mb-2",rows:3}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[t.jsx(g.z,{variant:"ghost",size:"sm",onClick:()=>{m(!1),c("")},children:"Cancelar"}),t.jsx(g.z,{size:"sm",onClick:()=>{l.trim()&&(s(l.trim()),c(""),m(!1))},children:"Guardar"})]})]}),t.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:0===e.notes.length?t.jsx("p",{className:"text-xs text-gray-500 text-center py-4",children:"No hay notas internas"}):e.notes.map(e=>(0,t.jsxs)("div",{className:"p-3 border rounded-lg bg-gray-50",children:[t.jsx("p",{className:"text-sm mb-2",children:e.content}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[t.jsx("span",{children:e.createdByName}),t.jsx("span",{children:I(e.createdAt)})]}),e.isImportant&&t.jsx(f.C,{variant:"outline",className:"mt-1 text-xs",children:"Importante"})]},e.id))})]})]})]})]}):t.jsx("div",{className:"w-80 bg-white border-l border-gray-200 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center p-6",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-200 rounded-full flex items-center justify-center",children:t.jsx(p.Z,{className:"w-6 h-6 text-gray-400"})}),t.jsx("p",{className:"text-gray-500",children:"Selecciona una conversaci\xf3n para ver los detalles del contacto"})]})})}let em=[{id:"1",contact:{id:"1",name:"Juan P\xe9rez Garc\xeda",phone:"+52 55 1234 5678",avatar:"",isVip:!0},status:"OPEN",priority:"HIGH",assignedAgent:{id:"agent1",name:"Ana Mart\xednez"},messageCount:15,unreadCount:3,lastMessageAt:new Date(Date.now()-3e5),lastMessageText:"\xbfTienen disponibilidad para esta semana?",lastMessageFrom:"INCOMING"},{id:"2",contact:{id:"2",name:"Mar\xeda Garc\xeda L\xf3pez",phone:"+52 55 8765 4321",avatar:"",isVip:!1},status:"PENDING",priority:"MEDIUM",messageCount:8,unreadCount:1,lastMessageAt:new Date(Date.now()-9e5),lastMessageText:"Gracias por la informaci\xf3n, excelente servicio",lastMessageFrom:"INCOMING"},{id:"3",contact:{id:"3",name:"Carlos Rodr\xedguez",phone:"+52 55 5555 0000",avatar:"",isVip:!1},status:"OPEN",priority:"URGENT",messageCount:22,unreadCount:5,lastMessageAt:new Date(Date.now()-36e5),lastMessageText:"Necesito m\xe1s informaci\xf3n sobre los precios urgentemente",lastMessageFrom:"INCOMING"},{id:"4",contact:{id:"4",name:"Ana Fern\xe1ndez",phone:"+52 55 9999 1111",avatar:"",isVip:!0},status:"RESOLVED",priority:"LOW",assignedAgent:{id:"agent2",name:"Roberto Silva"},messageCount:6,unreadCount:0,lastMessageAt:new Date(Date.now()-72e5),lastMessageText:"Perfecto, muchas gracias por todo",lastMessageFrom:"OUTGOING"}];function eu(){let{data:e}=(0,n.useSession)()||{},[s]=(0,r.useState)(em),[a,c]=(0,r.useState)(),[o,d]=(0,r.useState)(null),[x,m]=(0,r.useState)(null),[u,h]=(0,r.useState)(""),[p,j]=(0,r.useState)("ALL");return t.jsx(i.ProtectedRoute,{permissions:[l.y3.VIEW_CRM_INBOX],children:(0,t.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[t.jsx(w,{conversations:s,selectedConversationId:a,onSelectConversation:c,searchTerm:u,onSearchChange:h,statusFilter:p,onStatusFilterChange:j,currentUserId:e?.user?.id}),t.jsx(ea,{conversation:o,onSendMessage:(s,a="TEXT")=>{if(!o)return;let t={id:`m${Date.now()}`,conversationId:o.id,direction:"OUTGOING",type:a,content:s,sentBy:e?.user?.id||"current-user",sentByName:e?.user?.name||"Usuario",sentAt:new Date,isRead:!0};d(e=>e?{...e,messages:[...e.messages,t]}:null),console.log("Enviando mensaje:",t)},onUpdateStatus:e=>{o&&(d(s=>s?{...s,status:e}:null),console.log("Actualizando estado:",e))},onAssignAgent:e=>{console.log("Asignando agente:",e)}}),t.jsx(ex,{contact:x,onAddNote:(s,a=!1)=>{if(!x)return;let t={id:`n${Date.now()}`,content:s,isImportant:a,createdBy:e?.user?.id||"current-user",createdByName:e?.user?.name||"Usuario",createdAt:new Date};m(e=>e?{...e,notes:[t,...e.notes]}:null),console.log("Agregando nota:",t)},onAddTag:(e,s)=>{if(!x)return;let a={id:`t${Date.now()}`,name:e,color:s||"blue"};m(e=>e?{...e,tags:[...e.tags,a]}:null),console.log("Agregando etiqueta:",a)},onRemoveTag:e=>{x&&(m(s=>s?{...s,tags:s.tags.filter(s=>s.id!==e)}:null),console.log("Eliminando etiqueta:",e))},onUpdateContact:e=>{x&&(m(s=>s?{...s,...e}:null),console.log("Actualizando contacto:",e))}})]})})}Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now()},68832:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},7259:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},558:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},30502:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},68537:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},64093:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]])},19175:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},19918:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},70818:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},32614:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},26482:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},79046:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},9233:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]])},87552:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},21680:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},17776:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(88895).createProxy)(String.raw`/home/ubuntu/comodin_ia/app/app/(authenticated)/inbox/page.tsx#default`)},18832:(e,s,a)=>{"use strict";a.d(s,{Dx:()=>ea,VY:()=>es,aV:()=>ee,dk:()=>et,fC:()=>X,h_:()=>J,jm:()=>W,p8:()=>v,x8:()=>er,xz:()=>K});var t=a(24383),r=a(1940),n=a(56163),i=a(89291),l=a(50430),c=a(98106),o=a(8378),d=a(59293),x=a(4764),m=a(52490),u=a(74132),h=a(23883),p=a(81214),j=a(51627),g=a(42049),f=a(62901),y="Dialog",[N,v]=(0,i.b)(y),[b,w]=N(y),C=e=>{let{__scopeDialog:s,children:a,open:r,defaultOpen:n,onOpenChange:i,modal:o=!0}=e,d=t.useRef(null),x=t.useRef(null),[m=!1,u]=(0,c.T)({prop:r,defaultProp:n,onChange:i});return(0,f.jsx)(b,{scope:s,triggerRef:d,contentRef:x,contentId:(0,l.M)(),titleId:(0,l.M)(),descriptionId:(0,l.M)(),open:m,onOpenChange:u,onOpenToggle:t.useCallback(()=>u(e=>!e),[u]),modal:o,children:a})};C.displayName=y;var k="DialogTrigger",D=t.forwardRef((e,s)=>{let{__scopeDialog:a,...t}=e,i=w(k,a),l=(0,n.e)(s,i.triggerRef);return(0,f.jsx)(u.WV.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":B(i.open),...t,ref:l,onClick:(0,r.M)(e.onClick,i.onOpenToggle)})});D.displayName=k;var A="DialogPortal",[Z,S]=N(A,{forceMount:void 0}),M=e=>{let{__scopeDialog:s,forceMount:a,children:r,container:n}=e,i=w(A,s);return(0,f.jsx)(Z,{scope:s,forceMount:a,children:t.Children.map(r,e=>(0,f.jsx)(m.z,{present:a||i.open,children:(0,f.jsx)(x.h,{asChild:!0,container:n,children:e})}))})};M.displayName=A;var E="DialogOverlay",I=t.forwardRef((e,s)=>{let a=S(E,e.__scopeDialog),{forceMount:t=a.forceMount,...r}=e,n=w(E,e.__scopeDialog);return n.modal?(0,f.jsx)(m.z,{present:t||n.open,children:(0,f.jsx)(R,{...r,ref:s})}):null});I.displayName=E;var R=t.forwardRef((e,s)=>{let{__scopeDialog:a,...t}=e,r=w(E,a);return(0,f.jsx)(p.Z,{as:g.g7,allowPinchZoom:!0,shards:[r.contentRef],children:(0,f.jsx)(u.WV.div,{"data-state":B(r.open),...t,ref:s,style:{pointerEvents:"auto",...t.style}})})}),z="DialogContent",P=t.forwardRef((e,s)=>{let a=S(z,e.__scopeDialog),{forceMount:t=a.forceMount,...r}=e,n=w(z,e.__scopeDialog);return(0,f.jsx)(m.z,{present:t||n.open,children:n.modal?(0,f.jsx)(O,{...r,ref:s}):(0,f.jsx)(q,{...r,ref:s})})});P.displayName=z;var O=t.forwardRef((e,s)=>{let a=w(z,e.__scopeDialog),i=t.useRef(null),l=(0,n.e)(s,a.contentRef,i);return t.useEffect(()=>{let e=i.current;if(e)return(0,j.Ry)(e)},[]),(0,f.jsx)(T,{...e,ref:l,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,r.M)(e.onCloseAutoFocus,e=>{e.preventDefault(),a.triggerRef.current?.focus()}),onPointerDownOutside:(0,r.M)(e.onPointerDownOutside,e=>{let s=e.detail.originalEvent,a=0===s.button&&!0===s.ctrlKey;(2===s.button||a)&&e.preventDefault()}),onFocusOutside:(0,r.M)(e.onFocusOutside,e=>e.preventDefault())})}),q=t.forwardRef((e,s)=>{let a=w(z,e.__scopeDialog),r=t.useRef(!1),n=t.useRef(!1);return(0,f.jsx)(T,{...e,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{e.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||a.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,n.current=!1},onInteractOutside:s=>{e.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,"pointerdown"!==s.detail.originalEvent.type||(n.current=!0));let t=s.target;a.triggerRef.current?.contains(t)&&s.preventDefault(),"focusin"===s.detail.originalEvent.type&&n.current&&s.preventDefault()}})}),T=t.forwardRef((e,s)=>{let{__scopeDialog:a,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:l,...c}=e,x=w(z,a),m=t.useRef(null),u=(0,n.e)(s,m);return(0,h.EW)(),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(d.M,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:l,children:(0,f.jsx)(o.XB,{role:"dialog",id:x.contentId,"aria-describedby":x.descriptionId,"aria-labelledby":x.titleId,"data-state":B(x.open),...c,ref:u,onDismiss:()=>x.onOpenChange(!1)})}),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Y,{titleId:x.titleId}),(0,f.jsx)(Q,{contentRef:m,descriptionId:x.descriptionId})]})]})}),L="DialogTitle",G=t.forwardRef((e,s)=>{let{__scopeDialog:a,...t}=e,r=w(L,a);return(0,f.jsx)(u.WV.h2,{id:r.titleId,...t,ref:s})});G.displayName=L;var U="DialogDescription",_=t.forwardRef((e,s)=>{let{__scopeDialog:a,...t}=e,r=w(U,a);return(0,f.jsx)(u.WV.p,{id:r.descriptionId,...t,ref:s})});_.displayName=U;var V="DialogClose",F=t.forwardRef((e,s)=>{let{__scopeDialog:a,...t}=e,n=w(V,a);return(0,f.jsx)(u.WV.button,{type:"button",...t,ref:s,onClick:(0,r.M)(e.onClick,()=>n.onOpenChange(!1))})});function B(e){return e?"open":"closed"}F.displayName=V;var $="DialogTitleWarning",[W,H]=(0,i.k)($,{contentName:z,titleName:L,docsSlug:"dialog"}),Y=({titleId:e})=>{let s=H($),a=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return t.useEffect(()=>{e&&!document.getElementById(e)&&console.error(a)},[a,e]),null},Q=({contentRef:e,descriptionId:s})=>{let a=H("DialogDescriptionWarning"),r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${a.contentName}}.`;return t.useEffect(()=>{let a=e.current?.getAttribute("aria-describedby");s&&a&&!document.getElementById(s)&&console.warn(r)},[r,e,s]),null},X=C,K=D,J=M,ee=I,es=P,ea=G,et=_,er=F}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[4372,7329,1472,7420,5003,8855,9358,533,1826,6003,7752,9788],()=>a(8598));module.exports=t})();