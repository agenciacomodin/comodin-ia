(()=>{var e={};e.id=7354,e.ids=[7354],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},86624:e=>{"use strict";e.exports=require("querystring")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},67235:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),t(83482),t(69910),t(71363),t(15307);var s=t(36576),r=t(72007),n=t(21818),o=t.n(n),i=t(88897),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(a,l);let d=["",{children:["(authenticated)",{children:["campaigns",{children:["templates",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,83482)),"/home/ubuntu/comodin_ia/app/app/(authenticated)/campaigns/templates/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,69910)),"/home/ubuntu/comodin_ia/app/app/(authenticated)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,71363,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,15307)),"/home/ubuntu/comodin_ia/app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,71363,23)),"next/dist/client/components/not-found-error"]}],c=["/home/ubuntu/comodin_ia/app/app/(authenticated)/campaigns/templates/page.tsx"],u="/(authenticated)/campaigns/templates/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(authenticated)/campaigns/templates/page",pathname:"/campaigns/templates",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},77776:(e,a,t)=>{Promise.resolve().then(t.bind(t,17645))},17645:(e,a,t)=>{"use strict";t.d(a,{default:()=>y});var s=t(62901),r=t(24383),n=t(23803),o=t(27878),i=t(31606),l=t(250),d=t(82657),c=t(52),u=t(72388),p=t(65923),m=t(23094),x=t(61659),h=t(21391);let g=(0,t(71945).Z)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);var f=t(32317),E=t(97718),N=t(91046),j=t(60437),v=t(97623);function y({canCreateTemplates:e,canManageTemplates:a,canSyncMeta:t}){let[y,C]=(0,r.useState)([]),[R,b]=(0,r.useState)(!0),[I,A]=(0,r.useState)(""),[T,D]=(0,r.useState)("all"),[S,P]=(0,r.useState)("all"),[w,_]=(0,r.useState)(!1),[O,M]=(0,r.useState)(!1),{toast:L}=(0,j.pm)(),[F,V]=(0,r.useState)({name:"",category:"MARKETING",language:"es",bodyContent:"",headerType:"NONE",hasButtons:!1}),k=async()=>{try{b(!0);let e=await fetch("/api/campaigns/templates"),a=await e.json();if(a.success)C(a.data||[]);else throw Error(a.error)}catch(e){console.error("Error loading templates:",e),L({title:"Error",description:"No se pudieron cargar las plantillas",variant:"destructive"})}finally{b(!1)}},G=async()=>{try{if(!F.name||!F.bodyContent||!F.category){L({title:"Error",description:"Por favor completa todos los campos requeridos",variant:"destructive"});return}let e=await fetch("/api/campaigns/templates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)}),a=await e.json();if(a.success)L({title:"\xc9xito",description:"Plantilla creada exitosamente"}),_(!1),V({name:"",category:"MARKETING",language:"es",bodyContent:"",headerType:"NONE",hasButtons:!1}),k();else throw Error(a.error)}catch(e){console.error("Error creating template:",e),L({title:"Error",description:"Error al crear la plantilla",variant:"destructive"})}},U=async()=>{try{M(!0),await new Promise(e=>setTimeout(e,2e3)),L({title:"\xc9xito",description:"Sincronizaci\xf3n con Meta completada"}),k()}catch(e){console.error("Error syncing with Meta:",e),L({title:"Error",description:"Error al sincronizar con Meta Business",variant:"destructive"})}finally{M(!1)}},B=y.filter(e=>{let a=e.name.toLowerCase().includes(I.toLowerCase())||e.bodyContent.toLowerCase().includes(I.toLowerCase()),t="all"===T||e.status===T,s="all"===S||e.category===S;return a&&t&&s}),z=[...new Set(y.map(e=>e.category))];if(R)return(0,s.jsxs)("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Gestor de Plantillas"}),s.jsx("p",{className:"text-muted-foreground",children:"Gestiona plantillas de mensajes pre-aprobadas por Meta"})]})}),s.jsx("div",{className:"grid gap-6",children:[void 0,void 0,void 0].map((e,a)=>s.jsx(n.Zb,{children:s.jsx(n.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"animate-pulse space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),s.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2"})]})})},a))})]});let H=e=>{switch(e){case"APPROVED":return s.jsx(m.Z,{className:"h-4 w-4 text-green-600"});case"REJECTED":return s.jsx(x.Z,{className:"h-4 w-4 text-red-600"});case"PENDING":return s.jsx(h.Z,{className:"h-4 w-4 text-yellow-600"});case"ARCHIVED":return s.jsx(g,{className:"h-4 w-4 text-gray-600"});default:return s.jsx(f.Z,{className:"h-4 w-4 text-blue-600"})}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Gestor de Plantillas"}),s.jsx("p",{className:"text-muted-foreground",children:"Gestiona plantillas de mensajes pre-aprobadas por Meta"})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[t&&s.jsx(o.z,{variant:"outline",onClick:U,disabled:O,children:O?"Sincronizando...":"Sincronizar con Meta"}),e&&(0,s.jsxs)(p.Vq,{open:w,onOpenChange:_,children:[s.jsx(p.hg,{asChild:!0,children:(0,s.jsxs)(o.z,{children:[s.jsx(E.Z,{className:"mr-2 h-4 w-4"}),"Nueva Plantilla"]})}),(0,s.jsxs)(p.cZ,{className:"max-w-2xl",children:[(0,s.jsxs)(p.fK,{children:[s.jsx(p.$N,{children:"Crear Nueva Plantilla"}),s.jsx(p.Be,{children:"Crea una nueva plantilla de mensaje para tus campa\xf1as"})]}),(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[s.jsx(d.Label,{htmlFor:"name",children:"Nombre de la plantilla *"}),s.jsx(l.I,{id:"name",placeholder:"Ej: Bienvenida nuevos clientes",value:F.name||"",onChange:e=>V({...F,name:e.target.value})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[s.jsx(d.Label,{htmlFor:"category",children:"Categor\xeda *"}),(0,s.jsxs)(u.Ph,{value:F.category,onValueChange:e=>V({...F,category:e}),children:[s.jsx(u.i4,{children:s.jsx(u.ki,{placeholder:"Selecciona categor\xeda"})}),(0,s.jsxs)(u.Bw,{children:[s.jsx(u.Ql,{value:"MARKETING",children:"Marketing"}),s.jsx(u.Ql,{value:"UTILITY",children:"Utilidad"}),s.jsx(u.Ql,{value:"AUTHENTICATION",children:"Autenticaci\xf3n"})]})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[s.jsx(d.Label,{htmlFor:"language",children:"Idioma"}),(0,s.jsxs)(u.Ph,{value:F.language,onValueChange:e=>V({...F,language:e}),children:[s.jsx(u.i4,{children:s.jsx(u.ki,{placeholder:"Selecciona idioma"})}),(0,s.jsxs)(u.Bw,{children:[s.jsx(u.Ql,{value:"es",children:"Espa\xf1ol"}),s.jsx(u.Ql,{value:"en",children:"Ingl\xe9s"})]})]})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[s.jsx(d.Label,{htmlFor:"headerType",children:"Tipo de encabezado"}),(0,s.jsxs)(u.Ph,{value:F.headerType,onValueChange:e=>V({...F,headerType:e}),children:[s.jsx(u.i4,{children:s.jsx(u.ki,{placeholder:"Selecciona tipo"})}),(0,s.jsxs)(u.Bw,{children:[s.jsx(u.Ql,{value:"NONE",children:"Sin encabezado"}),s.jsx(u.Ql,{value:"TEXT",children:"Texto"}),s.jsx(u.Ql,{value:"IMAGE",children:"Imagen"}),s.jsx(u.Ql,{value:"VIDEO",children:"Video"}),s.jsx(u.Ql,{value:"DOCUMENT",children:"Documento"})]})]})]}),"TEXT"===F.headerType&&(0,s.jsxs)("div",{className:"grid gap-2",children:[s.jsx(d.Label,{htmlFor:"headerContent",children:"Contenido del encabezado"}),s.jsx(l.I,{id:"headerContent",placeholder:"Texto del encabezado",value:F.headerContent||"",onChange:e=>V({...F,headerContent:e.target.value})})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[s.jsx(d.Label,{htmlFor:"bodyContent",children:"Contenido del mensaje *"}),s.jsx(c.g,{id:"bodyContent",placeholder:"Hola {{1}}, bienvenido a nuestra plataforma...",value:F.bodyContent||"",onChange:e=>V({...F,bodyContent:e.target.value}),rows:6}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Usa ","{{1}}, {{2}}, etc."," para variables din\xe1micas"]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[s.jsx(d.Label,{htmlFor:"footerContent",children:"Pie de mensaje (opcional)"}),s.jsx(l.I,{id:"footerContent",placeholder:"Ej: Responde STOP para darte de baja",value:F.footerContent||"",onChange:e=>V({...F,footerContent:e.target.value})})]})]}),(0,s.jsxs)(p.cN,{children:[s.jsx(o.z,{variant:"outline",onClick:()=>_(!1),children:"Cancelar"}),s.jsx(o.z,{onClick:G,children:"Crear Plantilla"})]})]})]})]})]}),s.jsx(n.Zb,{children:s.jsx(n.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 items-end",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[s.jsx(d.Label,{htmlFor:"search",children:"Buscar plantillas"}),(0,s.jsxs)("div",{className:"relative",children:[s.jsx(N.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx(l.I,{id:"search",placeholder:"Buscar por nombre o contenido...",value:I,onChange:e=>A(e.target.value),className:"pl-10"})]})]}),(0,s.jsxs)("div",{className:"w-48",children:[s.jsx(d.Label,{htmlFor:"statusFilter",children:"Estado"}),(0,s.jsxs)(u.Ph,{value:T,onValueChange:D,children:[s.jsx(u.i4,{children:s.jsx(u.ki,{placeholder:"Filtrar por estado"})}),(0,s.jsxs)(u.Bw,{children:[s.jsx(u.Ql,{value:"all",children:"Todos los estados"}),s.jsx(u.Ql,{value:"APPROVED",children:"Aprobadas"}),s.jsx(u.Ql,{value:"PENDING",children:"Pendientes"}),s.jsx(u.Ql,{value:"REJECTED",children:"Rechazadas"}),s.jsx(u.Ql,{value:"PAUSED",children:"Pausadas"}),s.jsx(u.Ql,{value:"ARCHIVED",children:"Archivadas"})]})]})]}),(0,s.jsxs)("div",{className:"w-48",children:[s.jsx(d.Label,{htmlFor:"categoryFilter",children:"Categor\xeda"}),(0,s.jsxs)(u.Ph,{value:S,onValueChange:P,children:[s.jsx(u.i4,{children:s.jsx(u.ki,{placeholder:"Filtrar por categor\xeda"})}),(0,s.jsxs)(u.Bw,{children:[s.jsx(u.Ql,{value:"all",children:"Todas las categor\xedas"}),z.map(e=>s.jsx(u.Ql,{value:e,children:e},e))]})]})]})]})})}),0===B.length?s.jsx(n.Zb,{children:(0,s.jsxs)(n.aY,{className:"p-12 text-center",children:[s.jsx(f.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No hay plantillas"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:0===y.length?"Comienza creando tu primera plantilla":"No se encontraron plantillas con los filtros aplicados"}),e&&0===y.length&&s.jsx("div",{className:"mt-6",children:(0,s.jsxs)(o.z,{onClick:()=>_(!0),children:[s.jsx(E.Z,{className:"mr-2 h-4 w-4"}),"Nueva Plantilla"]})})]})}):s.jsx("div",{className:"grid gap-4",children:B.map(e=>s.jsx(n.Zb,{className:"hover:shadow-md transition-shadow",children:s.jsx(n.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[H(e.status),s.jsx("h3",{className:"font-semibold",children:e.name}),s.jsx(i.C,{variant:"outline",className:`text-xs ${"green"===v.DX[e.status]?"bg-green-50 text-green-700 border-green-200":"yellow"===v.DX[e.status]?"bg-yellow-50 text-yellow-700 border-yellow-200":"red"===v.DX[e.status]?"bg-red-50 text-red-700 border-red-200":"orange"===v.DX[e.status]?"bg-orange-50 text-orange-700 border-orange-200":"bg-gray-50 text-gray-700 border-gray-200"}`,children:v.WV[e.status]}),s.jsx(i.C,{variant:"secondary",className:"text-xs",children:e.category}),s.jsx(i.C,{variant:"outline",className:"text-xs",children:e.language.toUpperCase()})]}),s.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.bodyContent}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-muted-foreground",children:[(0,s.jsxs)("span",{children:["Usado ",e.usageCount," veces"]}),e.successfulSends>0&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("span",{children:"•"}),(0,s.jsxs)("span",{children:[e.successfulSends," env\xedos exitosos"]})]}),e.lastUsedAt&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("span",{children:"•"}),(0,s.jsxs)("span",{children:["\xdaltimo uso: ",new Date(e.lastUsedAt).toLocaleDateString()]})]}),s.jsx("span",{children:"•"}),(0,s.jsxs)("span",{children:["Creado por ",e.createdByName]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>window.location.href=`/campaigns/templates/${e.id}`,children:"Ver detalles"}),a&&s.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>window.location.href=`/campaigns/templates/${e.id}/edit`,children:"Editar"})]})]})})},e.id))})]})}},23803:(e,a,t)=>{"use strict";t.d(a,{Ol:()=>i,SZ:()=>d,Zb:()=>o,aY:()=>c,eW:()=>u,ll:()=>l});var s=t(62901),r=t(24383),n=t(68637);let o=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));o.displayName="Card";let i=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...a}));i.displayName="CardHeader";let l=r.forwardRef(({className:e,...a},t)=>s.jsx("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));l.displayName="CardTitle";let d=r.forwardRef(({className:e,...a},t)=>s.jsx("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",e),...a}));d.displayName="CardDescription";let c=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,n.cn)("p-6 pt-0",e),...a}));c.displayName="CardContent";let u=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",e),...a}));u.displayName="CardFooter"},65923:(e,a,t)=>{"use strict";t.d(a,{$N:()=>h,Be:()=>g,Vq:()=>l,cN:()=>x,cZ:()=>p,fK:()=>m,hg:()=>d});var s=t(62901),r=t(24383),n=t(18832),o=t(42594),i=t(68637);let l=n.fC,d=n.xz,c=n.h_;n.x8;let u=r.forwardRef(({className:e,...a},t)=>s.jsx(n.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));u.displayName=n.aV.displayName;let p=r.forwardRef(({className:e,children:a,...t},r)=>(0,s.jsxs)(c,{children:[s.jsx(u,{}),(0,s.jsxs)(n.VY,{ref:r,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[a,(0,s.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(o.Z,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));p.displayName=n.VY.displayName;let m=({className:e,...a})=>s.jsx("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});m.displayName="DialogHeader";let x=({className:e,...a})=>s.jsx("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});x.displayName="DialogFooter";let h=r.forwardRef(({className:e,...a},t)=>s.jsx(n.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",e),...a}));h.displayName=n.Dx.displayName;let g=r.forwardRef(({className:e,...a},t)=>s.jsx(n.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...a}));g.displayName=n.dk.displayName},82657:(e,a,t)=>{"use strict";t.d(a,{Label:()=>d});var s=t(62901),r=t(24383),n=t(8388),o=t(47279),i=t(68637);let l=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef(({className:e,...a},t)=>s.jsx(n.f,{ref:t,className:(0,i.cn)(l(),e),...a}));d.displayName=n.f.displayName},72388:(e,a,t)=>{"use strict";t.d(a,{Bw:()=>h,Ph:()=>c,Ql:()=>g,i4:()=>p,ki:()=>u});var s=t(62901),r=t(24383),n=t(76960),o=t(7259),i=t(26026),l=t(85453),d=t(68637);let c=n.fC;n.ZA;let u=n.B4,p=r.forwardRef(({className:e,children:a,...t},r)=>(0,s.jsxs)(n.xz,{ref:r,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[a,s.jsx(n.JO,{asChild:!0,children:s.jsx(o.Z,{className:"h-4 w-4 opacity-50"})})]}));p.displayName=n.xz.displayName;let m=r.forwardRef(({className:e,...a},t)=>s.jsx(n.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:s.jsx(i.Z,{className:"h-4 w-4"})}));m.displayName=n.u_.displayName;let x=r.forwardRef(({className:e,...a},t)=>s.jsx(n.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:s.jsx(o.Z,{className:"h-4 w-4"})}));x.displayName=n.$G.displayName;let h=r.forwardRef(({className:e,children:a,position:t="popper",...r},o)=>s.jsx(n.h_,{children:(0,s.jsxs)(n.VY,{ref:o,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[s.jsx(m,{}),s.jsx(n.l_,{className:(0,d.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),s.jsx(x,{})]})}));h.displayName=n.VY.displayName,r.forwardRef(({className:e,...a},t)=>s.jsx(n.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a})).displayName=n.__.displayName;let g=r.forwardRef(({className:e,children:a,...t},r)=>(0,s.jsxs)(n.ck,{ref:r,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(n.wU,{children:s.jsx(l.Z,{className:"h-4 w-4"})})}),s.jsx(n.eT,{children:a})]}));g.displayName=n.ck.displayName,r.forwardRef(({className:e,...a},t)=>s.jsx(n.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...a})).displayName=n.Z0.displayName},52:(e,a,t)=>{"use strict";t.d(a,{g:()=>o});var s=t(62901),r=t(24383),n=t(68637);let o=r.forwardRef(({className:e,...a},t)=>s.jsx("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...a}));o.displayName="Textarea"},97623:(e,a,t)=>{"use strict";t.d(a,{BT:()=>r.AutomationActionType,C2:()=>T,DX:()=>R,Dn:()=>b,ED:()=>m,Eb:()=>f,FQ:()=>E,Go:()=>o,Jg:()=>x,Om:()=>c,Pg:()=>v,Rh:()=>A,Rn:()=>g,Sn:()=>l,UM:()=>S,Ug:()=>y,Vb:()=>r.AutomationConditionType,WC:()=>i,WV:()=>C,WY:()=>n,aE:()=>u,d1:()=>h,fB:()=>d,hC:()=>r.KnowledgeSourceStatus,hQ:()=>N,mT:()=>D,n9:()=>p,rH:()=>r.KnowledgeSourceType,uU:()=>I,wu:()=>P,ym:()=>j});var s,r=t(53524);!function(e){e.INSUFFICIENT_BALANCE="INSUFFICIENT_BALANCE",e.NO_PROVIDER_AVAILABLE="NO_PROVIDER_AVAILABLE",e.PROVIDER_ERROR="PROVIDER_ERROR",e.INVALID_REQUEST="INVALID_REQUEST",e.RATE_LIMIT_EXCEEDED="RATE_LIMIT_EXCEEDED",e.INTERNAL_ERROR="INTERNAL_ERROR"}(s||(s={}));let n={OPEN:"Abierta",PENDING:"Pendiente",RESOLVED:"Resuelta",TRANSFERRED:"Transferida",ARCHIVED:"Archivada"},o={LOW:"Baja",MEDIUM:"Media",HIGH:"Alta",URGENT:"Urgente"},i={LOW:"gray",MEDIUM:"blue",HIGH:"orange",URGENT:"red"},l={QR_CODE:"Conexi\xf3n R\xe1pida (QR)",API_OFFICIAL:"Conexi\xf3n Profesional (API)"},d={DISCONNECTED:"Desconectado",CONNECTING:"Conectando",CONNECTED:"Conectado",ERROR:"Error",EXPIRED:"Expirado"},c={DISCONNECTED:"gray",CONNECTING:"yellow",CONNECTED:"green",ERROR:"red",EXPIRED:"orange"},u={image:["image/jpeg","image/png","image/gif","image/webp"],document:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain"],video:["video/mp4","video/avi","video/mov","video/wmv"],audio:["audio/mp3","audio/wav","audio/aac","audio/ogg"]},p={image:10485760,document:52428800,video:104857600,audio:20971520},m={SALES:"Ventas",SUPPORT:"Soporte",QUESTION:"Pregunta",COMPLAINT:"Queja",BOOKING:"Reserva",PAYMENT:"Pago",INFORMATION:"Informaci\xf3n",GREETING:"Saludo",FAREWELL:"Despedida",OTHER:"Otro"},x={SALES:"green",SUPPORT:"blue",QUESTION:"yellow",COMPLAINT:"red",BOOKING:"purple",PAYMENT:"orange",INFORMATION:"cyan",GREETING:"teal",FAREWELL:"gray",OTHER:"slate"},h={INTENTION_DETECTED:"Intenci\xf3n detectada",KEYWORDS_CONTAINS:"Contiene palabras clave",SENDER_IS_VIP:"Remitente es VIP",TIME_RANGE:"Horario espec\xedfico",FIRST_MESSAGE:"Primer mensaje",MESSAGE_COUNT:"N\xfamero de mensajes",RESPONSE_TIME:"Tiempo de respuesta"},g={ADD_TAG:"Agregar etiqueta",ASSIGN_AGENT:"Asignar agente",SET_PRIORITY:"Establecer prioridad",AUTO_REPLY:"Respuesta autom\xe1tica",MARK_VIP:"Marcar como VIP",TRANSFER_CONVERSATION:"Transferir conversaci\xf3n",CREATE_TASK:"Crear tarea",SEND_NOTIFICATION:"Enviar notificaci\xf3n"},f={pdf:["application/pdf"],document:["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],text:["text/plain","text/markdown","text/csv"],web:["text/html"]},E=52428800,N={UPLOADING:"Subiendo",PROCESSING:"Procesando",CHUNKING:"Fragmentando",EMBEDDING:"Generando Embeddings",ACTIVE:"Activo",ERROR:"Error",DISABLED:"Deshabilitado"},j={ECOMMERCE:"E-commerce",CRM:"CRM",ERP:"ERP",PAYMENT:"Pagos",ANALYTICS:"An\xe1lisis",MARKETING:"Marketing",SOCIAL_MEDIA:"Redes Sociales",EMAIL:"Email Marketing",SUPPORT:"Soporte",OTHER:"Otros"},v={AVAILABLE:"Disponible",CONNECTED:"Conectado",DISCONNECTED:"Desconectado",ERROR:"Error",PENDING:"Pendiente"},y={SHOPIFY:{displayName:"Shopify",description:"Conecta tu tienda Shopify para consultar productos, pedidos e inventario",authType:"oauth",authFields:["shop_domain","access_token"],iconUrl:"/integrations/shopify.svg",brandColor:"#7AB55C",supportedFeatures:["products","orders","customers","inventory"],documentation:"https://docs.shopify.com/api"},WOOCOMMERCE:{displayName:"WooCommerce",description:"Conecta tu tienda WooCommerce para gestionar productos y pedidos",authType:"api_key",authFields:["site_url","consumer_key","consumer_secret"],iconUrl:"/integrations/woocommerce.svg",brandColor:"#7F54B3",supportedFeatures:["products","orders","customers"],documentation:"https://woocommerce.github.io/woocommerce-rest-api-docs/"},TIENDANUBE:{displayName:"TiendaNube",description:"Conecta tu tienda TiendaNube para sincronizar cat\xe1logo y pedidos",authType:"oauth",authFields:["store_id","access_token"],iconUrl:"/integrations/tiendanube.svg",brandColor:"#FF6900",supportedFeatures:["products","orders","customers"],documentation:"https://developers.tiendanube.com/"}},C={PENDING:"Pendiente",APPROVED:"Aprobada",REJECTED:"Rechazada",PAUSED:"Pausada",ARCHIVED:"Archivada"},R={PENDING:"yellow",APPROVED:"green",REJECTED:"red",PAUSED:"orange",ARCHIVED:"gray"},b={DRAFT:"Borrador",SCHEDULED:"Programada",SENDING:"Enviando",COMPLETED:"Completada",PAUSED:"Pausada",CANCELLED:"Cancelada",FAILED:"Fallida"},I={DRAFT:"gray",SCHEDULED:"blue",SENDING:"yellow",COMPLETED:"green",PAUSED:"orange",CANCELLED:"red",FAILED:"red"},A={IMMEDIATE:"Inmediato",SCHEDULED:"Programado",DRIP:"Secuencial",AB_TEST:"Prueba A/B",WHATSAPP_BUSINESS:"WhatsApp Business",WHATSAPP_API:"WhatsApp API"},T={IMMEDIATE:"Env\xedo inmediato a todos los destinatarios",SCHEDULED:"Env\xedo programado para una fecha espec\xedfica",DRIP:"Env\xedo secuencial con intervalos definidos",AB_TEST:"Prueba diferentes versiones del mensaje",WHATSAPP_BUSINESS:"M\xe1ximo 40 mensajes diarios, cualquier contenido (texto/imagen/video/audio)",WHATSAPP_API:"Env\xedo ilimitado, solo plantillas verificadas por Meta"},D={INCLUDE_TAG:"Incluir etiqueta",EXCLUDE_TAG:"Excluir etiqueta",CHANNEL:"Canal de origen",VIP_STATUS:"Estado VIP",LAST_CONTACT:"\xdaltimo contacto",CONVERSATION_STATUS:"Estado de conversaci\xf3n"},S={SEND_RATE:10,BATCH_SIZE:100,RETRY_ATTEMPTS:3,PREVIEW_SAMPLE_SIZE:20,PREVIEW_EXPIRATION_HOURS:24},P={BUSINESS:{MAX_DAILY_MESSAGES:40,SEND_RATE:2,BATCH_SIZE:10,REQUIRES_VERIFICATION:!1,SUPPORTS_RICH_MEDIA:!0},API:{MAX_DAILY_MESSAGES:null,SEND_RATE:50,BATCH_SIZE:500,REQUIRES_VERIFICATION:!0,SUPPORTS_RICH_MEDIA:!0}}},23094:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(71945).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},61659:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(71945).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},32317:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(71945).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},97718:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(71945).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},83482:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c,metadata:()=>d});var s=t(83537),r=t(57978),n=t(15438),o=t(11826),i=t(25590);let l=(0,t(88895).createProxy)(String.raw`/home/ubuntu/comodin_ia/app/components/campaigns/template-manager.tsx#default`),d={title:"Gestor de Plantillas - COMOD\xcdN IA",description:"Gestionar plantillas de mensajes pre-aprobadas por Meta"};async function c(){let e=await (0,r.getServerSession)(o.L);e?.user?.organizationId||(0,n.redirect)("/auth/signin"),(0,i.N$)(e.user.role,i.y3.VIEW_MESSAGE_TEMPLATES)||(0,n.redirect)("/campaigns");let a=(0,i.N$)(e.user.role,i.y3.CREATE_MESSAGE_TEMPLATES),t=(0,i.N$)(e.user.role,i.y3.MANAGE_MESSAGE_TEMPLATES),d=(0,i.N$)(e.user.role,i.y3.SYNC_META_TEMPLATES);return s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(l,{canCreateTemplates:a,canManageTemplates:t,canSyncMeta:d})})}},69910:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>l});var s=t(83537),r=t(1507),n=t(15438),o=t(97973),i=t(77516);async function l({children:e}){try{await (0,r.BN)()}catch(e){(0,n.redirect)("/auth/login")}return(0,s.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[s.jsx(o._,{}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx(i.c,{}),s.jsx("main",{className:"flex-1 overflow-auto",children:e})]})]})}},18832:(e,a,t)=>{"use strict";t.d(a,{Dx:()=>et,VY:()=>ea,aV:()=>ee,dk:()=>es,fC:()=>$,h_:()=>J,jm:()=>q,p8:()=>v,x8:()=>er,xz:()=>K});var s=t(24383),r=t(1940),n=t(56163),o=t(89291),i=t(50430),l=t(98106),d=t(8378),c=t(59293),u=t(4764),p=t(52490),m=t(74132),x=t(23883),h=t(81214),g=t(51627),f=t(42049),E=t(62901),N="Dialog",[j,v]=(0,o.b)(N),[y,C]=j(N),R=e=>{let{__scopeDialog:a,children:t,open:r,defaultOpen:n,onOpenChange:o,modal:d=!0}=e,c=s.useRef(null),u=s.useRef(null),[p=!1,m]=(0,l.T)({prop:r,defaultProp:n,onChange:o});return(0,E.jsx)(y,{scope:a,triggerRef:c,contentRef:u,contentId:(0,i.M)(),titleId:(0,i.M)(),descriptionId:(0,i.M)(),open:p,onOpenChange:m,onOpenToggle:s.useCallback(()=>m(e=>!e),[m]),modal:d,children:t})};R.displayName=N;var b="DialogTrigger",I=s.forwardRef((e,a)=>{let{__scopeDialog:t,...s}=e,o=C(b,t),i=(0,n.e)(a,o.triggerRef);return(0,E.jsx)(m.WV.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Z(o.open),...s,ref:i,onClick:(0,r.M)(e.onClick,o.onOpenToggle)})});I.displayName=b;var A="DialogPortal",[T,D]=j(A,{forceMount:void 0}),S=e=>{let{__scopeDialog:a,forceMount:t,children:r,container:n}=e,o=C(A,a);return(0,E.jsx)(T,{scope:a,forceMount:t,children:s.Children.map(r,e=>(0,E.jsx)(p.z,{present:t||o.open,children:(0,E.jsx)(u.h,{asChild:!0,container:n,children:e})}))})};S.displayName=A;var P="DialogOverlay",w=s.forwardRef((e,a)=>{let t=D(P,e.__scopeDialog),{forceMount:s=t.forceMount,...r}=e,n=C(P,e.__scopeDialog);return n.modal?(0,E.jsx)(p.z,{present:s||n.open,children:(0,E.jsx)(_,{...r,ref:a})}):null});w.displayName=P;var _=s.forwardRef((e,a)=>{let{__scopeDialog:t,...s}=e,r=C(P,t);return(0,E.jsx)(h.Z,{as:f.g7,allowPinchZoom:!0,shards:[r.contentRef],children:(0,E.jsx)(m.WV.div,{"data-state":Z(r.open),...s,ref:a,style:{pointerEvents:"auto",...s.style}})})}),O="DialogContent",M=s.forwardRef((e,a)=>{let t=D(O,e.__scopeDialog),{forceMount:s=t.forceMount,...r}=e,n=C(O,e.__scopeDialog);return(0,E.jsx)(p.z,{present:s||n.open,children:n.modal?(0,E.jsx)(L,{...r,ref:a}):(0,E.jsx)(F,{...r,ref:a})})});M.displayName=O;var L=s.forwardRef((e,a)=>{let t=C(O,e.__scopeDialog),o=s.useRef(null),i=(0,n.e)(a,t.contentRef,o);return s.useEffect(()=>{let e=o.current;if(e)return(0,g.Ry)(e)},[]),(0,E.jsx)(V,{...e,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,r.M)(e.onCloseAutoFocus,e=>{e.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:(0,r.M)(e.onPointerDownOutside,e=>{let a=e.detail.originalEvent,t=0===a.button&&!0===a.ctrlKey;(2===a.button||t)&&e.preventDefault()}),onFocusOutside:(0,r.M)(e.onFocusOutside,e=>e.preventDefault())})}),F=s.forwardRef((e,a)=>{let t=C(O,e.__scopeDialog),r=s.useRef(!1),n=s.useRef(!1);return(0,E.jsx)(V,{...e,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(r.current||t.triggerRef.current?.focus(),a.preventDefault()),r.current=!1,n.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(r.current=!0,"pointerdown"!==a.detail.originalEvent.type||(n.current=!0));let s=a.target;t.triggerRef.current?.contains(s)&&a.preventDefault(),"focusin"===a.detail.originalEvent.type&&n.current&&a.preventDefault()}})}),V=s.forwardRef((e,a)=>{let{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:i,...l}=e,u=C(O,t),p=s.useRef(null),m=(0,n.e)(a,p);return(0,x.EW)(),(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(c.M,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:i,children:(0,E.jsx)(d.XB,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Z(u.open),...l,ref:m,onDismiss:()=>u.onOpenChange(!1)})}),(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(Y,{titleId:u.titleId}),(0,E.jsx)(X,{contentRef:p,descriptionId:u.descriptionId})]})]})}),k="DialogTitle",G=s.forwardRef((e,a)=>{let{__scopeDialog:t,...s}=e,r=C(k,t);return(0,E.jsx)(m.WV.h2,{id:r.titleId,...s,ref:a})});G.displayName=k;var U="DialogDescription",B=s.forwardRef((e,a)=>{let{__scopeDialog:t,...s}=e,r=C(U,t);return(0,E.jsx)(m.WV.p,{id:r.descriptionId,...s,ref:a})});B.displayName=U;var z="DialogClose",H=s.forwardRef((e,a)=>{let{__scopeDialog:t,...s}=e,n=C(z,t);return(0,E.jsx)(m.WV.button,{type:"button",...s,ref:a,onClick:(0,r.M)(e.onClick,()=>n.onOpenChange(!1))})});function Z(e){return e?"open":"closed"}H.displayName=z;var W="DialogTitleWarning",[q,Q]=(0,o.k)(W,{contentName:O,titleName:k,docsSlug:"dialog"}),Y=({titleId:e})=>{let a=Q(W),t=`\`${a.contentName}\` requires a \`${a.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${a.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${a.docsSlug}`;return s.useEffect(()=>{e&&!document.getElementById(e)&&console.error(t)},[t,e]),null},X=({contentRef:e,descriptionId:a})=>{let t=Q("DialogDescriptionWarning"),r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${t.contentName}}.`;return s.useEffect(()=>{let t=e.current?.getAttribute("aria-describedby");a&&t&&!document.getElementById(a)&&console.warn(r)},[r,e,a]),null},$=R,K=I,J=S,ee=w,ea=M,et=G,es=B,er=H},8388:(e,a,t)=>{"use strict";t.d(a,{f:()=>i});var s=t(24383),r=t(74132),n=t(62901),o=s.forwardRef((e,a)=>(0,n.jsx)(r.WV.label,{...e,ref:a,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));o.displayName="Label";var i=o}};var a=require("../../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[4372,7329,1472,7420,5003,8855,9358,533,6129,1826,6003],()=>t(67235));module.exports=s})();