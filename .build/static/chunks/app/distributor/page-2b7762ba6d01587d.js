(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4868],{97602:function(e,s,a){Promise.resolve().then(a.bind(a,82538)),Promise.resolve().then(a.bind(a,40809))},82538:function(e,s,a){"use strict";a.d(s,{ProtectedRoute:function(){return o}});var r=a(15444),n=a(51924),i=a(56948),t=a(81059),l=a(70362),c=a(2422),d=a(79047);function o({children:e,permissions:s=[],requireAll:a=!1,fallback:o,redirectTo:u}){let{isLoading:x,isAuthenticated:m,hasAnyPermission:f,hasAllPermissions:h,getDashboardRoute:j}=(0,n.TE)(),g=(0,d.useRouter)();return x?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):m?!(s.length>0)||(a?h(s):f(s))?(0,r.jsx)(r.Fragment,{children:e}):o?(0,r.jsx)(r.Fragment,{children:o}):(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,r.jsxs)(i.bZ,{className:"max-w-md",children:[(0,r.jsx)(l.Z,{className:"h-4 w-4"}),(0,r.jsx)(i.Cd,{children:"Sin Permisos"}),(0,r.jsx)(i.X,{children:"No tienes los permisos necesarios para acceder a esta funcionalidad."}),(0,r.jsx)(c.z,{onClick:()=>g.push(u||j()),className:"mt-3 w-full",children:"Volver al Dashboard"})]})}):(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,r.jsxs)(i.bZ,{className:"max-w-md",children:[(0,r.jsx)(t.Z,{className:"h-4 w-4"}),(0,r.jsx)(i.Cd,{children:"Acceso Denegado"}),(0,r.jsx)(i.X,{children:"Debes iniciar sesi\xf3n para acceder a esta p\xe1gina."}),(0,r.jsx)(c.z,{onClick:()=>g.push("/auth/login"),className:"mt-3 w-full",children:"Iniciar Sesi\xf3n"})]})})}},40809:function(e,s,a){"use strict";a.d(s,{DistributorDashboard:function(){return j}});var r=a(15444),n=a(89300),i=a(99827),t=a(86765),l=a(2422),c=a(61335),d=a(2019),o=a(64624),u=a(83648),x=a(64670),m=a(39429),f=a(25422),h=a(6488);function j({organization:e,user:s}){let[a,j]=(0,n.useState)("overview");return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"py-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Panel de Distribuidor"}),(0,r.jsxs)("p",{className:"text-gray-600 mt-2",children:["\xa1Hola ",s.fullName||s.name,"! Gestiona tus clientes y comisiones"]})]})})}),(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)(t.Tabs,{value:a,onValueChange:j,className:"space-y-8",children:[(0,r.jsxs)(t.TabsList,{className:"grid w-full grid-cols-4",children:[(0,r.jsx)(t.TabsTrigger,{value:"overview",children:"Resumen"}),(0,r.jsx)(t.TabsTrigger,{value:"clients",children:"Mis Clientes"}),(0,r.jsx)(t.TabsTrigger,{value:"commissions",children:"Comisiones"}),(0,r.jsx)(t.TabsTrigger,{value:"settings",children:"Configuraci\xf3n"})]}),(0,r.jsxs)(t.TabsContent,{value:"overview",className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Clientes Activos"}),(0,r.jsx)(d.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:"12"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"+2 este mes"})]})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Usuarios Totales"}),(0,r.jsx)(o.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:"156"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"En todas tus organizaciones"})]})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Comisiones del Mes"}),(0,r.jsx)(u.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:"$2,840"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"+15% vs mes anterior"})]})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Crecimiento"}),(0,r.jsx)(x.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:"+18%"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Nuevas suscripciones"})]})]})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsx)(i.ll,{children:"Acciones R\xe1pidas"}),(0,r.jsx)(i.SZ,{children:"Gestiona tus clientes de manera eficiente"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)(l.z,{className:"h-24 flex flex-col items-center justify-center space-y-2",children:[(0,r.jsx)(m.Z,{className:"h-6 w-6"}),(0,r.jsx)("span",{children:"Crear Nueva Organizaci\xf3n"})]}),(0,r.jsxs)(l.z,{variant:"outline",className:"h-24 flex flex-col items-center justify-center space-y-2",children:[(0,r.jsx)(f.Z,{className:"h-6 w-6"}),(0,r.jsx)("span",{children:"Ver Reportes"})]}),(0,r.jsxs)(l.z,{variant:"outline",className:"h-24 flex flex-col items-center justify-center space-y-2",children:[(0,r.jsx)(h.Z,{className:"h-6 w-6"}),(0,r.jsx)("span",{children:"Configurar Comisiones"})]})]})})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsx)(i.ll,{children:"Clientes Recientes"}),(0,r.jsx)(i.SZ,{children:"Organizaciones creadas recientemente"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsx)("div",{className:"space-y-4",children:[{name:"Panader\xeda La Esperanza",plan:"Starter",status:"TRIAL",users:3,created:"Hace 2 d\xedas"},{name:"Consultora Marketing",plan:"Growth",status:"ACTIVE",users:8,created:"Hace 1 semana"},{name:"Taller Mec\xe1nico San Jos\xe9",plan:"Starter",status:"ACTIVE",users:2,created:"Hace 2 semanas"}].map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("h4",{className:"font-semibold",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[e.users," usuarios â€¢ ",e.created]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(c.C,{variant:"ACTIVE"===e.status?"default":"secondary",children:e.status}),(0,r.jsx)(c.C,{variant:"outline",children:e.plan}),(0,r.jsx)(l.z,{variant:"outline",size:"sm",children:"Ver"})]})]},s))})})]})]}),(0,r.jsx)(t.TabsContent,{value:"clients",className:"space-y-6",children:(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsx)(i.ll,{children:"Mis Organizaciones Cliente"}),(0,r.jsx)(i.SZ,{children:"Administra todas las organizaciones que has creado"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsx)("div",{className:"flex space-x-4",children:(0,r.jsxs)(l.z,{children:[(0,r.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Nueva Organizaci\xf3n"]})})}),(0,r.jsx)("p",{className:"text-gray-600",children:"Lista detallada de clientes en desarrollo..."})]})})]})}),(0,r.jsx)(t.TabsContent,{value:"commissions",className:"space-y-6",children:(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsx)(i.ll,{children:"Mis Comisiones"}),(0,r.jsx)(i.SZ,{children:"Seguimiento detallado de tus ganancias"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsx)("p",{className:"text-gray-600",children:"Panel de comisiones en desarrollo..."})})]})}),(0,r.jsx)(t.TabsContent,{value:"settings",className:"space-y-6",children:(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsx)(i.ll,{children:"Configuraci\xf3n de Distribuidor"}),(0,r.jsx)(i.SZ,{children:"Configura tu perfil y preferencias"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsx)("p",{className:"text-gray-600",children:"Configuraci\xf3n en desarrollo..."})})]})})]})})]})}},56948:function(e,s,a){"use strict";a.d(s,{Cd:function(){return d},X:function(){return o},bZ:function(){return c}});var r=a(15444),n=a(89300),i=a(2371),t=a(65522);let l=(0,i.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=n.forwardRef(({className:e,variant:s,...a},n)=>(0,r.jsx)("div",{ref:n,role:"alert",className:(0,t.cn)(l({variant:s}),e),...a}));c.displayName="Alert";let d=n.forwardRef(({className:e,...s},a)=>(0,r.jsx)("h5",{ref:a,className:(0,t.cn)("mb-1 font-medium leading-none tracking-tight",e),...s}));d.displayName="AlertTitle";let o=n.forwardRef(({className:e,...s},a)=>(0,r.jsx)("div",{ref:a,className:(0,t.cn)("text-sm [&_p]:leading-relaxed",e),...s}));o.displayName="AlertDescription"},61335:function(e,s,a){"use strict";a.d(s,{C:function(){return l}});var r=a(15444);a(89300);var n=a(2371),i=a(65522);let t=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:s,...a}){return(0,r.jsx)("div",{className:(0,i.cn)(t({variant:s}),e),...a})}},99827:function(e,s,a){"use strict";a.d(s,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return t},aY:function(){return o},eW:function(){return u},ll:function(){return c}});var r=a(15444),n=a(89300),i=a(65522);let t=n.forwardRef(({className:e,...s},a)=>(0,r.jsx)("div",{ref:a,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));t.displayName="Card";let l=n.forwardRef(({className:e,...s},a)=>(0,r.jsx)("div",{ref:a,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...s}));l.displayName="CardHeader";let c=n.forwardRef(({className:e,...s},a)=>(0,r.jsx)("h3",{ref:a,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));c.displayName="CardTitle";let d=n.forwardRef(({className:e,...s},a)=>(0,r.jsx)("p",{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",e),...s}));d.displayName="CardDescription";let o=n.forwardRef(({className:e,...s},a)=>(0,r.jsx)("div",{ref:a,className:(0,i.cn)("p-6 pt-0",e),...s}));o.displayName="CardContent";let u=n.forwardRef(({className:e,...s},a)=>(0,r.jsx)("div",{ref:a,className:(0,i.cn)("flex items-center p-6 pt-0",e),...s}));u.displayName="CardFooter"},86765:function(e,s,a){"use strict";a.d(s,{Tabs:function(){return l},TabsContent:function(){return o},TabsList:function(){return c},TabsTrigger:function(){return d}});var r=a(15444),n=a(89300),i=a(84018),t=a(65522);let l=i.fC,c=n.forwardRef(({className:e,...s},a)=>(0,r.jsx)(i.aV,{ref:a,className:(0,t.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));c.displayName=i.aV.displayName;let d=n.forwardRef(({className:e,...s},a)=>(0,r.jsx)(i.xz,{ref:a,className:(0,t.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));d.displayName=i.xz.displayName;let o=n.forwardRef(({className:e,...s},a)=>(0,r.jsx)(i.VY,{ref:a,className:(0,t.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));o.displayName=i.VY.displayName},51924:function(e,s,a){"use strict";a.d(s,{TE:function(){return i}});var r=a(75762),n=a(92937);function i(){let{data:e,status:s}=(0,r.useSession)(),a=e?.user,i=a?.role,t=a?.organizationId;return{isAuthenticated:!!e,isLoading:"loading"===s,user:a,role:i,organizationId:t,hasPermission:e=>!!i&&(0,n.N$)(i,e),hasAnyPermission:e=>!!i&&(0,n.vr)(i,e),hasAllPermissions:e=>{if(!i)return!1;let s=(0,n.ai)(i).map(e=>e.toString());return(0,n.wP)(s,e)},canAccessRoute:e=>{if(!i)return!1;let s=(0,n.ai)(i).map(e=>e.toString());return(0,n.mn)(s,e)},getDashboardRoute:()=>i?(0,n.Ol)(i):"/dashboard",getAllPermissions:()=>i?(0,n.ai)(i):[],isSuperAdmin:"SUPER_ADMIN"===i,isDistributor:"DISTRIBUIDOR"===i,isOwner:"PROPIETARIO"===i,isAgent:"AGENTE"===i,canManageUsers:"SUPER_ADMIN"===i||"PROPIETARIO"===i,canManageOrganization:"SUPER_ADMIN"===i||"PROPIETARIO"===i,canViewAllConversations:"AGENTE"!==i,canManageWhatsApp:"SUPER_ADMIN"===i||"PROPIETARIO"===i,canManageBilling:"SUPER_ADMIN"===i||"PROPIETARIO"===i,canConfigureAI:"SUPER_ADMIN"===i||"PROPIETARIO"===i,canViewReports:"AGENTE"!==i,canManageClients:"DISTRIBUIDOR"===i||"SUPER_ADMIN"===i}}}},function(e){e.O(0,[6539,5762,4018,8642,3657,2386,7156,1744],function(){return e(e.s=97602)}),_N_E=e.O()}]);