(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7880],{49690:function(e,s,a){Promise.resolve().then(a.bind(a,60026))},60026:function(e,s,a){"use strict";a.d(s,{AIResolutionTester:function(){return b}});var r=a(15444),n=a(89300),t=a(2422),i=a(67012),l=a(99827),c=a(61335),d=a(37108),o=a(86765),m=a(4464),u=a(61572),x=a(25076),f=a(18218),h=a(26771),p=a(26584),j=a(62492),g=a(66124),v=a(66772),N=a(64611);function b(){var e,s;let[a,b]=(0,n.useState)(""),[y,w]=(0,n.useState)(!1),[C,T]=(0,n.useState)(null),[Z,R]=(0,n.useState)(null),k=async()=>{if(!a.trim()){N.Am.error("Por favor ingresa una consulta para probar");return}w(!0);try{let e=await fetch("/api/crm/ai-resolution/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:a.trim(),options:{responseStyle:"professional"}})});if(!e.ok)throw Error("Error en la prueba");let s=await e.json();T(s.data),N.Am.success("Prueba completada")}catch(e){console.error("Error:",e),N.Am.error("Error al probar la resoluci\xf3n")}finally{w(!1)}},E=async()=>{try{let e=await fetch("/api/crm/ai-resolution/test");if(e.ok){let s=await e.json();R(s.data)}}catch(e){console.error("Error cargando estad\xedsticas:",e)}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Probador de IA Resolutiva"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Prueba c\xf3mo la IA responde a consultas de clientes usando la Base de Conocimiento"})]}),(0,r.jsxs)(t.z,{onClick:E,variant:"outline",size:"sm",children:[(0,r.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Ver Estad\xedsticas"]})]}),(0,r.jsxs)(o.Tabs,{defaultValue:"tester",className:"space-y-4",children:[(0,r.jsxs)(o.TabsList,{children:[(0,r.jsxs)(o.TabsTrigger,{value:"tester",className:"flex items-center gap-2",children:[(0,r.jsx)(u.Z,{className:"h-4 w-4"}),"Probador"]}),Z&&(0,r.jsxs)(o.TabsTrigger,{value:"stats",className:"flex items-center gap-2",children:[(0,r.jsx)(m.Z,{className:"h-4 w-4"}),"Estad\xedsticas"]})]}),(0,r.jsxs)(o.TabsContent,{value:"tester",className:"space-y-6",children:[(0,r.jsxs)(l.Zb,{children:[(0,r.jsxs)(l.Ol,{children:[(0,r.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(x.Z,{className:"h-5 w-5"}),"Consulta de Prueba"]}),(0,r.jsx)(l.SZ,{children:"Simula una pregunta de cliente para ver c\xf3mo responde la IA"})]}),(0,r.jsxs)(l.aY,{className:"space-y-4",children:[(0,r.jsx)(i.g,{placeholder:"Ejemplo: \xbfCu\xe1les son sus horarios de atenci\xf3n? o \xbfTienen cat\xe1logo de productos?",value:a,onChange:e=>b(e.target.value),rows:3,className:"w-full"}),(0,r.jsx)(t.z,{onClick:k,disabled:y||!a.trim(),className:"w-full",children:y?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.Z,{className:"h-4 w-4 mr-2 animate-pulse"}),"Procesando..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Probar Resoluci\xf3n"]})})]})]}),C&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)(l.Zb,{children:[(0,r.jsx)(l.Ol,{children:(0,r.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(m.Z,{className:"h-5 w-5"}),"Resumen de Resultados"]})}),(0,r.jsxs)(l.aY,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:`w-3 h-3 rounded-full ${(e=C.summary.confidence)>=.8?"bg-green-500":e>=.6?"bg-yellow-500":"bg-red-500"}`}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Confianza"})]}),(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[Math.round(100*C.summary.confidence),"%"]}),(0,r.jsx)(c.C,{variant:"outline",className:"text-xs",children:(s=C.summary.confidence)>=.8?"Alta":s>=.6?"Media":"Baja"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(h.Z,{className:"h-4 w-4 text-blue-500"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Fuentes"})]}),(0,r.jsx)("div",{className:"text-2xl font-bold",children:C.summary.knowledgeSourcesFound}),(0,r.jsx)(c.C,{variant:"outline",className:"text-xs",children:"Encontradas"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(p.Z,{className:"h-4 w-4 text-green-500"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Archivos"})]}),(0,r.jsx)("div",{className:"text-2xl font-bold",children:C.summary.filesWouldBeSent}),(0,r.jsx)(c.C,{variant:"outline",className:"text-xs",children:"Se enviar\xedan"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(j.Z,{className:"h-4 w-4 text-purple-500"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Tiempo"})]}),(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[C.summary.processingTimeMs,"ms"]}),(0,r.jsx)(c.C,{variant:"outline",className:"text-xs",children:"Procesamiento"})]})]}),(0,r.jsx)("div",{className:"mt-4 p-3 rounded-lg bg-gray-50",children:(0,r.jsx)("div",{className:"flex items-center gap-2",children:C.summary.wouldAutoRespond?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{className:"h-5 w-5 text-green-500"}),(0,r.jsx)("span",{className:"font-medium text-green-700",children:"La IA responder\xeda autom\xe1ticamente"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.Z,{className:"h-5 w-5 text-yellow-500"}),(0,r.jsx)("span",{className:"font-medium text-yellow-700",children:"La IA no responder\xeda autom\xe1ticamente (confianza insuficiente)"})]})})})]})]}),(0,r.jsxs)(l.Zb,{children:[(0,r.jsx)(l.Ol,{children:(0,r.jsx)(l.ll,{children:"Respuesta Generada"})}),(0,r.jsx)(l.aY,{children:(0,r.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 rounded-r-lg",children:(0,r.jsx)("p",{className:"text-gray-800 whitespace-pre-wrap",children:C.resolution.responseText})})})]}),C.resolution.filesToSend.length>0&&(0,r.jsxs)(l.Zb,{children:[(0,r.jsx)(l.Ol,{children:(0,r.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(p.Z,{className:"h-5 w-5"}),"Archivos que se Enviar\xedan Autom\xe1ticamente"]})}),(0,r.jsx)(l.aY,{children:(0,r.jsx)("div",{className:"space-y-3",children:C.resolution.filesToSend.map((e,s)=>(0,r.jsxs)("div",{className:"border rounded-lg p-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(h.Z,{className:"h-4 w-4 text-blue-500"}),(0,r.jsx)("span",{className:"font-medium",children:e.fileName})]}),(0,r.jsx)(c.C,{variant:"outline",children:e.sourceName})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.reason})]},s))})})]}),C.resolution.knowledgeUsed.length>0&&(0,r.jsxs)(l.Zb,{children:[(0,r.jsx)(l.Ol,{children:(0,r.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(h.Z,{className:"h-5 w-5"}),"Fuentes de Conocimiento Utilizadas"]})}),(0,r.jsx)(l.aY,{children:(0,r.jsx)("div",{className:"space-y-3",children:C.resolution.knowledgeUsed.map((e,s)=>(0,r.jsxs)("div",{className:"border rounded-lg p-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"font-medium",children:e.sourceName}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(d.E,{value:100*e.similarity,className:"w-20 h-2"}),(0,r.jsxs)(c.C,{variant:"outline",className:"text-xs",children:[Math.round(100*e.similarity),"%"]})]})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[e.content.substring(0,200),"..."]})]},s))})})]})]})]}),(0,r.jsx)(o.TabsContent,{value:"stats",children:Z&&(0,r.jsxs)(l.Zb,{children:[(0,r.jsx)(l.Ol,{children:(0,r.jsxs)(l.ll,{children:["Estad\xedsticas de Resoluci\xf3n (",Z.period,")"]})}),(0,r.jsxs)(l.aY,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:"Total Resoluciones"}),(0,r.jsx)("div",{className:"text-2xl font-bold",children:Z.statistics.totalResolutions})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:"Confianza Promedio"}),(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[Math.round(100*Z.statistics.avgConfidence),"%"]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:"Tiempo Promedio"}),(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[Math.round(Z.statistics.avgProcessingTime),"ms"]})]})]}),Z.recentQueries.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium mb-3",children:"Consultas Recientes"}),(0,r.jsx)("div",{className:"space-y-2",children:Z.recentQueries.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(0,r.jsx)("span",{className:"text-sm",children:e.query}),(0,r.jsxs)(c.C,{variant:"outline",children:[Math.round(100*e.confidence),"%"]})]},s))})]})]})]})})]})]})}},61335:function(e,s,a){"use strict";a.d(s,{C:function(){return l}});var r=a(15444);a(89300);var n=a(2371),t=a(65522);let i=(0,n.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:s,...a}){return(0,r.jsx)("div",{className:(0,t.cn)(i({variant:s}),e),...a})}},2422:function(e,s,a){"use strict";a.d(s,{d:function(){return c},z:function(){return d}});var r=a(15444),n=a(89300),t=a(21030),i=a(2371),l=a(65522);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef(({className:e,variant:s,size:a,asChild:n=!1,...i},d)=>{let o=n?t.g7:"button";return(0,r.jsx)(o,{className:(0,l.cn)(c({variant:s,size:a,className:e})),ref:d,...i})});d.displayName="Button"},99827:function(e,s,a){"use strict";a.d(s,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return o},eW:function(){return m},ll:function(){return c}});var r=a(15444),n=a(89300),t=a(65522);let i=n.forwardRef(({className:e,...s},a)=>(0,r.jsx)("div",{ref:a,className:(0,t.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));i.displayName="Card";let l=n.forwardRef(({className:e,...s},a)=>(0,r.jsx)("div",{ref:a,className:(0,t.cn)("flex flex-col space-y-1.5 p-6",e),...s}));l.displayName="CardHeader";let c=n.forwardRef(({className:e,...s},a)=>(0,r.jsx)("h3",{ref:a,className:(0,t.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));c.displayName="CardTitle";let d=n.forwardRef(({className:e,...s},a)=>(0,r.jsx)("p",{ref:a,className:(0,t.cn)("text-sm text-muted-foreground",e),...s}));d.displayName="CardDescription";let o=n.forwardRef(({className:e,...s},a)=>(0,r.jsx)("div",{ref:a,className:(0,t.cn)("p-6 pt-0",e),...s}));o.displayName="CardContent";let m=n.forwardRef(({className:e,...s},a)=>(0,r.jsx)("div",{ref:a,className:(0,t.cn)("flex items-center p-6 pt-0",e),...s}));m.displayName="CardFooter"},37108:function(e,s,a){"use strict";a.d(s,{E:function(){return l}});var r=a(15444),n=a(89300),t=a(25052),i=a(65522);let l=n.forwardRef(({className:e,value:s,...a},n)=>(0,r.jsx)(t.fC,{ref:n,className:(0,i.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...a,children:(0,r.jsx)(t.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));l.displayName=t.fC.displayName},86765:function(e,s,a){"use strict";a.d(s,{Tabs:function(){return l},TabsContent:function(){return o},TabsList:function(){return c},TabsTrigger:function(){return d}});var r=a(15444),n=a(89300),t=a(84018),i=a(65522);let l=t.fC,c=n.forwardRef(({className:e,...s},a)=>(0,r.jsx)(t.aV,{ref:a,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));c.displayName=t.aV.displayName;let d=n.forwardRef(({className:e,...s},a)=>(0,r.jsx)(t.xz,{ref:a,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));d.displayName=t.xz.displayName;let o=n.forwardRef(({className:e,...s},a)=>(0,r.jsx)(t.VY,{ref:a,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));o.displayName=t.VY.displayName},67012:function(e,s,a){"use strict";a.d(s,{g:function(){return i}});var r=a(15444),n=a(89300),t=a(65522);let i=n.forwardRef(({className:e,...s},a)=>(0,r.jsx)("textarea",{className:(0,t.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));i.displayName="Textarea"},65522:function(e,s,a){"use strict";a.d(s,{cn:function(){return t}});var r=a(32191),n=a(23607);function t(...e){return(0,n.m6)((0,r.W)(e))}}},function(e){e.O(0,[9993,8930,2386,7156,1744],function(){return e(e.s=49690)}),_N_E=e.O()}]);