(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{71296:function(e,s,a){Promise.resolve().then(a.bind(a,82538)),Promise.resolve().then(a.bind(a,88741)),Promise.resolve().then(a.bind(a,78938))},82538:function(e,s,a){"use strict";a.d(s,{ProtectedRoute:function(){return o}});var t=a(15444),r=a(51924),n=a(56948),i=a(81059),l=a(70362),c=a(2422),d=a(79047);function o({children:e,permissions:s=[],requireAll:a=!1,fallback:o,redirectTo:m}){let{isLoading:x,isAuthenticated:u,hasAnyPermission:h,hasAllPermissions:f,getDashboardRoute:j}=(0,r.TE)(),g=(0,d.useRouter)();return x?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):u?!(s.length>0)||(a?f(s):h(s))?(0,t.jsx)(t.Fragment,{children:e}):o?(0,t.jsx)(t.Fragment,{children:o}):(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,t.jsxs)(n.bZ,{className:"max-w-md",children:[(0,t.jsx)(l.Z,{className:"h-4 w-4"}),(0,t.jsx)(n.Cd,{children:"Sin Permisos"}),(0,t.jsx)(n.X,{children:"No tienes los permisos necesarios para acceder a esta funcionalidad."}),(0,t.jsx)(c.z,{onClick:()=>g.push(m||j()),className:"mt-3 w-full",children:"Volver al Dashboard"})]})}):(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,t.jsxs)(n.bZ,{className:"max-w-md",children:[(0,t.jsx)(i.Z,{className:"h-4 w-4"}),(0,t.jsx)(n.Cd,{children:"Acceso Denegado"}),(0,t.jsx)(n.X,{children:"Debes iniciar sesi\xf3n para acceder a esta p\xe1gina."}),(0,t.jsx)(c.z,{onClick:()=>g.push("/auth/login"),className:"mt-3 w-full",children:"Iniciar Sesi\xf3n"})]})})}},88741:function(e,s,a){"use strict";a.d(s,{AgentDashboard:function(){return f}});var t=a(15444),r=a(89300),n=a(99827),i=a(86765),l=a(2422),c=a(61335),d=a(30199),o=a(62492),m=a(66124),x=a(66772),u=a(79582),h=a(61572);function f({organization:e,user:s}){let[a,f]=(0,r.useState)("conversations");return(0,t.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["\xa1Hola ",s.fullName||s.name,"! \uD83D\uDC4B"]}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Agente de ",(0,t.jsx)("span",{className:"font-semibold",children:e.name})]})]}),(0,t.jsxs)(i.Tabs,{value:a,onValueChange:f,className:"space-y-8",children:[(0,t.jsxs)(i.TabsList,{className:"grid w-full grid-cols-3",children:[(0,t.jsx)(i.TabsTrigger,{value:"conversations",children:"Mis Conversaciones"}),(0,t.jsx)(i.TabsTrigger,{value:"performance",children:"Mi Rendimiento"}),(0,t.jsx)(i.TabsTrigger,{value:"tools",children:"Herramientas IA"})]}),(0,t.jsxs)(i.TabsContent,{value:"conversations",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ll,{className:"text-sm font-medium",children:"Asignadas"}),(0,t.jsx)(d.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(n.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:"12"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Conversaciones activas"})]})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ll,{className:"text-sm font-medium",children:"Pendientes"}),(0,t.jsx)(o.Z,{className:"h-4 w-4 text-yellow-500"})]}),(0,t.jsxs)(n.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:"5"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Requieren respuesta"})]})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ll,{className:"text-sm font-medium",children:"Resueltas Hoy"}),(0,t.jsx)(m.Z,{className:"h-4 w-4 text-green-500"})]}),(0,t.jsxs)(n.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:"8"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"+3 vs ayer"})]})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ll,{className:"text-sm font-medium",children:"Tiempo Respuesta"}),(0,t.jsx)(x.Z,{className:"h-4 w-4 text-blue-500"})]}),(0,t.jsxs)(n.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:"1.2m"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Promedio hoy"})]})]})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{children:[(0,t.jsx)(n.ll,{children:"Conversaciones Activas"}),(0,t.jsx)(n.SZ,{children:"Tus conversaciones asignadas que requieren atenci\xf3n"})]}),(0,t.jsx)(n.aY,{children:(0,t.jsx)("div",{className:"space-y-4",children:[{customer:"Mar\xeda Gonz\xe1lez",phone:"+52 555 123 4567",lastMessage:"Hola, tengo una pregunta sobre el producto",time:"Hace 2 min",priority:"high",unread:2},{customer:"Carlos L\xf3pez",phone:"+52 555 987 6543",lastMessage:"\xbfPueden ayudarme con mi pedido?",time:"Hace 15 min",priority:"medium",unread:1},{customer:"Ana Mart\xednez",phone:"+52 555 456 7890",lastMessage:"Muchas gracias por la informaci\xf3n",time:"Hace 1h",priority:"low",unread:0}].map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,t.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("p",{className:"font-semibold text-sm",children:e.customer}),(0,t.jsx)(c.C,{variant:"high"===e.priority?"destructive":"medium"===e.priority?"default":"outline",children:e.priority})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:e.phone}),(0,t.jsx)("p",{className:"text-sm text-gray-700",children:e.lastMessage}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:e.time})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[e.unread>0&&(0,t.jsx)(c.C,{variant:"default",className:"bg-red-500",children:e.unread}),(0,t.jsx)(l.z,{size:"sm",children:"Responder"})]})]},s))})})]})]}),(0,t.jsxs)(i.TabsContent,{value:"performance",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ll,{className:"text-sm font-medium",children:"Conversaciones Esta Semana"}),(0,t.jsx)(d.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(n.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:"43"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"+8% vs semana pasada"})]})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ll,{className:"text-sm font-medium",children:"Satisfacci\xf3n Cliente"}),(0,t.jsx)(u.Z,{className:"h-4 w-4 text-yellow-500"})]}),(0,t.jsxs)(n.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:"4.8"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"⭐⭐⭐⭐⭐ (24 rese\xf1as)"})]})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ll,{className:"text-sm font-medium",children:"Tiempo Promedio"}),(0,t.jsx)(o.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(n.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:"1.8m"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Por respuesta"})]})]})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{children:[(0,t.jsx)(n.ll,{children:"Resumen de Rendimiento"}),(0,t.jsx)(n.SZ,{children:"Tu desempe\xf1o en las \xfaltimas semanas"})]}),(0,t.jsx)(n.aY,{children:(0,t.jsx)("p",{className:"text-gray-600",children:"Gr\xe1ficos de rendimiento en desarrollo..."})})]})]}),(0,t.jsx)(i.TabsContent,{value:"tools",className:"space-y-6",children:(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{children:[(0,t.jsx)(n.ll,{children:"Herramientas de IA"}),(0,t.jsx)(n.SZ,{children:"Funciones inteligentes para mejorar tu productividad"})]}),(0,t.jsx)(n.aY,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,t.jsx)(h.Z,{className:"h-6 w-6 text-purple-600"}),(0,t.jsx)("h3",{className:"font-semibold",children:"Respuestas Sugeridas"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"La IA analiza el mensaje y sugiere respuestas apropiadas"}),(0,t.jsx)(c.C,{className:"bg-green-100 text-green-800",children:"Activo"})]}),(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,t.jsx)(u.Z,{className:"h-6 w-6 text-yellow-600"}),(0,t.jsx)("h3",{className:"font-semibold",children:"Auto-Etiquetado"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Clasifica autom\xe1ticamente las conversaciones por tipo"}),(0,t.jsx)(c.C,{className:"bg-green-100 text-green-800",children:"Activo"})]})]})})]})})]})]})}},78938:function(e,s,a){"use strict";a.d(s,{OwnerDashboard:function(){return et}});var t,r,n=a(15444),i=a(89300),l=a(99827),c=a(86765),d=a(2422),o=a(61335),m=a(51924);function x({children:e,permissions:s=[],roles:a=[],requireAll:t=!1,fallback:r=null}){let{role:i,hasAnyPermission:l,hasAllPermissions:c}=(0,m.TE)();return(!(a.length>0)||a.includes(i))&&(!(s.length>0)||(t?c(s):l(s)))?(0,n.jsx)(n.Fragment,{children:e}):(0,n.jsx)(n.Fragment,{children:r})}var u=a(75762),h=a(56948),f=a(70362),j=a(19484),g=a(92937);let p={SUPER_ADMIN:4,DISTRIBUIDOR:3,PROPIETARIO:2,AGENTE:1};function N({children:e,allowedRoles:s,requiredRole:a,targetOrganizationId:t,targetUserRole:r,fallback:i,showError:l=!0}){let{data:c}=(0,u.useSession)()||{},d=c?.user;return d?s&&!s.includes(d.role)?l?(0,n.jsxs)(h.bZ,{variant:"destructive",children:[(0,n.jsx)(j.Z,{className:"h-4 w-4"}),(0,n.jsxs)(h.X,{children:["No tienes permisos para ver este contenido. Rol requerido: ",s.join(", ")]})]}):i||null:a&&!(p[d.role]>=p[a])?l?(0,n.jsxs)(h.bZ,{variant:"destructive",children:[(0,n.jsx)(j.Z,{className:"h-4 w-4"}),(0,n.jsxs)(h.X,{children:["Permisos insuficientes. Se requiere rol: ",a]})]}):i||null:t&&!function(e,s){switch(e.role){case"SUPER_ADMIN":case"DISTRIBUIDOR":return!0;case"PROPIETARIO":case"AGENTE":return e.organizationId===s;default:return!1}}(d,t)?l?(0,n.jsxs)(h.bZ,{variant:"destructive",children:[(0,n.jsx)(j.Z,{className:"h-4 w-4"}),(0,n.jsx)(h.X,{children:"No tienes acceso a esta organizaci\xf3n"})]}):i||null:r&&!(p[d.role]>=p[r])?l?(0,n.jsxs)(h.bZ,{variant:"destructive",children:[(0,n.jsx)(j.Z,{className:"h-4 w-4"}),(0,n.jsxs)(h.X,{children:["No puedes gestionar usuarios con rol: ",r]})]}):i||null:(0,n.jsx)(n.Fragment,{children:e}):l?(0,n.jsxs)(h.bZ,{variant:"destructive",children:[(0,n.jsx)(f.Z,{className:"h-4 w-4"}),(0,n.jsx)(h.X,{children:"Usuario no autenticado"})]}):i||null}(t=r||(r={})).PLATFORM="PLATFORM",t.MULTI_TENANT="MULTI_TENANT",t.ORGANIZATION="ORGANIZATION",t.LIMITED="LIMITED";var v=a(2019),b=a(64624),y=a(30199),w=a(65522);let I={SUPER_ADMIN:{label:"Super Admin",icon:j.Z,color:"bg-red-100 text-red-800 border-red-200",description:"Acceso total a la plataforma"},DISTRIBUIDOR:{label:"Distribuidor",icon:v.Z,color:"bg-purple-100 text-purple-800 border-purple-200",description:"Gestiona m\xfaltiples organizaciones"},PROPIETARIO:{label:"Propietario",icon:b.Z,color:"bg-blue-100 text-blue-800 border-blue-200",description:"Administra su organizaci\xf3n"},AGENTE:{label:"Agente",icon:y.Z,color:"bg-green-100 text-green-800 border-green-200",description:"Atiende conversaciones asignadas"}};function A({role:e,size:s="md",showIcon:a=!0,className:t}){let r=I[e],i=r.icon;return(0,n.jsx)(o.C,{variant:"outline",className:(0,w.cn)(r.color,{"text-xs px-2 py-1":"sm"===s,"text-sm px-2.5 py-1":"md"===s,"text-base px-3 py-1.5":"lg"===s},t),children:(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[a&&(0,n.jsx)(i,{className:(0,w.cn)({"h-3 w-3":"sm"===s,"h-4 w-4":"md"===s,"h-5 w-5":"lg"===s})}),(0,n.jsx)("span",{children:r.label})]})})}var E=a(81577),R=a(39429),C=a(63751),T=a(23572),Z=a(6488),P=a(25422),z=a(80586),O=a(45053);function S({organization:e,members:s,currentUserRole:a}){let[t,r]=(0,i.useState)(new Set(["PROPIETARIO"])),c=s.reduce((e,s)=>(e[s.role]||(e[s.role]=[]),e[s.role].push(s),e),{}),m=e=>{let s=new Set(t);s.has(e)?s.delete(e):s.add(e),r(s)},x=e=>{switch(e){case"SUPER_ADMIN":return j.Z;case"DISTRIBUIDOR":return v.Z;case"PROPIETARIO":default:return b.Z;case"AGENTE":return y.Z}},u=(e,s)=>{let a={SUPER_ADMIN:4,DISTRIBUIDOR:3,PROPIETARIO:2,AGENTE:1};return a[e]>=a[s]};return(0,n.jsxs)(l.Zb,{children:[(0,n.jsx)(l.Ol,{children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,n.jsx)(v.Z,{className:"h-5 w-5"}),"Jerarqu\xeda de Equipo"]}),(0,n.jsxs)(l.SZ,{children:["Estructura organizacional de ",e.name]})]}),(0,n.jsx)(N,{allowedRoles:["SUPER_ADMIN","DISTRIBUIDOR","PROPIETARIO"],children:(0,n.jsxs)(d.z,{size:"sm",children:[(0,n.jsx)(R.Z,{className:"h-4 w-4 mr-2"}),"Invitar Usuario"]})})]})}),(0,n.jsxs)(l.aY,{className:"space-y-4",children:[["SUPER_ADMIN","DISTRIBUIDOR","PROPIETARIO","AGENTE"].map(e=>{let s=c[e]||[];if(0===s.length)return null;let r=x(e),i=t.has(e);return(0,n.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 cursor-pointer hover:bg-gray-100",onClick:()=>m(e),children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[i?(0,n.jsx)(C.Z,{className:"h-4 w-4 text-gray-500"}):(0,n.jsx)(T.Z,{className:"h-4 w-4 text-gray-500"}),(0,n.jsx)(r,{className:"h-5 w-5"}),(0,n.jsx)(A,{role:e,size:"md"}),(0,n.jsxs)(o.C,{variant:"outline",className:"text-xs",children:[s.length," ",1===s.length?"miembro":"miembros"]})]}),(0,n.jsx)(N,{targetUserRole:e,showError:!1,fallback:null,children:(0,n.jsx)("div",{className:"flex items-center gap-2",children:u(a,e)&&(0,n.jsx)(d.z,{variant:"outline",size:"sm",onClick:e=>e.stopPropagation(),children:(0,n.jsx)(Z.Z,{className:"h-3 w-3"})})})})]}),i&&(0,n.jsx)("div",{className:"divide-y",children:s.map(e=>(0,n.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsxs)(E.qE,{className:"h-10 w-10",children:[(0,n.jsx)(E.F$,{src:e.avatar}),(0,n.jsx)(E.Q5,{className:"bg-blue-100 text-blue-600",children:(e.name||e.email).charAt(0).toUpperCase()})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-semibold text-sm",children:e.name||"Sin nombre"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:e.email}),(0,n.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,n.jsx)(o.C,{variant:e.isActive?"default":"secondary",className:"text-xs",children:e.isActive?"Activo":"Inactivo"}),e.lastLogin&&(0,n.jsxs)("span",{className:"text-xs text-gray-500",children:["\xdaltimo acceso: ",(0,z.WU)(e.lastLogin,"dd MMM",{locale:O.es})]})]})]})]}),(0,n.jsx)(N,{targetUserRole:e.role,showError:!1,fallback:null,children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(d.z,{variant:"ghost",size:"sm",children:(0,n.jsx)(P.Z,{className:"h-4 w-4"})}),u(a,e.role)&&(0,n.jsx)(d.z,{variant:"ghost",size:"sm",children:(0,n.jsx)(Z.Z,{className:"h-4 w-4"})})]})})]},e.id))})]},e)}),(0,n.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,n.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"Resumen de Jerarqu\xeda"}),(0,n.jsxs)("div",{className:"text-sm text-blue-700 space-y-1",children:[(0,n.jsxs)("p",{children:["• ",(0,n.jsx)("strong",{children:"Total de miembros:"})," ",s.length]}),(0,n.jsxs)("p",{children:["• ",(0,n.jsx)("strong",{children:"Usuarios activos:"})," ",s.filter(e=>e.isActive).length]}),(0,n.jsxs)("p",{children:["• ",(0,n.jsx)("strong",{children:"Nivel de organizaci\xf3n:"})," ",e.status]})]})]})]})]})}var D=a(79047),M=a(64611),U=a(74678),k=a(34635),L=a(67012),_=a(29530),G=a(51181);function Y({isOpen:e,onClose:s,onSuccess:a}){let[t,r]=(0,i.useState)(!1),[l,c]=(0,i.useState)({email:"",firstName:"",lastName:"",message:""}),o=(0,D.useRouter)(),m=async e=>{e.preventDefault(),r(!0);try{let e=await fetch("/api/invitations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l.email,role:G.UserRole.AGENTE,firstName:l.firstName,lastName:l.lastName,message:l.message})}),t=await e.json();if(!e.ok)throw Error(t.error||"Error al enviar invitaci\xf3n");M.Am.success("\xa1Invitaci\xf3n enviada exitosamente!"),t.emailPreviewUrl&&(console.log("\uD83D\uDCE7 Email preview:",t.emailPreviewUrl),M.Am.success("Invitaci\xf3n enviada. Revisa la consola para el preview del email.",{duration:5e3})),c({email:"",firstName:"",lastName:"",message:""}),s(),a?.(),o.refresh()}catch(s){let e=s instanceof Error?s.message:"Error desconocido";M.Am.error(e)}finally{r(!1)}},x=(e,s)=>{c(a=>({...a,[e]:s}))};return(0,n.jsx)(_.Vq,{open:e,onOpenChange:s,children:(0,n.jsxs)(_.cZ,{className:"sm:max-w-[425px]",children:[(0,n.jsxs)(_.fK,{children:[(0,n.jsx)(_.$N,{className:"text-xl font-bold text-gray-900",children:"Invitar nuevo agente"}),(0,n.jsx)(_.Be,{className:"text-gray-600",children:"Env\xeda una invitaci\xf3n por email para que se una a tu equipo como Agente de Ventas."})]}),(0,n.jsxs)("form",{onSubmit:m,className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(k.Label,{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"Email *"}),(0,n.jsx)(U.I,{id:"email",type:"email",value:l.email,onChange:e=>x("email",e.target.value),placeholder:"agente@empresa.com",required:!0,className:"w-full"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(k.Label,{htmlFor:"firstName",className:"text-sm font-medium text-gray-700",children:"Nombre"}),(0,n.jsx)(U.I,{id:"firstName",value:l.firstName,onChange:e=>x("firstName",e.target.value),placeholder:"Juan",className:"w-full"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(k.Label,{htmlFor:"lastName",className:"text-sm font-medium text-gray-700",children:"Apellido"}),(0,n.jsx)(U.I,{id:"lastName",value:l.lastName,onChange:e=>x("lastName",e.target.value),placeholder:"P\xe9rez",className:"w-full"})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(k.Label,{htmlFor:"message",className:"text-sm font-medium text-gray-700",children:"Mensaje personalizado (opcional)"}),(0,n.jsx)(L.g,{id:"message",value:l.message,onChange:e=>x("message",e.target.value),placeholder:"\xa1Bienvenido al equipo! Estamos emocionados de que te unas...",rows:3,className:"w-full resize-none"}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"Este mensaje aparecer\xe1 en el email de invitaci\xf3n"})]}),(0,n.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,n.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,n.jsx)("div",{className:"text-blue-600 text-sm",children:"ℹ️"}),(0,n.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,n.jsx)("p",{className:"font-medium",children:"\xbfQu\xe9 sucede despu\xe9s?"}),(0,n.jsx)("p",{className:"text-blue-700",children:"El agente recibir\xe1 un email con un enlace para registrarse y unirse autom\xe1ticamente a tu organizaci\xf3n."})]})]})}),(0,n.jsxs)(_.cN,{className:"space-x-2 pt-4",children:[(0,n.jsx)(d.z,{type:"button",variant:"outline",onClick:s,disabled:t,children:"Cancelar"}),(0,n.jsx)(d.z,{type:"submit",disabled:t||!l.email,className:"bg-blue-600 hover:bg-blue-700",children:t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Enviando..."]}):"Enviar invitaci\xf3n"})]})]})]})})}var V=a(99321),F=a(16858);function q({onInvite:e}){let[s,a]=(0,i.useState)([]),[t,r]=(0,i.useState)(!0),[l,c]=(0,i.useState)(!1),[m,x]=(0,i.useState)(null),u=async()=>{try{let e=await fetch("/api/invitations"),s=await e.json();if(e.ok)a(s.invitations||[]);else throw Error(s.error||"Error cargando invitaciones")}catch(e){console.error("❌ Error cargando invitaciones:",e),M.Am.error("Error cargando las invitaciones")}finally{r(!1)}};(0,i.useEffect)(()=>{u()},[]);let h=async e=>{try{let s=await fetch(`/api/invitations/${e}/cancel`,{method:"POST"}),a=await s.json();if(!s.ok)throw Error(a.error||"Error cancelando invitaci\xf3n");M.Am.success("Invitaci\xf3n cancelada"),u()}catch(s){let e=s instanceof Error?s.message:"Error desconocido";M.Am.error(e)}},f=(e,s)=>{if(new Date(s)<new Date&&e===G.InvitationStatus.PENDING)return(0,n.jsx)(o.C,{variant:"secondary",className:"bg-gray-100 text-gray-600",children:"Expirada"});switch(e){case G.InvitationStatus.PENDING:return(0,n.jsx)(o.C,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"Pendiente"});case G.InvitationStatus.ACCEPTED:return(0,n.jsx)(o.C,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Aceptada"});case G.InvitationStatus.CANCELLED:return(0,n.jsx)(o.C,{variant:"secondary",className:"bg-red-100 text-red-800",children:"Cancelada"});case G.InvitationStatus.EXPIRED:return(0,n.jsx)(o.C,{variant:"secondary",className:"bg-gray-100 text-gray-600",children:"Expirada"});default:return(0,n.jsx)(o.C,{variant:"secondary",children:e})}};return t?(0,n.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:(0,n.jsxs)("div",{className:"animate-pulse",children:[(0,n.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-4"}),(0,n.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,n.jsx)("div",{className:"h-16 bg-gray-100 rounded"},e))})]})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,n.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Invitaciones del equipo"}),(0,n.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Gestiona las invitaciones enviadas a nuevos agentes"})]}),(0,n.jsx)(d.z,{onClick:e,className:"bg-blue-600 hover:bg-blue-700",children:"Nueva invitaci\xf3n"})]})}),(0,n.jsx)("div",{className:"p-6",children:0===s.length?(0,n.jsxs)("div",{className:"text-center py-8",children:[(0,n.jsx)("div",{className:"text-gray-400 text-5xl mb-4",children:"\uD83D\uDCE7"}),(0,n.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay invitaciones"}),(0,n.jsx)("p",{className:"text-gray-600 mb-4",children:"Comienza invitando a tu primer agente de ventas"}),(0,n.jsx)(d.z,{onClick:e,className:"bg-blue-600 hover:bg-blue-700",children:"Enviar primera invitaci\xf3n"})]}):(0,n.jsx)("div",{className:"space-y-4",children:s.map(e=>{let s=new Date(e.expiresAt)<new Date,a=e.status===G.InvitationStatus.PENDING&&!s;return(0,n.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("div",{className:"flex items-center space-x-3",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium text-gray-900",children:e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:e.email}),(0,n.jsxs)("p",{className:"text-sm text-gray-600",children:[e.firstName&&e.lastName&&(0,n.jsxs)(n.Fragment,{children:[e.email," •"]}),"Rol: Agente"]})]})}),(0,n.jsxs)("div",{className:"mt-2 flex items-center space-x-4 text-sm text-gray-500",children:[(0,n.jsxs)("span",{children:["Enviada ",(0,F.Q)(new Date(e.createdAt),{addSuffix:!0,locale:O.es})]}),e.status===G.InvitationStatus.PENDING&&(0,n.jsxs)("span",{children:["Expira ",(0,F.Q)(new Date(e.expiresAt),{addSuffix:!0,locale:O.es})]}),e.acceptedAt&&(0,n.jsxs)("span",{className:"text-green-600",children:["Aceptada ",(0,F.Q)(new Date(e.acceptedAt),{addSuffix:!0,locale:O.es})]})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[f(e.status,e.expiresAt),a&&(0,n.jsx)(d.z,{variant:"outline",size:"sm",onClick:()=>{x(e.id),c(!0)},className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-200",children:"Cancelar"})]})]})},e.id)})})})]}),(0,n.jsx)(V.aR,{open:l,onOpenChange:c,children:(0,n.jsxs)(V._T,{children:[(0,n.jsxs)(V.fY,{children:[(0,n.jsx)(V.f$,{children:"\xbfCancelar invitaci\xf3n?"}),(0,n.jsx)(V.yT,{children:"Esta acci\xf3n no se puede deshacer. La invitaci\xf3n ser\xe1 cancelada y el enlace dejar\xe1 de funcionar."})]}),(0,n.jsxs)(V.xo,{children:[(0,n.jsx)(V.le,{children:"Mantener"}),(0,n.jsx)(V.OL,{onClick:()=>{m&&h(m),c(!1),x(null)},className:"bg-red-600 hover:bg-red-700",children:"Cancelar invitaci\xf3n"})]})]})})]})}var B=a(85397),H=a(64670),$=a(99983),W=a(90185),X=a(32235),Q=a(23752),J=a(61572),K=a(18218),ee=a(37108),es=a(41084);function ea({organizationId:e,userRole:s}){let[a,t]=(0,i.useState)(null),[r,c]=(0,i.useState)(!0);(0,i.useEffect)(()=>{m()},[e]);let m=async()=>{try{let[e,s]=await Promise.all([fetch("/api/subscriptions"),fetch("/api/subscriptions/usage")]);if(e.ok&&s.ok){let a=await e.json(),r=await s.json(),n=a.planConfig;t({currentPlan:a.organization.currentPlan,planName:n.name,usage:{currentUsers:r.currentUsers,maxUsers:n.features.maxUsers,currentMessages:r.currentMessages,maxMessages:n.features.maxMessages,limitsExceeded:r.limitsExceeded},needsAttention:r.limitsExceeded||"FREE"===a.organization.currentPlan})}}catch(e){console.error("Error fetching subscription data:",e)}finally{c(!1)}};return r?(0,n.jsxs)(l.Zb,{children:[(0,n.jsx)(l.Ol,{className:"pb-4",children:(0,n.jsx)(l.ll,{className:"text-base font-medium",children:"Suscripci\xf3n"})}),(0,n.jsx)(l.aY,{children:(0,n.jsxs)("div",{className:"animate-pulse space-y-3",children:[(0,n.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),(0,n.jsx)("div",{className:"h-2 bg-gray-200 rounded"}),(0,n.jsx)("div",{className:"h-2 bg-gray-200 rounded"})]})})]}):a?(0,n.jsxs)(l.Zb,{className:a.needsAttention?"border-amber-200 bg-amber-50":"",children:[(0,n.jsx)(l.Ol,{className:"pb-4",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(l.ll,{className:"text-base font-medium",children:"Plan Actual"}),(0,n.jsx)(o.C,{variant:(e=>{switch(e){case"FREE":default:return"secondary";case"STARTER":case"PREMIUM":case"ENTERPRISE":return"default"}})(a.currentPlan),children:a.planName})]})}),(0,n.jsxs)(l.aY,{className:"space-y-4",children:[a.needsAttention&&(0,n.jsxs)("div",{className:"flex items-center space-x-2 text-amber-700 text-sm",children:[(0,n.jsx)(f.Z,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:a.usage.limitsExceeded?"L\xedmites excedidos":"Considera actualizar tu plan"})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,n.jsxs)("div",{className:"flex items-center text-xs text-gray-600",children:[(0,n.jsx)(b.Z,{className:"w-3 h-3 mr-1"}),"Usuarios"]}),(0,n.jsxs)("span",{className:"text-xs text-gray-500",children:[a.usage.currentUsers,"/",a.usage.maxUsers]})]}),(0,n.jsx)(ee.E,{value:a.usage.currentUsers/a.usage.maxUsers*100,className:`h-1 ${a.usage.currentUsers>a.usage.maxUsers?"bg-red-100":""}`})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,n.jsxs)("div",{className:"flex items-center text-xs text-gray-600",children:[(0,n.jsx)(W.Z,{className:"w-3 h-3 mr-1"}),"Mensajes"]}),(0,n.jsxs)("span",{className:"text-xs text-gray-500",children:[a.usage.currentMessages.toLocaleString(),"/",a.usage.maxMessages.toLocaleString()]})]}),(0,n.jsx)(ee.E,{value:a.usage.currentMessages/a.usage.maxMessages*100,className:`h-1 ${a.usage.currentMessages>a.usage.maxMessages?"bg-red-100":""}`})]})]}),"PROPIETARIO"===s&&(0,n.jsx)("div",{className:"pt-2",children:(0,n.jsx)(es.default,{href:"/suscripcion",children:(0,n.jsxs)(d.z,{size:"sm",variant:"outline",className:"w-full",children:[(0,n.jsx)(H.Z,{className:"w-3 h-3 mr-1"}),"Gestionar Plan"]})})})]})]}):(0,n.jsxs)(l.Zb,{children:[(0,n.jsx)(l.Ol,{className:"pb-4",children:(0,n.jsx)(l.ll,{className:"text-base font-medium",children:"Suscripci\xf3n"})}),(0,n.jsx)(l.aY,{children:(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Error al cargar datos de suscripci\xf3n"})})]})}function et({organization:e,user:s}){let[a,t]=(0,i.useState)("overview"),[r,m]=(0,i.useState)(!1),u=[{id:s.id,name:s.name||"Propietario",email:s.email,role:s.role,isActive:!0,lastLogin:new Date,organizationId:s.organizationId,organizationName:e.name},{id:"agent1",name:"Ana Mart\xednez",email:"ana@empresa.com",role:"AGENTE",isActive:!0,lastLogin:new Date(Date.now()-72e5),organizationId:s.organizationId,organizationName:e.name},{id:"agent2",name:"Luis Garc\xeda",email:"luis@empresa.com",role:"AGENTE",isActive:!0,lastLogin:new Date(Date.now()-864e5),organizationId:s.organizationId,organizationName:e.name}];return(0,n.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,n.jsx)("div",{className:"mb-8",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,n.jsx)(v.Z,{className:"h-8 w-8 text-blue-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["\xa1Hola ",s.fullName||s.name,"! \uD83D\uDC4B"]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,n.jsx)(A,{role:s.role,size:"sm"}),(0,n.jsx)("span",{className:"text-gray-600",children:"de"}),(0,n.jsx)("span",{className:"font-semibold",children:e.name}),(0,n.jsx)(o.C,{variant:"outline",className:"text-xs",children:e.status})]})]})]}),(0,n.jsx)(N,{allowedRoles:["PROPIETARIO"],children:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsxs)(d.z,{variant:"outline",size:"sm",children:[(0,n.jsx)(Z.Z,{className:"h-4 w-4 mr-2"}),"Configurar"]}),(0,n.jsxs)(d.z,{size:"sm",onClick:()=>m(!0),children:[(0,n.jsx)(B.Z,{className:"h-4 w-4 mr-2"}),"Invitar Agente"]})]})})]})}),(0,n.jsxs)(c.Tabs,{value:a,onValueChange:t,className:"space-y-8",children:[(0,n.jsxs)(c.TabsList,{className:"grid w-full grid-cols-5",children:[(0,n.jsx)(c.TabsTrigger,{value:"overview",children:"Resumen"}),(0,n.jsx)(c.TabsTrigger,{value:"conversations",children:"Conversaciones"}),(0,n.jsx)(c.TabsTrigger,{value:"team",children:"Equipo"}),(0,n.jsx)(c.TabsTrigger,{value:"automation",children:"Automatizaci\xf3n"}),(0,n.jsx)(c.TabsTrigger,{value:"settings",children:"Configuraci\xf3n"})]}),(0,n.jsxs)(c.TabsContent,{value:"overview",className:"space-y-6",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,n.jsxs)(l.Zb,{className:"border-l-4 border-l-green-500",children:[(0,n.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(l.ll,{className:"text-sm font-medium",children:"Conversaciones Activas"}),(0,n.jsx)(y.Z,{className:"h-5 w-5 text-green-500"})]}),(0,n.jsxs)(l.aY,{children:[(0,n.jsx)("div",{className:"text-3xl font-bold",children:"47"}),(0,n.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground mt-2",children:[(0,n.jsx)(H.Z,{className:"h-3 w-3 mr-1 text-green-500"}),"+12% desde ayer"]})]})]}),(0,n.jsxs)(l.Zb,{className:"border-l-4 border-l-blue-500",children:[(0,n.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(l.ll,{className:"text-sm font-medium",children:"Miembros del Equipo"}),(0,n.jsx)(b.Z,{className:"h-5 w-5 text-blue-500"})]}),(0,n.jsxs)(l.aY,{children:[(0,n.jsx)("div",{className:"text-3xl font-bold",children:u.length}),(0,n.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground mt-2",children:[(0,n.jsx)($.Z,{className:"h-3 w-3 mr-1 text-blue-500"}),u.filter(e=>e.isActive).length," agentes activos"]})]})]}),(0,n.jsx)(x,{permissions:[g.y3.VIEW_BILLING],children:(0,n.jsx)(ea,{organizationId:s.organizationId,userRole:s.role})}),(0,n.jsxs)(l.Zb,{className:"border-l-4 border-l-purple-500",children:[(0,n.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(l.ll,{className:"text-sm font-medium",children:"Respuesta Promedio"}),(0,n.jsx)(H.Z,{className:"h-5 w-5 text-purple-500"})]}),(0,n.jsxs)(l.aY,{children:[(0,n.jsx)("div",{className:"text-3xl font-bold",children:"2.3m"}),(0,n.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground mt-2",children:[(0,n.jsx)($.Z,{className:"h-3 w-3 mr-1 text-purple-500"}),"-30s desde la semana pasada"]})]})]})]}),(0,n.jsxs)(l.Zb,{children:[(0,n.jsxs)(l.Ol,{children:[(0,n.jsx)(l.ll,{children:"Acciones R\xe1pidas"}),(0,n.jsx)(l.SZ,{children:"Accede r\xe1pidamente a las funciones m\xe1s importantes de tu organizaci\xf3n"})]}),(0,n.jsx)(l.aY,{children:(0,n.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,n.jsx)(x,{permissions:[g.y3.MANAGE_WHATSAPP_CONFIG],children:(0,n.jsxs)(d.z,{variant:"outline",className:"h-20 flex flex-col items-center justify-center space-y-2 hover:bg-green-50 hover:border-green-200",children:[(0,n.jsx)(W.Z,{className:"h-6 w-6 text-green-600"}),(0,n.jsx)("span",{className:"text-sm",children:"Configurar WhatsApp"})]})}),(0,n.jsx)(x,{permissions:[g.y3.INVITE_USERS],children:(0,n.jsxs)(d.z,{variant:"outline",className:"h-20 flex flex-col items-center justify-center space-y-2 hover:bg-blue-50 hover:border-blue-200",onClick:()=>m(!0),children:[(0,n.jsx)(B.Z,{className:"h-6 w-6 text-blue-600"}),(0,n.jsx)("span",{className:"text-sm",children:"Invitar Agente"})]})}),(0,n.jsx)(x,{permissions:[g.y3.VIEW_BILLING],children:(0,n.jsxs)(d.z,{variant:"outline",className:"h-20 flex flex-col items-center justify-center space-y-2 hover:bg-indigo-50 hover:border-indigo-200",onClick:()=>window.location.href="/suscripcion",children:[(0,n.jsx)(X.Z,{className:"h-6 w-6 text-indigo-600"}),(0,n.jsx)("span",{className:"text-sm",children:"Gestionar Plan"})]})}),(0,n.jsx)(x,{permissions:[g.y3.VIEW_BILLING],children:(0,n.jsxs)(d.z,{variant:"outline",className:"h-20 flex flex-col items-center justify-center space-y-2 hover:bg-emerald-50 hover:border-emerald-200",onClick:()=>window.location.href="/facturacion",children:[(0,n.jsx)(Q.Z,{className:"h-6 w-6 text-emerald-600"}),(0,n.jsx)("span",{className:"text-sm",children:"Billetera IA"})]})}),(0,n.jsx)(x,{permissions:[g.y3.CONFIGURE_AI],children:(0,n.jsxs)(d.z,{variant:"outline",className:"h-20 flex flex-col items-center justify-center space-y-2 hover:bg-purple-50 hover:border-purple-200",children:[(0,n.jsx)(J.Z,{className:"h-6 w-6 text-purple-600"}),(0,n.jsx)("span",{className:"text-sm",children:"Configurar IA"})]})}),(0,n.jsx)(x,{permissions:[g.y3.MANAGE_ORGANIZATION],children:(0,n.jsxs)(d.z,{variant:"outline",className:"h-20 flex flex-col items-center justify-center space-y-2 hover:bg-gray-50 hover:border-gray-200",children:[(0,n.jsx)(Z.Z,{className:"h-6 w-6 text-gray-600"}),(0,n.jsx)("span",{className:"text-sm",children:"Configuraci\xf3n"})]})})]})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,n.jsxs)(l.Zb,{children:[(0,n.jsxs)(l.Ol,{children:[(0,n.jsx)(l.ll,{children:"Conversaciones Recientes"}),(0,n.jsx)(l.SZ,{children:"\xdaltimas interacciones con clientes"})]}),(0,n.jsx)(l.aY,{children:(0,n.jsx)("div",{className:"space-y-4",children:[{customer:"Mar\xeda Gonz\xe1lez",message:"Consulta sobre productos",agent:"Ana",time:"Hace 5 min",status:"active"},{customer:"Carlos L\xf3pez",message:"Solicitud de cotizaci\xf3n",agent:"Luis",time:"Hace 12 min",status:"pending"},{customer:"Sof\xeda Mart\xednez",message:"Seguimiento de pedido",agent:"Ana",time:"Hace 25 min",status:"resolved"}].map((e,s)=>(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("p",{className:"font-semibold text-sm",children:e.customer}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:e.message}),(0,n.jsxs)("p",{className:"text-xs text-gray-500",children:["Agente: ",e.agent," • ",e.time]})]}),(0,n.jsx)(o.C,{variant:"active"===e.status?"default":"pending"===e.status?"secondary":"outline",children:e.status})]},s))})})]}),(0,n.jsxs)(l.Zb,{children:[(0,n.jsxs)(l.Ol,{children:[(0,n.jsx)(l.ll,{children:"Estado del Sistema"}),(0,n.jsx)(l.SZ,{children:"Conexiones y configuraciones"})]}),(0,n.jsx)(l.aY,{children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(W.Z,{className:"h-5 w-5 text-green-600"}),(0,n.jsx)("span",{className:"text-sm font-medium",children:"WhatsApp Business"})]}),(0,n.jsx)(o.C,{className:"bg-green-100 text-green-800",children:"Conectado"})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(J.Z,{className:"h-5 w-5 text-purple-600"}),(0,n.jsx)("span",{className:"text-sm font-medium",children:"Asistente IA"})]}),(0,n.jsx)(o.C,{className:"bg-green-100 text-green-800",children:"Activo"})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(K.Z,{className:"h-5 w-5 text-yellow-600"}),(0,n.jsx)("span",{className:"text-sm font-medium",children:"Automatizaci\xf3n"})]}),(0,n.jsx)(o.C,{variant:"secondary",children:"3 reglas activas"})]})]})})]})]})]}),(0,n.jsxs)(c.TabsContent,{value:"team",className:"space-y-6",children:[(0,n.jsx)(S,{organization:e,members:u,currentUserRole:s.role}),(0,n.jsx)(x,{permissions:[g.y3.INVITE_USERS],children:(0,n.jsx)(q,{onInvite:()=>m(!0)})})]}),(0,n.jsx)(c.TabsContent,{value:"conversations",children:(0,n.jsxs)(l.Zb,{children:[(0,n.jsxs)(l.Ol,{children:[(0,n.jsx)(l.ll,{children:"Centro de Conversaciones"}),(0,n.jsx)(l.SZ,{children:"Gestiona todas las conversaciones de WhatsApp de tu organizaci\xf3n"})]}),(0,n.jsx)(l.aY,{children:(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)(y.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-600",children:"M\xf3dulo de conversaciones en desarrollo..."}),(0,n.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Pr\xf3ximamente podr\xe1s gestionar todas las conversaciones desde aqu\xed"})]})})]})}),(0,n.jsx)(c.TabsContent,{value:"automation",children:(0,n.jsxs)(l.Zb,{children:[(0,n.jsxs)(l.Ol,{children:[(0,n.jsx)(l.ll,{children:"Automatizaci\xf3n e IA"}),(0,n.jsx)(l.SZ,{children:"Configura respuestas autom\xe1ticas y asistente de IA"})]}),(0,n.jsx)(l.aY,{children:(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)(J.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Configuraci\xf3n de automatizaci\xf3n en desarrollo..."}),(0,n.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Pr\xf3ximamente podr\xe1s configurar respuestas autom\xe1ticas y entrenar la IA"})]})})]})}),(0,n.jsx)(c.TabsContent,{value:"settings",children:(0,n.jsxs)(l.Zb,{children:[(0,n.jsxs)(l.Ol,{children:[(0,n.jsx)(l.ll,{children:"Configuraci\xf3n de la Organizaci\xf3n"}),(0,n.jsxs)(l.SZ,{children:["Administra los ajustes de ",e.name]})]}),(0,n.jsx)(l.aY,{children:(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)(Z.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Panel de configuraci\xf3n en desarrollo..."}),(0,n.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Pr\xf3ximamente podr\xe1s configurar todos los aspectos de tu organizaci\xf3n"})]})})]})})]}),(0,n.jsx)(Y,{isOpen:r,onClose:()=>m(!1)})]})}},99321:function(e,s,a){"use strict";a.d(s,{OL:function(){return g},_T:function(){return x},aR:function(){return c},f$:function(){return f},fY:function(){return u},le:function(){return p},vW:function(){return d},xo:function(){return h},yT:function(){return j}});var t=a(15444),r=a(89300),n=a(95954),i=a(65522),l=a(2422);let c=n.fC,d=n.xz,o=n.h_,m=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(n.aV,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s,ref:a}));m.displayName=n.aV.displayName;let x=r.forwardRef(({className:e,...s},a)=>(0,t.jsxs)(o,{children:[(0,t.jsx)(m,{}),(0,t.jsx)(n.VY,{ref:a,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s})]}));x.displayName=n.VY.displayName;let u=({className:e,...s})=>(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...s});u.displayName="AlertDialogHeader";let h=({className:e,...s})=>(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});h.displayName="AlertDialogFooter";let f=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(n.Dx,{ref:a,className:(0,i.cn)("text-lg font-semibold",e),...s}));f.displayName=n.Dx.displayName;let j=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(n.dk,{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",e),...s}));j.displayName=n.dk.displayName;let g=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(n.aU,{ref:a,className:(0,i.cn)((0,l.d)(),e),...s}));g.displayName=n.aU.displayName;let p=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(n.$j,{ref:a,className:(0,i.cn)((0,l.d)({variant:"outline"}),"mt-2 sm:mt-0",e),...s}));p.displayName=n.$j.displayName},56948:function(e,s,a){"use strict";a.d(s,{Cd:function(){return d},X:function(){return o},bZ:function(){return c}});var t=a(15444),r=a(89300),n=a(2371),i=a(65522);let l=(0,n.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=r.forwardRef(({className:e,variant:s,...a},r)=>(0,t.jsx)("div",{ref:r,role:"alert",className:(0,i.cn)(l({variant:s}),e),...a}));c.displayName="Alert";let d=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("h5",{ref:a,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",e),...s}));d.displayName="AlertTitle";let o=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",e),...s}));o.displayName="AlertDescription"},81577:function(e,s,a){"use strict";a.d(s,{F$:function(){return c},Q5:function(){return d},qE:function(){return l}});var t=a(15444),r=a(89300),n=a(40445),i=a(65522);let l=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(n.fC,{ref:a,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...s}));l.displayName=n.fC.displayName;let c=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(n.Ee,{ref:a,className:(0,i.cn)("aspect-square h-full w-full",e),...s}));c.displayName=n.Ee.displayName;let d=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(n.NY,{ref:a,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...s}));d.displayName=n.NY.displayName},61335:function(e,s,a){"use strict";a.d(s,{C:function(){return l}});var t=a(15444);a(89300);var r=a(2371),n=a(65522);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:s,...a}){return(0,t.jsx)("div",{className:(0,n.cn)(i({variant:s}),e),...a})}},99827:function(e,s,a){"use strict";a.d(s,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return o},eW:function(){return m},ll:function(){return c}});var t=a(15444),r=a(89300),n=a(65522);let i=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));i.displayName="Card";let l=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...s}));l.displayName="CardHeader";let c=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("h3",{ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));c.displayName="CardTitle";let d=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("p",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",e),...s}));d.displayName="CardDescription";let o=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",e),...s}));o.displayName="CardContent";let m=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",e),...s}));m.displayName="CardFooter"},29530:function(e,s,a){"use strict";a.d(s,{$N:function(){return f},Be:function(){return j},Vq:function(){return c},cN:function(){return h},cZ:function(){return x},fK:function(){return u},hg:function(){return d}});var t=a(15444),r=a(89300),n=a(49095),i=a(33485),l=a(65522);let c=n.fC,d=n.xz,o=n.h_;n.x8;let m=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(n.aV,{ref:a,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));m.displayName=n.aV.displayName;let x=r.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsxs)(o,{children:[(0,t.jsx)(m,{}),(0,t.jsxs)(n.VY,{ref:r,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[s,(0,t.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(i.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));x.displayName=n.VY.displayName;let u=({className:e,...s})=>(0,t.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});u.displayName="DialogHeader";let h=({className:e,...s})=>(0,t.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});h.displayName="DialogFooter";let f=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(n.Dx,{ref:a,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));f.displayName=n.Dx.displayName;let j=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(n.dk,{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",e),...s}));j.displayName=n.dk.displayName},74678:function(e,s,a){"use strict";a.d(s,{I:function(){return i}});var t=a(15444),r=a(89300),n=a(65522);let i=r.forwardRef(({className:e,type:s,...a},r)=>(0,t.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...a}));i.displayName="Input"},34635:function(e,s,a){"use strict";a.d(s,{Label:function(){return d}});var t=a(15444),r=a(89300),n=a(4100),i=a(2371),l=a(65522);let c=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(n.f,{ref:a,className:(0,l.cn)(c(),e),...s}));d.displayName=n.f.displayName},37108:function(e,s,a){"use strict";a.d(s,{E:function(){return l}});var t=a(15444),r=a(89300),n=a(25052),i=a(65522);let l=r.forwardRef(({className:e,value:s,...a},r)=>(0,t.jsx)(n.fC,{ref:r,className:(0,i.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...a,children:(0,t.jsx)(n.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));l.displayName=n.fC.displayName},86765:function(e,s,a){"use strict";a.d(s,{Tabs:function(){return l},TabsContent:function(){return o},TabsList:function(){return c},TabsTrigger:function(){return d}});var t=a(15444),r=a(89300),n=a(84018),i=a(65522);let l=n.fC,c=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(n.aV,{ref:a,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));c.displayName=n.aV.displayName;let d=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(n.xz,{ref:a,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));d.displayName=n.xz.displayName;let o=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(n.VY,{ref:a,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));o.displayName=n.VY.displayName},67012:function(e,s,a){"use strict";a.d(s,{g:function(){return i}});var t=a(15444),r=a(89300),n=a(65522);let i=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));i.displayName="Textarea"},51924:function(e,s,a){"use strict";a.d(s,{TE:function(){return n}});var t=a(75762),r=a(92937);function n(){let{data:e,status:s}=(0,t.useSession)(),a=e?.user,n=a?.role,i=a?.organizationId;return{isAuthenticated:!!e,isLoading:"loading"===s,user:a,role:n,organizationId:i,hasPermission:e=>!!n&&(0,r.N$)(n,e),hasAnyPermission:e=>!!n&&(0,r.vr)(n,e),hasAllPermissions:e=>{if(!n)return!1;let s=(0,r.ai)(n).map(e=>e.toString());return(0,r.wP)(s,e)},canAccessRoute:e=>{if(!n)return!1;let s=(0,r.ai)(n).map(e=>e.toString());return(0,r.mn)(s,e)},getDashboardRoute:()=>n?(0,r.Ol)(n):"/dashboard",getAllPermissions:()=>n?(0,r.ai)(n):[],isSuperAdmin:"SUPER_ADMIN"===n,isDistributor:"DISTRIBUIDOR"===n,isOwner:"PROPIETARIO"===n,isAgent:"AGENTE"===n,canManageUsers:"SUPER_ADMIN"===n||"PROPIETARIO"===n,canManageOrganization:"SUPER_ADMIN"===n||"PROPIETARIO"===n,canViewAllConversations:"AGENTE"!==n,canManageWhatsApp:"SUPER_ADMIN"===n||"PROPIETARIO"===n,canManageBilling:"SUPER_ADMIN"===n||"PROPIETARIO"===n,canConfigureAI:"SUPER_ADMIN"===n||"PROPIETARIO"===n,canViewReports:"AGENTE"!==n,canManageClients:"DISTRIBUIDOR"===n||"SUPER_ADMIN"===n}}}},function(e){e.O(0,[6539,5762,688,8077,4018,1181,5558,1762,1605,4869,3657,2386,7156,1744],function(){return e(e.s=71296)}),_N_E=e.O()}]);