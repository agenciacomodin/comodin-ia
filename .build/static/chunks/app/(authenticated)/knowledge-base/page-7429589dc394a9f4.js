(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[703],{97454:function(e,s,t){Promise.resolve().then(t.bind(t,46062))},46062:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return $}});var a=t(15444),r=t(89300),n=t(75762),i=t(39429),l=t(4805),c=t(63144),o=t(85876),d=t(25076),m=t(2422),u=t(74678),x=t(34635),h=t(67012),p=t(99827),f=t(70489),j=t(29530),g=t(95854),v=t(33186),N=t(26771),y=t(33485),b=t(66772),w=t(37108),C=t(56948);function E({onUploadSuccess:e,onCancel:s}){let{toast:t}=(0,g.pm)(),n=(0,r.useRef)(null),[i,c]=(0,r.useState)(!1),[o,d]=(0,r.useState)([]),[h,f]=(0,r.useState)(!1),[j,E]=(0,r.useState)(0),[S,R]=(0,r.useState)({name:"",tags:"",chunkSize:1e3,chunkOverlap:100}),k=[...v.Eb.pdf,...v.Eb.document,...v.Eb.text,...v.Eb.web],T=e=>k.includes(e.type)?e.size>v.FQ?`Archivo demasiado grande. M\xe1ximo ${v.FQ/1024/1024}MB`:null:`Tipo de archivo no soportado: ${e.type}`,A=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?c(!0):"dragleave"===e.type&&c(!1)},[]),O=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),c(!1),Z(Array.from(e.dataTransfer.files))},[]),Z=e=>{let s=[],a=[];e.forEach(e=>{let t=T(e);t?a.push(`${e.name}: ${t}`):s.push(e)}),a.length>0&&t({title:"Algunos archivos no se pudieron agregar",description:a.join(", "),variant:"destructive"}),d(e=>[...e,...s]),s.length>0&&!S.name&&R(e=>({...e,name:s[0].name.replace(/\.[^/.]+$/,"")}))},I=e=>{d(s=>s.filter((s,t)=>t!==e))},z=e=>{let s=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,s)*100)/100+" "+["Bytes","KB","MB","GB"][s]},D=async()=>{if(!o.length||!S.name){t({title:"Error",description:"Selecciona al menos un archivo y proporciona un nombre",variant:"destructive"});return}try{f(!0),E(0);let s=o[0],a=new FormData;a.append("file",s),a.append("name",S.name),a.append("tags",JSON.stringify(S.tags.split(",").map(e=>e.trim()).filter(e=>e))),a.append("chunkSize",S.chunkSize.toString()),a.append("chunkOverlap",S.chunkOverlap.toString());let r=setInterval(()=>{E(e=>e>=90?(clearInterval(r),90):e+20*Math.random())},500),n=await fetch("/api/knowledge/upload",{method:"POST",body:a});clearInterval(r),E(100);let i=await n.json();if(i.success)t({title:"\xc9xito",description:"Archivo subido correctamente. El procesamiento comenzar\xe1 en breve."}),e&&e(i.data.source),d([]),R({name:"",tags:"",chunkSize:1e3,chunkOverlap:100}),E(0);else throw Error(i.error||"Error subiendo archivo")}catch(e){console.error("Error uploading file:",e),t({title:"Error",description:e instanceof Error?e.message:"Error subiendo archivo",variant:"destructive"})}finally{f(!1)}};return(0,a.jsxs)("div",{className:"space-y-6 max-w-2xl mx-auto",children:[(0,a.jsx)(p.Zb,{className:`border-2 border-dashed transition-colors ${i?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:A,onDragLeave:A,onDragOver:A,onDrop:O,children:(0,a.jsxs)(p.aY,{className:"p-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.Z,{className:`mx-auto h-12 w-12 ${i?"text-blue-500":"text-gray-400"}`}),(0,a.jsx)("h3",{className:"mt-4 text-lg font-semibold text-gray-900",children:"Sube tus documentos"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Arrastra y suelta archivos aqu\xed, o haz clic para seleccionar"}),(0,a.jsx)(m.z,{variant:"outline",className:"mt-4",onClick:()=>n.current?.click(),disabled:h,children:"Seleccionar archivos"}),(0,a.jsx)("input",{ref:n,type:"file",multiple:!0,accept:k.join(","),onChange:e=>{e.target.files&&Z(Array.from(e.target.files))},className:"hidden"})]}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 text-center",children:"Archivos soportados: PDF, DOC, DOCX, TXT, MD, CSV, HTML"}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 text-center mt-1",children:["Tama\xf1o m\xe1ximo: ",v.FQ/1024/1024,"MB"]})]})]})}),o.length>0&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Archivos seleccionados:"}),o.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(N.Z,{className:"h-5 w-5 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[z(e.size)," • ",e.type]})]})]}),(0,a.jsx)(m.z,{variant:"ghost",size:"sm",onClick:()=>I(s),disabled:h,children:(0,a.jsx)(y.Z,{className:"h-4 w-4"})})]},s))]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(x.Label,{htmlFor:"source-name",children:"Nombre de la fuente *"}),(0,a.jsx)(u.I,{id:"source-name",placeholder:"Mi documento de conocimiento",value:S.name,onChange:e=>R(s=>({...s,name:e.target.value})),disabled:h})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x.Label,{htmlFor:"source-tags",children:"Etiquetas (opcional)"}),(0,a.jsx)(u.I,{id:"source-tags",placeholder:"manual, gu\xeda, procedimientos",value:S.tags,onChange:e=>R(s=>({...s,tags:e.target.value})),disabled:h}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Separa las etiquetas con comas"})]}),(0,a.jsxs)("details",{className:"group",children:[(0,a.jsx)("summary",{className:"cursor-pointer text-sm font-medium text-gray-700 hover:text-gray-900",children:"Configuraci\xf3n avanzada"}),(0,a.jsxs)("div",{className:"mt-3 space-y-3 pl-4 border-l-2 border-gray-100",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(x.Label,{htmlFor:"chunk-size",children:"Tama\xf1o de fragmento"}),(0,a.jsx)(u.I,{id:"chunk-size",type:"number",min:100,max:5e3,value:S.chunkSize,onChange:e=>R(s=>({...s,chunkSize:parseInt(e.target.value)||1e3})),disabled:h}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"N\xfamero de caracteres por fragmento (100-5000)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x.Label,{htmlFor:"chunk-overlap",children:"Superposici\xf3n"}),(0,a.jsx)(u.I,{id:"chunk-overlap",type:"number",min:0,max:500,value:S.chunkOverlap,onChange:e=>R(s=>({...s,chunkOverlap:parseInt(e.target.value)||100})),disabled:h}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Caracteres de superposici\xf3n entre fragmentos (0-500)"})]})]})]})]}),h&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Subiendo archivo..."}),(0,a.jsxs)("span",{children:[Math.round(j),"%"]})]}),(0,a.jsx)(w.E,{value:j})]}),(0,a.jsxs)("div",{className:"flex gap-3 justify-end",children:[s&&(0,a.jsx)(m.z,{variant:"outline",onClick:s,disabled:h,children:"Cancelar"}),(0,a.jsx)(m.z,{onClick:D,disabled:!o.length||!S.name||h,children:h?"Subiendo...":"Subir y Procesar"})]}),(0,a.jsxs)(C.bZ,{children:[(0,a.jsx)(b.Z,{className:"h-4 w-4"}),(0,a.jsx)(C.X,{children:"Una vez subido, el archivo ser\xe1 procesado autom\xe1ticamente. Esto puede tomar unos minutos dependiendo del tama\xf1o del documento."})]})]})}var S=t(66124),R=t(62492),k=t(77694),T=t(81471),A=t(83183),O=t(25422),Z=t(40563),I=t(61335),z=t(79507),D=t(99719),M=t(65522);function F({className:e,...s}){return(0,a.jsx)("div",{className:(0,M.cn)("animate-pulse rounded-md bg-muted",e),...s})}function U({sources:e,loading:s=!1,onDelete:t,onReprocess:r,onView:n,onRefresh:i}){let l=e=>{switch(e){case v.rH.FILE:return(0,a.jsx)(N.Z,{className:"h-4 w-4"});case v.rH.URL:return(0,a.jsx)(c.Z,{className:"h-4 w-4"});case v.rH.TEXT:return(0,a.jsx)(o.Z,{className:"h-4 w-4"});default:return(0,a.jsx)(N.Z,{className:"h-4 w-4"})}},d=e=>{switch(e){case v.hC.ACTIVE:return(0,a.jsx)(S.Z,{className:"h-4 w-4 text-green-500"});case v.hC.PROCESSING:case v.hC.CHUNKING:case v.hC.EMBEDDING:return(0,a.jsx)(R.Z,{className:"h-4 w-4 text-yellow-500"});case v.hC.ERROR:return(0,a.jsx)(b.Z,{className:"h-4 w-4 text-red-500"});case v.hC.DISABLED:return(0,a.jsx)(k.Z,{className:"h-4 w-4 text-gray-500"});default:return(0,a.jsx)(R.Z,{className:"h-4 w-4 text-gray-500"})}},u=e=>{switch(e){case v.hC.ACTIVE:return"default";case v.hC.ERROR:return"destructive";case v.hC.PROCESSING:case v.hC.CHUNKING:case v.hC.EMBEDDING:return"secondary";default:return"outline"}},x=e=>{if(!e)return"-";let s=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,s)*100)/100+" "+["Bytes","KB","MB","GB"][s]},h=e=>new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return s?(0,a.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-4 p-4",children:[(0,a.jsx)(F,{className:"h-10 w-10 rounded-full"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(F,{className:"h-4 w-[200px]"}),(0,a.jsx)(F,{className:"h-4 w-[150px]"})]})]},s))}):e.length?(0,a.jsxs)("div",{className:"space-y-4",children:[i&&(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)(m.z,{variant:"outline",size:"sm",onClick:i,children:[(0,a.jsx)(T.Z,{className:"h-4 w-4 mr-2"}),"Actualizar"]})}),(0,a.jsx)("div",{className:"border rounded-lg",children:(0,a.jsxs)(z.iA,{children:[(0,a.jsx)(z.xD,{children:(0,a.jsxs)(z.SC,{children:[(0,a.jsx)(z.ss,{className:"w-[50px]",children:"Tipo"}),(0,a.jsx)(z.ss,{children:"Nombre"}),(0,a.jsx)(z.ss,{children:"Estado"}),(0,a.jsx)(z.ss,{className:"text-center",children:"Fragmentos"}),(0,a.jsx)(z.ss,{className:"text-center",children:"Calidad"}),(0,a.jsx)(z.ss,{className:"text-center",children:"Uso"}),(0,a.jsx)(z.ss,{children:"Fecha"}),(0,a.jsx)(z.ss,{className:"w-[50px]"})]})}),(0,a.jsx)(z.RM,{children:e.map(e=>(0,a.jsxs)(z.SC,{children:[(0,a.jsx)(z.pj,{children:(0,a.jsx)("div",{className:"flex items-center justify-center",children:l(e.type)})}),(0,a.jsx)(z.pj,{children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[e.type===v.rH.FILE&&e.originalFileName&&(0,a.jsxs)("span",{children:[e.originalFileName," • ",x(e.fileSize)]}),e.type===v.rH.URL&&e.sourceUrl&&(0,a.jsx)("span",{className:"truncate max-w-[200px] inline-block",children:e.sourceUrl}),e.type===v.rH.TEXT&&(0,a.jsx)("span",{children:"Contenido de texto manual"})]}),e.tags.length>0&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-1 mt-1",children:[e.tags.slice(0,3).map((e,s)=>(0,a.jsx)(I.C,{variant:"outline",className:"text-xs px-1 py-0",children:e},s)),e.tags.length>3&&(0,a.jsxs)(I.C,{variant:"outline",className:"text-xs px-1 py-0",children:["+",e.tags.length-3]})]})]})}),(0,a.jsxs)(z.pj,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[d(e.status),(0,a.jsx)(I.C,{variant:u(e.status),className:"text-xs",children:v.hQ[e.status]})]}),e.status===v.hC.ERROR&&e.lastError&&(0,a.jsx)("div",{className:"text-xs text-red-500 mt-1 truncate max-w-[150px]",title:e.lastError,children:e.lastError}),(e.status===v.hC.PROCESSING||e.status===v.hC.CHUNKING||e.status===v.hC.EMBEDDING)&&(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsx)(w.E,{value:e.processingProgress,className:"h-1 w-20"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.processingProgress,"%"]})]})]}),(0,a.jsx)(z.pj,{className:"text-center",children:(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("div",{className:"font-medium",children:e.processedChunks}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["de ",e.totalChunks]}),e.failedChunks>0&&(0,a.jsxs)("div",{className:"text-xs text-red-500",children:[e.failedChunks," fallaron"]})]})}),(0,a.jsx)(z.pj,{className:"text-center",children:e.contentQuality?(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("div",{className:"font-medium",children:[Math.round(100*e.contentQuality),"%"]}),(0,a.jsx)("div",{className:`w-12 h-1 mx-auto rounded-full ${e.contentQuality>.8?"bg-green-500":e.contentQuality>.6?"bg-yellow-500":"bg-red-500"}`})]}):(0,a.jsx)("span",{className:"text-gray-400 text-sm",children:"-"})}),(0,a.jsx)(z.pj,{className:"text-center",children:(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("div",{className:"font-medium",children:e.usageCount}),e.lastUsedAt&&(0,a.jsx)("div",{className:"text-xs text-gray-500",children:h(e.lastUsedAt)})]})}),(0,a.jsx)(z.pj,{children:(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("div",{children:h(e.createdAt)}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["por ",e.createdByName]})]})}),(0,a.jsx)(z.pj,{children:(0,a.jsxs)(D.h_,{children:[(0,a.jsx)(D.$F,{asChild:!0,children:(0,a.jsx)(m.z,{variant:"ghost",className:"h-8 w-8 p-0",children:(0,a.jsx)(A.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)(D.AW,{align:"end",children:[(0,a.jsx)(D.Ju,{children:"Acciones"}),(0,a.jsx)(D.VD,{}),n&&(0,a.jsxs)(D.Xi,{onClick:()=>n(e),children:[(0,a.jsx)(O.Z,{className:"mr-2 h-4 w-4"}),"Ver detalles"]}),r&&e.status!==v.hC.PROCESSING&&(0,a.jsxs)(D.Xi,{onClick:()=>r(e.id),children:[(0,a.jsx)(T.Z,{className:"mr-2 h-4 w-4"}),"Reprocesar"]}),(0,a.jsx)(D.VD,{}),t&&(0,a.jsxs)(D.Xi,{className:"text-red-600",onClick:()=>t(e.id),children:[(0,a.jsx)(Z.Z,{className:"mr-2 h-4 w-4"}),"Eliminar"]})]})]})})]},e.id))})]})})]}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(N.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-semibold text-gray-900",children:"No hay fuentes de conocimiento"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Comienza agregando documentos, URLs o contenido de texto."})]})}var L=t(18218),P=t(99983),_=t(64670),B=t(26378);function q({stats:e}){let s=e.totalChunks>0?Math.round(e.processedChunks/e.totalChunks*100):0,t=e.totalSources>0?Math.round(e.errorSources/e.totalSources*100):0;return(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)(p.Zb,{children:[(0,a.jsxs)(p.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(p.ll,{className:"text-sm font-medium",children:"Fuentes de Conocimiento"}),(0,a.jsx)(N.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(p.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:e.totalSources}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsxs)(I.C,{variant:"secondary",className:"text-xs",children:[(0,a.jsx)(S.Z,{className:"w-3 h-3 mr-1"}),e.activeSources," activas"]}),e.processingSources>0&&(0,a.jsxs)(I.C,{variant:"outline",className:"text-xs",children:[(0,a.jsx)(R.Z,{className:"w-3 h-3 mr-1"}),e.processingSources," procesando"]})]})]})]}),(0,a.jsxs)(p.Zb,{children:[(0,a.jsxs)(p.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(p.ll,{className:"text-sm font-medium",children:"Fragmentos de Contenido"}),(0,a.jsx)(L.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(p.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:e.totalChunks.toLocaleString()}),(0,a.jsxs)("div",{className:"space-y-2 mt-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["Procesados: ",e.processedChunks]}),(0,a.jsxs)("span",{children:[s,"%"]})]}),(0,a.jsx)(w.E,{value:s,className:"h-2"}),e.failedChunks>0&&(0,a.jsxs)("div",{className:"text-xs text-red-500",children:[e.failedChunks," fragmentos fallaron"]})]})]})]}),(0,a.jsxs)(p.Zb,{children:[(0,a.jsxs)(p.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(p.ll,{className:"text-sm font-medium",children:"Uso del Conocimiento"}),(0,a.jsx)(P.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(p.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:e.totalUsage}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.usageThisMonth," consultas este mes"]}),(0,a.jsx)("div",{className:"mt-2",children:e.usageThisMonth>0&&e.totalUsage>0&&(0,a.jsxs)(I.C,{variant:"outline",className:"text-xs",children:[(0,a.jsx)(_.Z,{className:"w-3 h-3 mr-1"}),Math.round(e.usageThisMonth/e.totalUsage*100),"% este mes"]})})]})]}),(0,a.jsxs)(p.Zb,{children:[(0,a.jsxs)(p.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(p.ll,{className:"text-sm font-medium",children:"Calidad del Contenido"}),(0,a.jsx)(B.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(p.aY,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[Math.round(100*e.avgQuality),"%"]}),(0,a.jsxs)("div",{className:"space-y-2 mt-2",children:[(0,a.jsx)(w.E,{value:100*e.avgQuality,className:"h-2"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Calidad promedio"}),e.errorSources>0&&(0,a.jsxs)("span",{className:"text-red-500 flex items-center gap-1",children:[(0,a.jsx)(b.Z,{className:"w-3 h-3"}),t,"% con errores"]})]})]})]})]}),e.topSources.length>0&&(0,a.jsxs)(p.Zb,{className:"md:col-span-2",children:[(0,a.jsxs)(p.Ol,{children:[(0,a.jsx)(p.ll,{className:"text-lg",children:"Fuentes M\xe1s Utilizadas"}),(0,a.jsx)(p.SZ,{children:"Fuentes de conocimiento que m\xe1s han ayudado a tu IA"})]}),(0,a.jsx)(p.aY,{children:(0,a.jsx)("div",{className:"space-y-3",children:e.topSources.slice(0,3).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${0===s?"bg-yellow-100 text-yellow-800":1===s?"bg-gray-100 text-gray-800":"bg-orange-100 text-orange-800"}`,children:s+1}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[e.usageCount," usos",e.quality&&(0,a.jsxs)("span",{className:"ml-2",children:["• Calidad: ",Math.round(100*e.quality),"%"]})]})]})]}),(0,a.jsx)(I.C,{variant:"secondary",className:"text-xs",children:e.usageCount})]},e.id))})})]}),e.recentActivity.length>0&&(0,a.jsxs)(p.Zb,{className:"md:col-span-2",children:[(0,a.jsxs)(p.Ol,{children:[(0,a.jsx)(p.ll,{className:"text-lg",children:"Actividad Reciente"}),(0,a.jsx)(p.SZ,{children:"\xdaltimas actualizaciones en tu base de conocimiento"})]}),(0,a.jsx)(p.aY,{children:(0,a.jsx)("div",{className:"space-y-3",children:e.recentActivity.slice(0,5).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-3 p-2",children:[(0,a.jsx)("div",{className:`w-2 h-2 rounded-full ${"ACTIVE"===e.status?"bg-green-500":"ERROR"===e.status?"bg-red-500":"PROCESSING"===e.status?"bg-yellow-500":"bg-gray-500"}`}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"text-sm font-medium truncate",children:e.sourceName}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["created"===e.action?"Fuente creada":"Actualizada"," • "," ",new Date(e.timestamp).toLocaleDateString("es-ES",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),(0,a.jsx)(I.C,{variant:"ACTIVE"===e.status?"default":"ERROR"===e.status?"destructive":"PROCESSING"===e.status?"secondary":"outline",className:"text-xs",children:e.status.toLowerCase()})]},`${e.id}-${s}`))})})]})]})}function $(){let{data:e}=(0,n.useSession)()||{},{toast:s}=(0,g.pm)(),[t,N]=(0,r.useState)([]),[y,b]=(0,r.useState)(null),[w,C]=(0,r.useState)(!0),[S,R]=(0,r.useState)(""),[k,T]=(0,r.useState)("all"),[A,O]=(0,r.useState)("all"),[Z,I]=(0,r.useState)(!1),[z,D]=(0,r.useState)(!1),[M,F]=(0,r.useState)(!1),[L,P]=(0,r.useState)(!1),[_,B]=(0,r.useState)(!1),[$,V]=(0,r.useState)({url:"",name:"",tags:""}),[G,Q]=(0,r.useState)({name:"",content:"",tags:""});(0,r.useEffect)(()=>{X(),H()},[]);let X=async()=>{try{C(!0);let e=new URLSearchParams;S&&e.set("search",S),"all"!==k&&e.set("status",k),"all"!==A&&e.set("type",A);let t=await fetch(`/api/knowledge?${e}`),a=await t.json();a.success?N(a.data.sources):s({title:"Error",description:a.error||"Error cargando fuentes",variant:"destructive"})}catch(e){console.error("Error loading sources:",e),s({title:"Error",description:"Error de conexi\xf3n",variant:"destructive"})}finally{C(!1)}},H=async()=>{try{let e=await fetch("/api/knowledge/stats"),s=await e.json();s.success&&b(s.data)}catch(e){console.error("Error loading stats:",e)}};(0,r.useEffect)(()=>{let e=setTimeout(()=>{X()},500);return()=>clearTimeout(e)},[S,k,A]);let Y=(0,r.useCallback)(e=>{N(s=>[e,...s]),I(!1),P(!1),s({title:"\xc9xito",description:"Archivo subido correctamente. El procesamiento comenzar\xe1 en breve."}),H()},[s]),K=async()=>{if(!$.url||!$.name){s({title:"Error",description:"URL y nombre son requeridos",variant:"destructive"});return}try{B(!0);let e=await fetch("/api/knowledge",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:$.name,type:v.rH.URL,sourceUrl:$.url,tags:$.tags.split(",").map(e=>e.trim()).filter(e=>e)})}),t=await e.json();t.success?(N(e=>[t.data.source,...e]),D(!1),V({url:"",name:"",tags:""}),s({title:"\xc9xito",description:"URL agregada correctamente. Procesamiento iniciado."}),H()):s({title:"Error",description:t.error||"Error agregando URL",variant:"destructive"})}catch(e){s({title:"Error",description:"Error de conexi\xf3n",variant:"destructive"})}finally{B(!1)}},J=async()=>{if(!G.name||!G.content){s({title:"Error",description:"Nombre y contenido son requeridos",variant:"destructive"});return}try{B(!0);let e=await fetch("/api/knowledge",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:G.name,type:v.rH.TEXT,textContent:G.content,tags:G.tags.split(",").map(e=>e.trim()).filter(e=>e)})}),t=await e.json();t.success?(N(e=>[t.data.source,...e]),F(!1),Q({name:"",content:"",tags:""}),s({title:"\xc9xito",description:"Contenido agregado correctamente. Procesamiento iniciado."}),H()):s({title:"Error",description:t.error||"Error agregando contenido",variant:"destructive"})}catch(e){s({title:"Error",description:"Error de conexi\xf3n",variant:"destructive"})}finally{B(!1)}},W=async e=>{if(confirm("\xbfEst\xe1s seguro de que quieres eliminar esta fuente? Esta acci\xf3n no se puede deshacer."))try{let t=await fetch(`/api/knowledge/${e}`,{method:"DELETE"}),a=await t.json();a.success?(N(s=>s.filter(s=>s.id!==e)),s({title:"\xc9xito",description:"Fuente eliminada correctamente"}),H()):s({title:"Error",description:a.error||"Error eliminando fuente",variant:"destructive"})}catch(e){s({title:"Error",description:"Error de conexi\xf3n",variant:"destructive"})}},ee=async e=>{try{let t=await fetch(`/api/knowledge/${e}/process`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({forceReprocess:!0})}),a=await t.json();a.success?(s({title:"\xc9xito",description:"Reprocesamiento iniciado"}),N(s=>s.map(s=>s.id===e?{...s,status:v.hC.PROCESSING}:s))):s({title:"Error",description:a.error||"Error reprocesando fuente",variant:"destructive"})}catch(e){s({title:"Error",description:"Error de conexi\xf3n",variant:"destructive"})}};return(0,a.jsxs)("div",{className:"container mx-auto py-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Base de Conocimiento"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Entrena tu IA con documentos, p\xe1ginas web y contenido espec\xedfico de tu negocio"})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsxs)(j.Vq,{open:Z,onOpenChange:I,children:[(0,a.jsx)(j.hg,{asChild:!0,children:(0,a.jsxs)(m.z,{children:[(0,a.jsx)(i.Z,{className:"h-4 w-4 mr-2"}),"Agregar Conocimiento"]})}),(0,a.jsxs)(j.cZ,{className:"sm:max-w-md",children:[(0,a.jsxs)(j.fK,{children:[(0,a.jsx)(j.$N,{children:"Agregar Fuente de Conocimiento"}),(0,a.jsx)(j.Be,{children:"Elige el tipo de contenido que quieres agregar a tu base de conocimiento."})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)(m.z,{variant:"outline",className:"h-20 flex flex-col gap-2",onClick:()=>{I(!1),P(!0)},children:[(0,a.jsx)(l.Z,{className:"h-6 w-6"}),(0,a.jsx)("span",{children:"Subir Archivo"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"PDF, DOC, TXT"})]}),(0,a.jsxs)(m.z,{variant:"outline",className:"h-20 flex flex-col gap-2",onClick:()=>{I(!1),D(!0)},children:[(0,a.jsx)(c.Z,{className:"h-6 w-6"}),(0,a.jsx)("span",{children:"P\xe1gina Web"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"URL o sitio web"})]}),(0,a.jsxs)(m.z,{variant:"outline",className:"h-20 flex flex-col gap-2",onClick:()=>{I(!1),F(!0)},children:[(0,a.jsx)(o.Z,{className:"h-6 w-6"}),(0,a.jsx)("span",{children:"Texto Manual"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Escribir directamente"})]})]})]})]})})]}),y&&(0,a.jsx)(q,{stats:y}),(0,a.jsxs)(p.Zb,{children:[(0,a.jsx)(p.Ol,{children:(0,a.jsx)(p.ll,{className:"text-lg",children:"Fuentes de Conocimiento"})}),(0,a.jsxs)(p.aY,{children:[(0,a.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(d.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)(u.I,{placeholder:"Buscar fuentes...",value:S,onChange:e=>R(e.target.value),className:"pl-10"})]})}),(0,a.jsxs)(f.Ph,{value:k,onValueChange:T,children:[(0,a.jsx)(f.i4,{className:"w-48",children:(0,a.jsx)(f.ki,{placeholder:"Filtrar por estado"})}),(0,a.jsxs)(f.Bw,{children:[(0,a.jsx)(f.Ql,{value:"all",children:"Todos los estados"}),(0,a.jsx)(f.Ql,{value:"ACTIVE",children:"Activo"}),(0,a.jsx)(f.Ql,{value:"PROCESSING,CHUNKING,EMBEDDING",children:"Procesando"}),(0,a.jsx)(f.Ql,{value:"ERROR",children:"Con Error"}),(0,a.jsx)(f.Ql,{value:"DISABLED",children:"Deshabilitado"})]})]}),(0,a.jsxs)(f.Ph,{value:A,onValueChange:O,children:[(0,a.jsx)(f.i4,{className:"w-48",children:(0,a.jsx)(f.ki,{placeholder:"Filtrar por tipo"})}),(0,a.jsxs)(f.Bw,{children:[(0,a.jsx)(f.Ql,{value:"all",children:"Todos los tipos"}),(0,a.jsx)(f.Ql,{value:"FILE",children:"Archivos"}),(0,a.jsx)(f.Ql,{value:"URL",children:"URLs"}),(0,a.jsx)(f.Ql,{value:"TEXT",children:"Texto"})]})]})]}),(0,a.jsx)(U,{sources:t,loading:w,onDelete:W,onReprocess:ee,onRefresh:X})]})]}),(0,a.jsx)(j.Vq,{open:z,onOpenChange:D,children:(0,a.jsxs)(j.cZ,{className:"sm:max-w-md",children:[(0,a.jsxs)(j.fK,{children:[(0,a.jsx)(j.$N,{children:"Agregar P\xe1gina Web"}),(0,a.jsx)(j.Be,{children:"Agrega una URL para que nuestra IA extraiga el contenido autom\xe1ticamente."})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(x.Label,{htmlFor:"url",children:"URL *"}),(0,a.jsx)(u.I,{id:"url",placeholder:"https://ejemplo.com",value:$.url,onChange:e=>V(s=>({...s,url:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x.Label,{htmlFor:"url-name",children:"Nombre *"}),(0,a.jsx)(u.I,{id:"url-name",placeholder:"Mi sitio web",value:$.name,onChange:e=>V(s=>({...s,name:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x.Label,{htmlFor:"url-tags",children:"Etiquetas (opcional)"}),(0,a.jsx)(u.I,{id:"url-tags",placeholder:"web, productos, precios",value:$.tags,onChange:e=>V(s=>({...s,tags:e.target.value}))})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(m.z,{variant:"outline",onClick:()=>D(!1),children:"Cancelar"}),(0,a.jsx)(m.z,{onClick:K,disabled:_,children:_?"Procesando...":"Agregar URL"})]})]})}),(0,a.jsx)(j.Vq,{open:M,onOpenChange:F,children:(0,a.jsxs)(j.cZ,{className:"sm:max-w-2xl",children:[(0,a.jsxs)(j.fK,{children:[(0,a.jsx)(j.$N,{children:"Agregar Contenido de Texto"}),(0,a.jsx)(j.Be,{children:"Escribe o pega el contenido que quieres que tu IA aprenda."})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(x.Label,{htmlFor:"text-name",children:"Nombre *"}),(0,a.jsx)(u.I,{id:"text-name",placeholder:"Mi documento de texto",value:G.name,onChange:e=>Q(s=>({...s,name:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x.Label,{htmlFor:"text-content",children:"Contenido *"}),(0,a.jsx)(h.g,{id:"text-content",placeholder:"Escribe aqu\xed el contenido que quieres que tu IA aprenda...",rows:10,value:G.content,onChange:e=>Q(s=>({...s,content:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x.Label,{htmlFor:"text-tags",children:"Etiquetas (opcional)"}),(0,a.jsx)(u.I,{id:"text-tags",placeholder:"manual, gu\xeda, procedimientos",value:G.tags,onChange:e=>Q(s=>({...s,tags:e.target.value}))})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(m.z,{variant:"outline",onClick:()=>F(!1),children:"Cancelar"}),(0,a.jsx)(m.z,{onClick:J,disabled:_,children:_?"Procesando...":"Agregar Contenido"})]})]})}),(0,a.jsx)(j.Vq,{open:L,onOpenChange:P,children:(0,a.jsxs)(j.cZ,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(j.fK,{children:[(0,a.jsx)(j.$N,{children:"Subir Documentos"}),(0,a.jsx)(j.Be,{children:"Sube documentos PDF, DOC, TXT u otros archivos para entrenar tu IA."})]}),(0,a.jsx)("div",{className:"py-4",children:(0,a.jsx)(E,{onUploadSuccess:Y,onCancel:()=>P(!1)})})]})})]})}},56948:function(e,s,t){"use strict";t.d(s,{Cd:function(){return o},X:function(){return d},bZ:function(){return c}});var a=t(15444),r=t(89300),n=t(2371),i=t(65522);let l=(0,n.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=r.forwardRef(({className:e,variant:s,...t},r)=>(0,a.jsx)("div",{ref:r,role:"alert",className:(0,i.cn)(l({variant:s}),e),...t}));c.displayName="Alert";let o=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",e),...s}));o.displayName="AlertTitle";let d=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",e),...s}));d.displayName="AlertDescription"},2422:function(e,s,t){"use strict";t.d(s,{d:function(){return c},z:function(){return o}});var a=t(15444),r=t(89300),n=t(21030),i=t(2371),l=t(65522);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef(({className:e,variant:s,size:t,asChild:r=!1,...i},o)=>{let d=r?n.g7:"button";return(0,a.jsx)(d,{className:(0,l.cn)(c({variant:s,size:t,className:e})),ref:o,...i})});o.displayName="Button"},99719:function(e,s,t){"use strict";t.d(s,{$F:function(){return m},AW:function(){return u},Ju:function(){return h},VD:function(){return p},Xi:function(){return x},h_:function(){return d}});var a=t(15444),r=t(89300),n=t(78658),i=t(23572),l=t(77248),c=t(70966),o=t(65522);let d=n.fC,m=n.xz;n.ZA,n.Uv,n.Tr,n.Ee,r.forwardRef(({className:e,inset:s,children:t,...r},l)=>(0,a.jsxs)(n.fF,{ref:l,className:(0,o.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s&&"pl-8",e),...r,children:[t,(0,a.jsx)(i.Z,{className:"ml-auto h-4 w-4"})]})).displayName=n.fF.displayName,r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(n.tu,{ref:t,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})).displayName=n.tu.displayName;let u=r.forwardRef(({className:e,sideOffset:s=4,...t},r)=>(0,a.jsx)(n.Uv,{children:(0,a.jsx)(n.VY,{ref:r,sideOffset:s,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})}));u.displayName=n.VY.displayName;let x=r.forwardRef(({className:e,inset:s,...t},r)=>(0,a.jsx)(n.ck,{ref:r,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",e),...t}));x.displayName=n.ck.displayName,r.forwardRef(({className:e,children:s,checked:t,...r},i)=>(0,a.jsxs)(n.oC,{ref:i,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:t,...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.wU,{children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})}),s]})).displayName=n.oC.displayName,r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(n.Rk,{ref:r,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.wU,{children:(0,a.jsx)(c.Z,{className:"h-2 w-2 fill-current"})})}),s]})).displayName=n.Rk.displayName;let h=r.forwardRef(({className:e,inset:s,...t},r)=>(0,a.jsx)(n.__,{ref:r,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",e),...t}));h.displayName=n.__.displayName;let p=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(n.Z0,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...s}));p.displayName=n.Z0.displayName},37108:function(e,s,t){"use strict";t.d(s,{E:function(){return l}});var a=t(15444),r=t(89300),n=t(25052),i=t(65522);let l=r.forwardRef(({className:e,value:s,...t},r)=>(0,a.jsx)(n.fC,{ref:r,className:(0,i.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...t,children:(0,a.jsx)(n.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));l.displayName=n.fC.displayName},70489:function(e,s,t){"use strict";t.d(s,{Bw:function(){return p},Ph:function(){return d},Ql:function(){return f},i4:function(){return u},ki:function(){return m}});var a=t(15444),r=t(89300),n=t(63280),i=t(63751),l=t(16997),c=t(77248),o=t(65522);let d=n.fC;n.ZA;let m=n.B4,u=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(n.xz,{ref:r,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[s,(0,a.jsx)(n.JO,{asChild:!0,children:(0,a.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]}));u.displayName=n.xz.displayName;let x=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(n.u_,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})}));x.displayName=n.u_.displayName;let h=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(n.$G,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})}));h.displayName=n.$G.displayName;let p=r.forwardRef(({className:e,children:s,position:t="popper",...r},i)=>(0,a.jsx)(n.h_,{children:(0,a.jsxs)(n.VY,{ref:i,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[(0,a.jsx)(x,{}),(0,a.jsx)(n.l_,{className:(0,o.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(h,{})]})}));p.displayName=n.VY.displayName,r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(n.__,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=n.__.displayName;let f=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(n.ck,{ref:r,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.wU,{children:(0,a.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(n.eT,{children:s})]}));f.displayName=n.ck.displayName,r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(n.Z0,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=n.Z0.displayName},79507:function(e,s,t){"use strict";t.d(s,{RM:function(){return c},SC:function(){return o},iA:function(){return i},pj:function(){return m},ss:function(){return d},xD:function(){return l}});var a=t(15444),r=t(89300),n=t(65522);let i=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",e),...s})}));i.displayName="Table";let l=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",e),...s}));l.displayName="TableHeader";let c=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",e),...s}));c.displayName="TableBody",r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...s})).displayName="TableFooter";let o=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...s}));o.displayName="TableRow";let d=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...s}));d.displayName="TableHead";let m=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...s}));m.displayName="TableCell",r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",e),...s})).displayName="TableCaption"},67012:function(e,s,t){"use strict";t.d(s,{g:function(){return i}});var a=t(15444),r=t(89300),n=t(65522);let i=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...s}));i.displayName="Textarea"},95854:function(e,s,t){"use strict";t.d(s,{pm:function(){return u}});var a=t(89300);let r=0,n=new Map,i=e=>{if(n.has(e))return;let s=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,s)},l=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?i(t):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},c=[],o={toasts:[]};function d(e){o=l(o,e),c.forEach(e=>{e(o)})}function m({...e}){let s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),t=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...e,id:s,open:!0,onOpenChange:e=>{e||t()}}}),{id:s,dismiss:t,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function u(){let[e,s]=a.useState(o);return a.useEffect(()=>(c.push(s),()=>{let e=c.indexOf(s);e>-1&&c.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},65522:function(e,s,t){"use strict";t.d(s,{cn:function(){return n}});var a=t(32191),r=t(23607);function n(...e){return(0,r.m6)((0,a.W)(e))}}},function(e){e.O(0,[9993,5762,688,8077,8151,6298,1561,2578,2691,3036,2386,7156,1744],function(){return e(e.s=97454)}),_N_E=e.O()}]);