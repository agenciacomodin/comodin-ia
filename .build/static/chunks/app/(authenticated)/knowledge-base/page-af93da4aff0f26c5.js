(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[703],{97454:function(e,s,a){Promise.resolve().then(a.bind(a,39158))},39158:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return ec}});var t=a(15444),r=a(89300),i=a(75762),n=a(39429),l=a(4805),c=a(63144),o=a(85876),d=a(25076),u=a(2422),x=a(74678),m=a(34635),h=a(67012),p=a(99827),j=a(86765),g=a(70489),v=a(29530),N=a(95854),f=a(33186),E=a(26771),y=a(33485),b=a(66772),C=a(37108),A=a(56948);function S({onUploadSuccess:e,onCancel:s}){let{toast:a}=(0,N.pm)(),i=(0,r.useRef)(null),[n,c]=(0,r.useState)(!1),[o,d]=(0,r.useState)([]),[h,j]=(0,r.useState)(!1),[g,v]=(0,r.useState)(0),[S,I]=(0,r.useState)({name:"",tags:"",chunkSize:1e3,chunkOverlap:100}),w=[...f.Eb.pdf,...f.Eb.document,...f.Eb.text,...f.Eb.web],R=e=>w.includes(e.type)?e.size>f.FQ?`Archivo demasiado grande. M\xe1ximo ${f.FQ/1024/1024}MB`:null:`Tipo de archivo no soportado: ${e.type}`,T=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?c(!0):"dragleave"===e.type&&c(!1)},[]),P=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),c(!1),O(Array.from(e.dataTransfer.files))},[]),O=e=>{let s=[],t=[];e.forEach(e=>{let a=R(e);a?t.push(`${e.name}: ${a}`):s.push(e)}),t.length>0&&a({title:"Algunos archivos no se pudieron agregar",description:t.join(", "),variant:"destructive"}),d(e=>[...e,...s]),s.length>0&&!S.name&&I(e=>({...e,name:s[0].name.replace(/\.[^/.]+$/,"")}))},D=e=>{d(s=>s.filter((s,a)=>a!==e))},L=e=>{let s=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,s)*100)/100+" "+["Bytes","KB","MB","GB"][s]},M=async()=>{if(!o.length||!S.name){a({title:"Error",description:"Selecciona al menos un archivo y proporciona un nombre",variant:"destructive"});return}try{j(!0),v(0);let s=o[0],t=new FormData;t.append("file",s),t.append("name",S.name),t.append("tags",JSON.stringify(S.tags.split(",").map(e=>e.trim()).filter(e=>e))),t.append("chunkSize",S.chunkSize.toString()),t.append("chunkOverlap",S.chunkOverlap.toString());let r=setInterval(()=>{v(e=>e>=90?(clearInterval(r),90):e+20*Math.random())},500),i=await fetch("/api/knowledge/upload",{method:"POST",body:t});clearInterval(r),v(100);let n=await i.json();if(n.success)a({title:"\xc9xito",description:"Archivo subido correctamente. El procesamiento comenzar\xe1 en breve."}),e&&e(n.data.source),d([]),I({name:"",tags:"",chunkSize:1e3,chunkOverlap:100}),v(0);else throw Error(n.error||"Error subiendo archivo")}catch(e){console.error("Error uploading file:",e),a({title:"Error",description:e instanceof Error?e.message:"Error subiendo archivo",variant:"destructive"})}finally{j(!1)}};return(0,t.jsxs)("div",{className:"space-y-6 max-w-2xl mx-auto",children:[(0,t.jsx)(p.Zb,{className:`border-2 border-dashed transition-colors ${n?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:T,onDragLeave:T,onDragOver:T,onDrop:P,children:(0,t.jsxs)(p.aY,{className:"p-8",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(l.Z,{className:`mx-auto h-12 w-12 ${n?"text-blue-500":"text-gray-400"}`}),(0,t.jsx)("h3",{className:"mt-4 text-lg font-semibold text-gray-900",children:"Sube tus documentos"}),(0,t.jsx)("p",{className:"mt-2 text-gray-600",children:"Arrastra y suelta archivos aqu\xed, o haz clic para seleccionar"}),(0,t.jsx)(u.z,{variant:"outline",className:"mt-4",onClick:()=>i.current?.click(),disabled:h,children:"Seleccionar archivos"}),(0,t.jsx)("input",{ref:i,type:"file",multiple:!0,accept:w.join(","),onChange:e=>{e.target.files&&O(Array.from(e.target.files))},className:"hidden"})]}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 text-center",children:"Archivos soportados: PDF, DOC, DOCX, TXT, MD, CSV, HTML"}),(0,t.jsxs)("p",{className:"text-xs text-gray-400 text-center mt-1",children:["Tama\xf1o m\xe1ximo: ",f.FQ/1024/1024,"MB"]})]})]})}),o.length>0&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Archivos seleccionados:"}),o.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(E.Z,{className:"h-5 w-5 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[L(e.size)," â€¢ ",e.type]})]})]}),(0,t.jsx)(u.z,{variant:"ghost",size:"sm",onClick:()=>D(s),disabled:h,children:(0,t.jsx)(y.Z,{className:"h-4 w-4"})})]},s))]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{htmlFor:"source-name",children:"Nombre de la fuente *"}),(0,t.jsx)(x.I,{id:"source-name",placeholder:"Mi documento de conocimiento",value:S.name,onChange:e=>I(s=>({...s,name:e.target.value})),disabled:h})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{htmlFor:"source-tags",children:"Etiquetas (opcional)"}),(0,t.jsx)(x.I,{id:"source-tags",placeholder:"manual, gu\xeda, procedimientos",value:S.tags,onChange:e=>I(s=>({...s,tags:e.target.value})),disabled:h}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Separa las etiquetas con comas"})]}),(0,t.jsxs)("details",{className:"group",children:[(0,t.jsx)("summary",{className:"cursor-pointer text-sm font-medium text-gray-700 hover:text-gray-900",children:"Configuraci\xf3n avanzada"}),(0,t.jsxs)("div",{className:"mt-3 space-y-3 pl-4 border-l-2 border-gray-100",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{htmlFor:"chunk-size",children:"Tama\xf1o de fragmento"}),(0,t.jsx)(x.I,{id:"chunk-size",type:"number",min:100,max:5e3,value:S.chunkSize,onChange:e=>I(s=>({...s,chunkSize:parseInt(e.target.value)||1e3})),disabled:h}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"N\xfamero de caracteres por fragmento (100-5000)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{htmlFor:"chunk-overlap",children:"Superposici\xf3n"}),(0,t.jsx)(x.I,{id:"chunk-overlap",type:"number",min:0,max:500,value:S.chunkOverlap,onChange:e=>I(s=>({...s,chunkOverlap:parseInt(e.target.value)||100})),disabled:h}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Caracteres de superposici\xf3n entre fragmentos (0-500)"})]})]})]})]}),h&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:"Subiendo archivo..."}),(0,t.jsxs)("span",{children:[Math.round(g),"%"]})]}),(0,t.jsx)(C.E,{value:g})]}),(0,t.jsxs)("div",{className:"flex gap-3 justify-end",children:[s&&(0,t.jsx)(u.z,{variant:"outline",onClick:s,disabled:h,children:"Cancelar"}),(0,t.jsx)(u.z,{onClick:M,disabled:!o.length||!S.name||h,children:h?"Subiendo...":"Subir y Procesar"})]}),(0,t.jsxs)(A.bZ,{children:[(0,t.jsx)(b.Z,{className:"h-4 w-4"}),(0,t.jsx)(A.X,{children:"Una vez subido, el archivo ser\xe1 procesado autom\xe1ticamente. Esto puede tomar unos minutos dependiendo del tama\xf1o del documento."})]})]})}var I=a(66124),w=a(62492),R=a(77694),T=a(81471),P=a(83183),O=a(25422),D=a(40563),L=a(61335),M=a(79507),k=a(99719),F=a(65522);function Z({className:e,...s}){return(0,t.jsx)("div",{className:(0,F.cn)("animate-pulse rounded-md bg-muted",e),...s})}function _({sources:e,loading:s=!1,onDelete:a,onReprocess:r,onView:i,onRefresh:n}){let l=e=>{switch(e){case f.rH.FILE:return(0,t.jsx)(E.Z,{className:"h-4 w-4"});case f.rH.URL:return(0,t.jsx)(c.Z,{className:"h-4 w-4"});case f.rH.TEXT:return(0,t.jsx)(o.Z,{className:"h-4 w-4"});default:return(0,t.jsx)(E.Z,{className:"h-4 w-4"})}},d=e=>{switch(e){case f.hC.ACTIVE:return(0,t.jsx)(I.Z,{className:"h-4 w-4 text-green-500"});case f.hC.PROCESSING:case f.hC.CHUNKING:case f.hC.EMBEDDING:return(0,t.jsx)(w.Z,{className:"h-4 w-4 text-yellow-500"});case f.hC.ERROR:return(0,t.jsx)(b.Z,{className:"h-4 w-4 text-red-500"});case f.hC.DISABLED:return(0,t.jsx)(R.Z,{className:"h-4 w-4 text-gray-500"});default:return(0,t.jsx)(w.Z,{className:"h-4 w-4 text-gray-500"})}},x=e=>{switch(e){case f.hC.ACTIVE:return"default";case f.hC.ERROR:return"destructive";case f.hC.PROCESSING:case f.hC.CHUNKING:case f.hC.EMBEDDING:return"secondary";default:return"outline"}},m=e=>{if(!e)return"-";let s=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,s)*100)/100+" "+["Bytes","KB","MB","GB"][s]},h=e=>new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return s?(0,t.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center space-x-4 p-4",children:[(0,t.jsx)(Z,{className:"h-10 w-10 rounded-full"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(Z,{className:"h-4 w-[200px]"}),(0,t.jsx)(Z,{className:"h-4 w-[150px]"})]})]},s))}):e.length?(0,t.jsxs)("div",{className:"space-y-4",children:[n&&(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)(u.z,{variant:"outline",size:"sm",onClick:n,children:[(0,t.jsx)(T.Z,{className:"h-4 w-4 mr-2"}),"Actualizar"]})}),(0,t.jsx)("div",{className:"border rounded-lg",children:(0,t.jsxs)(M.iA,{children:[(0,t.jsx)(M.xD,{children:(0,t.jsxs)(M.SC,{children:[(0,t.jsx)(M.ss,{className:"w-[50px]",children:"Tipo"}),(0,t.jsx)(M.ss,{children:"Nombre"}),(0,t.jsx)(M.ss,{children:"Estado"}),(0,t.jsx)(M.ss,{className:"text-center",children:"Fragmentos"}),(0,t.jsx)(M.ss,{className:"text-center",children:"Calidad"}),(0,t.jsx)(M.ss,{className:"text-center",children:"Uso"}),(0,t.jsx)(M.ss,{children:"Fecha"}),(0,t.jsx)(M.ss,{className:"w-[50px]"})]})}),(0,t.jsx)(M.RM,{children:e.map(e=>(0,t.jsxs)(M.SC,{children:[(0,t.jsx)(M.pj,{children:(0,t.jsx)("div",{className:"flex items-center justify-center",children:l(e.type)})}),(0,t.jsx)(M.pj,{children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[e.type===f.rH.FILE&&e.originalFileName&&(0,t.jsxs)("span",{children:[e.originalFileName," â€¢ ",m(e.fileSize)]}),e.type===f.rH.URL&&e.sourceUrl&&(0,t.jsx)("span",{className:"truncate max-w-[200px] inline-block",children:e.sourceUrl}),e.type===f.rH.TEXT&&(0,t.jsx)("span",{children:"Contenido de texto manual"})]}),e.tags.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-1 mt-1",children:[e.tags.slice(0,3).map((e,s)=>(0,t.jsx)(L.C,{variant:"outline",className:"text-xs px-1 py-0",children:e},s)),e.tags.length>3&&(0,t.jsxs)(L.C,{variant:"outline",className:"text-xs px-1 py-0",children:["+",e.tags.length-3]})]})]})}),(0,t.jsxs)(M.pj,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[d(e.status),(0,t.jsx)(L.C,{variant:x(e.status),className:"text-xs",children:f.hQ[e.status]})]}),e.status===f.hC.ERROR&&e.lastError&&(0,t.jsx)("div",{className:"text-xs text-red-500 mt-1 truncate max-w-[150px]",title:e.lastError,children:e.lastError}),(e.status===f.hC.PROCESSING||e.status===f.hC.CHUNKING||e.status===f.hC.EMBEDDING)&&(0,t.jsxs)("div",{className:"mt-1",children:[(0,t.jsx)(C.E,{value:e.processingProgress,className:"h-1 w-20"}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.processingProgress,"%"]})]})]}),(0,t.jsx)(M.pj,{className:"text-center",children:(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("div",{className:"font-medium",children:e.processedChunks}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["de ",e.totalChunks]}),e.failedChunks>0&&(0,t.jsxs)("div",{className:"text-xs text-red-500",children:[e.failedChunks," fallaron"]})]})}),(0,t.jsx)(M.pj,{className:"text-center",children:e.contentQuality?(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsxs)("div",{className:"font-medium",children:[Math.round(100*e.contentQuality),"%"]}),(0,t.jsx)("div",{className:`w-12 h-1 mx-auto rounded-full ${e.contentQuality>.8?"bg-green-500":e.contentQuality>.6?"bg-yellow-500":"bg-red-500"}`})]}):(0,t.jsx)("span",{className:"text-gray-400 text-sm",children:"-"})}),(0,t.jsx)(M.pj,{className:"text-center",children:(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("div",{className:"font-medium",children:e.usageCount}),e.lastUsedAt&&(0,t.jsx)("div",{className:"text-xs text-gray-500",children:h(e.lastUsedAt)})]})}),(0,t.jsx)(M.pj,{children:(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("div",{children:h(e.createdAt)}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["por ",e.createdByName]})]})}),(0,t.jsx)(M.pj,{children:(0,t.jsxs)(k.h_,{children:[(0,t.jsx)(k.$F,{asChild:!0,children:(0,t.jsx)(u.z,{variant:"ghost",className:"h-8 w-8 p-0",children:(0,t.jsx)(P.Z,{className:"h-4 w-4"})})}),(0,t.jsxs)(k.AW,{align:"end",children:[(0,t.jsx)(k.Ju,{children:"Acciones"}),(0,t.jsx)(k.VD,{}),i&&(0,t.jsxs)(k.Xi,{onClick:()=>i(e),children:[(0,t.jsx)(O.Z,{className:"mr-2 h-4 w-4"}),"Ver detalles"]}),r&&e.status!==f.hC.PROCESSING&&(0,t.jsxs)(k.Xi,{onClick:()=>r(e.id),children:[(0,t.jsx)(T.Z,{className:"mr-2 h-4 w-4"}),"Reprocesar"]}),(0,t.jsx)(k.VD,{}),a&&(0,t.jsxs)(k.Xi,{className:"text-red-600",onClick:()=>a(e.id),children:[(0,t.jsx)(D.Z,{className:"mr-2 h-4 w-4"}),"Eliminar"]})]})]})})]},e.id))})]})})]}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(E.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,t.jsx)("h3",{className:"mt-2 text-sm font-semibold text-gray-900",children:"No hay fuentes de conocimiento"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Comienza agregando documentos, URLs o contenido de texto."})]})}var U=a(18218),z=a(99983),G=a(64670),V=a(26378);function B({stats:e}){let s=e.totalChunks>0?Math.round(e.processedChunks/e.totalChunks*100):0,a=e.totalSources>0?Math.round(e.errorSources/e.totalSources*100):0;return(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsxs)(p.Zb,{children:[(0,t.jsxs)(p.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(p.ll,{className:"text-sm font-medium",children:"Fuentes de Conocimiento"}),(0,t.jsx)(E.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(p.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:e.totalSources}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,t.jsxs)(L.C,{variant:"secondary",className:"text-xs",children:[(0,t.jsx)(I.Z,{className:"w-3 h-3 mr-1"}),e.activeSources," activas"]}),e.processingSources>0&&(0,t.jsxs)(L.C,{variant:"outline",className:"text-xs",children:[(0,t.jsx)(w.Z,{className:"w-3 h-3 mr-1"}),e.processingSources," procesando"]})]})]})]}),(0,t.jsxs)(p.Zb,{children:[(0,t.jsxs)(p.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(p.ll,{className:"text-sm font-medium",children:"Fragmentos de Contenido"}),(0,t.jsx)(U.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(p.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:e.totalChunks.toLocaleString()}),(0,t.jsxs)("div",{className:"space-y-2 mt-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,t.jsxs)("span",{children:["Procesados: ",e.processedChunks]}),(0,t.jsxs)("span",{children:[s,"%"]})]}),(0,t.jsx)(C.E,{value:s,className:"h-2"}),e.failedChunks>0&&(0,t.jsxs)("div",{className:"text-xs text-red-500",children:[e.failedChunks," fragmentos fallaron"]})]})]})]}),(0,t.jsxs)(p.Zb,{children:[(0,t.jsxs)(p.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(p.ll,{className:"text-sm font-medium",children:"Uso del Conocimiento"}),(0,t.jsx)(z.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(p.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:e.totalUsage}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.usageThisMonth," consultas este mes"]}),(0,t.jsx)("div",{className:"mt-2",children:e.usageThisMonth>0&&e.totalUsage>0&&(0,t.jsxs)(L.C,{variant:"outline",className:"text-xs",children:[(0,t.jsx)(G.Z,{className:"w-3 h-3 mr-1"}),Math.round(e.usageThisMonth/e.totalUsage*100),"% este mes"]})})]})]}),(0,t.jsxs)(p.Zb,{children:[(0,t.jsxs)(p.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(p.ll,{className:"text-sm font-medium",children:"Calidad del Contenido"}),(0,t.jsx)(V.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(p.aY,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[Math.round(100*e.avgQuality),"%"]}),(0,t.jsxs)("div",{className:"space-y-2 mt-2",children:[(0,t.jsx)(C.E,{value:100*e.avgQuality,className:"h-2"}),(0,t.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Calidad promedio"}),e.errorSources>0&&(0,t.jsxs)("span",{className:"text-red-500 flex items-center gap-1",children:[(0,t.jsx)(b.Z,{className:"w-3 h-3"}),a,"% con errores"]})]})]})]})]}),e.topSources.length>0&&(0,t.jsxs)(p.Zb,{className:"md:col-span-2",children:[(0,t.jsxs)(p.Ol,{children:[(0,t.jsx)(p.ll,{className:"text-lg",children:"Fuentes M\xe1s Utilizadas"}),(0,t.jsx)(p.SZ,{children:"Fuentes de conocimiento que m\xe1s han ayudado a tu IA"})]}),(0,t.jsx)(p.aY,{children:(0,t.jsx)("div",{className:"space-y-3",children:e.topSources.slice(0,3).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${0===s?"bg-yellow-100 text-yellow-800":1===s?"bg-gray-100 text-gray-800":"bg-orange-100 text-orange-800"}`,children:s+1}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[e.usageCount," usos",e.quality&&(0,t.jsxs)("span",{className:"ml-2",children:["â€¢ Calidad: ",Math.round(100*e.quality),"%"]})]})]})]}),(0,t.jsx)(L.C,{variant:"secondary",className:"text-xs",children:e.usageCount})]},e.id))})})]}),e.recentActivity.length>0&&(0,t.jsxs)(p.Zb,{className:"md:col-span-2",children:[(0,t.jsxs)(p.Ol,{children:[(0,t.jsx)(p.ll,{className:"text-lg",children:"Actividad Reciente"}),(0,t.jsx)(p.SZ,{children:"\xdaltimas actualizaciones en el entrenamiento de tu IA"})]}),(0,t.jsx)(p.aY,{children:(0,t.jsx)("div",{className:"space-y-3",children:e.recentActivity.slice(0,5).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-3 p-2",children:[(0,t.jsx)("div",{className:`w-2 h-2 rounded-full ${"ACTIVE"===e.status?"bg-green-500":"ERROR"===e.status?"bg-red-500":"PROCESSING"===e.status?"bg-yellow-500":"bg-gray-500"}`}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"text-sm font-medium truncate",children:e.sourceName}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["created"===e.action?"Fuente creada":"Actualizada"," â€¢ "," ",new Date(e.timestamp).toLocaleDateString("es-ES",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),(0,t.jsx)(L.C,{variant:"ACTIVE"===e.status?"default":"ERROR"===e.status?"destructive":"PROCESSING"===e.status?"secondary":"outline",className:"text-xs",children:e.status.toLowerCase()})]},`${e.id}-${s}`))})})]})]})}var H=a(4464),q=a(64624),Q=a(92230),Y=a(61572),$=a(6488),K=a(90185),W=a(56603),X=a(64990),J=a(27693),ee=a(20357),es=a(25181);let ea={ACTIVE:"bg-green-100 text-green-800",INACTIVE:"bg-gray-100 text-gray-800",TRAINING:"bg-yellow-100 text-yellow-800",ERROR:"bg-red-100 text-red-800"},et={ACTIVE:I.Z,INACTIVE:R.Z,TRAINING:w.Z,ERROR:b.Z},er={COORDINATOR:c.Z,SALES:H.Z,SUPPORT:q.Z,TECHNICAL:Q.Z,MARKETING:U.Z,GENERAL:Y.Z,CUSTOM:$.Z},ei=[{value:"OPENAI",label:"OpenAI (GPT)"},{value:"ANTHROPIC",label:"Anthropic (Claude)"},{value:"GOOGLE",label:"Google (Gemini)"},{value:"COHERE",label:"Cohere"},{value:"HUGGING_FACE",label:"Hugging Face"},{value:"LOCAL",label:"Modelo Local"},{value:"CUSTOM",label:"API Personalizada"}],en=[{value:"COORDINATOR",label:"Coordinador",description:"Agente principal que deriva conversaciones"},{value:"SALES",label:"Ventas",description:"Especializado en ventas y conversiones"},{value:"SUPPORT",label:"Soporte",description:"Especializado en atenci\xf3n al cliente"},{value:"TECHNICAL",label:"T\xe9cnico",description:"Especializado en soporte t\xe9cnico"},{value:"MARKETING",label:"Marketing",description:"Especializado en marketing y promociones"},{value:"GENERAL",label:"General",description:"Prop\xf3sito general"},{value:"CUSTOM",label:"Personalizado",description:"Agente personalizado"}];function el(){let{data:e}=(0,i.useSession)()||{},{toast:s}=(0,N.pm)(),[a,l]=(0,r.useState)([]),[o,d]=(0,r.useState)([]),[j,f]=(0,r.useState)(!0),[E,y]=(0,r.useState)(null),[b,C]=(0,r.useState)(!1),[A,S]=(0,r.useState)(!1),[I,w]=(0,r.useState)(null),[R,P]=(0,r.useState)(!1),[O,M]=(0,r.useState)(!1),[k,F]=(0,r.useState)({name:"",description:"",type:"GENERAL",aiProvider:"OPENAI",aiModel:"gpt-4",systemPrompt:"",isCoordinator:!1,priority:1,knowledgeSourceIds:[]});(0,r.useEffect)(()=>{Z()},[]);let Z=async()=>{try{f(!0);let e=await fetch("/api/rag-agents"),s=await e.json(),a=await fetch("/api/knowledge"),t=await a.json(),r=await fetch("/api/rag-agents/stats"),i=await r.json();s.success&&l(s.data),t.success&&d(t.data.sources||[]),i.success&&y(i.data)}catch(e){console.error("Error loading RAG agents data:",e),s({title:"Error",description:"Error cargando datos",variant:"destructive"})}finally{f(!1)}},_=async()=>{try{P(!0);let e=await fetch("/api/rag-agents",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)}),a=await e.json();a.success?(s({title:"\xc9xito",description:"Agente RAG creado correctamente"}),C(!1),F({name:"",description:"",type:"GENERAL",aiProvider:"OPENAI",aiModel:"gpt-4",systemPrompt:"",isCoordinator:!1,priority:1,knowledgeSourceIds:[]}),Z()):s({title:"Error",description:a.error||"Error creando agente",variant:"destructive"})}catch(e){s({title:"Error",description:"Error de conexi\xf3n",variant:"destructive"})}finally{P(!1)}},U=e=>{w(e),F({name:e.name,description:e.description||"",type:e.type,aiProvider:e.aiProvider,aiModel:e.aiModel,systemPrompt:e.systemPrompt||"",isCoordinator:e.isCoordinator,priority:e.priority,knowledgeSourceIds:[]}),S(!0)},z=async()=>{if(I)try{M(!0);let e=await fetch(`/api/rag-agents/${I.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)}),a=await e.json();a.success?(s({title:"\xc9xito",description:"Agente actualizado correctamente"}),S(!1),w(null),Z()):s({title:"Error",description:a.error||"Error actualizando agente",variant:"destructive"})}catch(e){s({title:"Error",description:"Error de conexi\xf3n",variant:"destructive"})}finally{M(!1)}},G=async(e,a)=>{try{let t="ACTIVE"===a?"INACTIVE":"ACTIVE",r=await fetch(`/api/rag-agents/${e}/toggle`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})}),i=await r.json();i.success?(s({title:"\xc9xito",description:`Agente ${"ACTIVE"===t?"activado":"desactivado"}`}),Z()):s({title:"Error",description:i.error||"Error cambiando estado",variant:"destructive"})}catch(e){s({title:"Error",description:"Error de conexi\xf3n",variant:"destructive"})}},B=async e=>{if(confirm("\xbfEst\xe1s seguro de que quieres eliminar este agente? Esta acci\xf3n no se puede deshacer."))try{let a=await fetch(`/api/rag-agents/${e}`,{method:"DELETE"}),t=await a.json();t.success?(s({title:"\xc9xito",description:"Agente eliminado correctamente"}),Z()):s({title:"Error",description:t.error||"Error eliminando agente",variant:"destructive"})}catch(e){s({title:"Error",description:"Error de conexi\xf3n",variant:"destructive"})}};if(j)return(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)(T.Z,{className:"h-8 w-8 animate-spin"})});let q=a.find(e=>e.isCoordinator);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Agentes RAG Inteligentes"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Sistema avanzado de m\xfaltiples agentes especializados con IA"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(u.z,{onClick:Z,variant:"outline",children:[(0,t.jsx)(T.Z,{className:"h-4 w-4 mr-2"}),"Actualizar"]}),(0,t.jsxs)(v.Vq,{open:b,onOpenChange:C,children:[(0,t.jsx)(v.hg,{asChild:!0,children:(0,t.jsxs)(u.z,{children:[(0,t.jsx)(n.Z,{className:"h-4 w-4 mr-2"}),"Nuevo Agente"]})}),(0,t.jsxs)(v.cZ,{className:"sm:max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(v.fK,{children:[(0,t.jsx)(v.$N,{children:"Crear Agente RAG"}),(0,t.jsx)(v.Be,{children:"Configura un nuevo agente especializado con IA espec\xedfica"})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{htmlFor:"name",children:"Nombre del Agente *"}),(0,t.jsx)(x.I,{id:"name",placeholder:"Agente de Ventas",value:k.name,onChange:e=>F(s=>({...s,name:e.target.value}))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{htmlFor:"description",children:"Descripci\xf3n"}),(0,t.jsx)(h.g,{id:"description",placeholder:"Descripci\xf3n del agente...",value:k.description,onChange:e=>F(s=>({...s,description:e.target.value}))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{htmlFor:"type",children:"Tipo de Agente *"}),(0,t.jsxs)(g.Ph,{value:k.type,onValueChange:e=>F(s=>({...s,type:e})),children:[(0,t.jsx)(g.i4,{children:(0,t.jsx)(g.ki,{})}),(0,t.jsx)(g.Bw,{children:en.map(e=>(0,t.jsx)(g.Ql,{value:e.value,children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{children:e.label}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:e.description})]})},e.value))})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{htmlFor:"aiProvider",children:"Proveedor de IA *"}),(0,t.jsxs)(g.Ph,{value:k.aiProvider,onValueChange:e=>F(s=>({...s,aiProvider:e})),children:[(0,t.jsx)(g.i4,{children:(0,t.jsx)(g.ki,{})}),(0,t.jsx)(g.Bw,{children:ei.map(e=>(0,t.jsx)(g.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{htmlFor:"aiModel",children:"Modelo de IA *"}),(0,t.jsx)(x.I,{id:"aiModel",placeholder:"gpt-4, claude-3, etc.",value:k.aiModel,onChange:e=>F(s=>({...s,aiModel:e.target.value}))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{htmlFor:"systemPrompt",children:"Prompt del Sistema"}),(0,t.jsx)(h.g,{id:"systemPrompt",placeholder:"Eres un agente especializado en...",rows:3,value:k.systemPrompt,onChange:e=>F(s=>({...s,systemPrompt:e.target.value}))})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(es.Switch,{id:"isCoordinator",checked:k.isCoordinator,onCheckedChange:e=>F(s=>({...s,isCoordinator:e}))}),(0,t.jsx)(m.Label,{htmlFor:"isCoordinator",children:"Agente Coordinador Principal"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{htmlFor:"priority",children:"Prioridad (1-10)"}),(0,t.jsx)(x.I,{id:"priority",type:"number",min:"1",max:"10",value:k.priority,onChange:e=>F(s=>({...s,priority:parseInt(e.target.value)}))})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(u.z,{variant:"outline",onClick:()=>C(!1),children:"Cancelar"}),(0,t.jsx)(u.z,{onClick:_,disabled:R,children:R?"Creando...":"Crear Agente"})]})]})]})]})]}),E&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsx)(p.Zb,{children:(0,t.jsxs)(p.aY,{className:"flex items-center justify-between p-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Agentes Activos"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:E.activeAgents||0})]}),(0,t.jsx)(Y.Z,{className:"h-8 w-8 text-blue-500"})]})}),(0,t.jsx)(p.Zb,{children:(0,t.jsxs)(p.aY,{className:"flex items-center justify-between p-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Conversaciones"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:E.totalConversations||0})]}),(0,t.jsx)(K.Z,{className:"h-8 w-8 text-green-500"})]})}),(0,t.jsx)(p.Zb,{children:(0,t.jsxs)(p.aY,{className:"flex items-center justify-between p-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Mensajes"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:E.totalMessages||0})]}),(0,t.jsx)(V.Z,{className:"h-8 w-8 text-purple-500"})]})}),(0,t.jsx)(p.Zb,{children:(0,t.jsxs)(p.aY,{className:"flex items-center justify-between p-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Rating Promedio"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:E.averageRating?E.averageRating.toFixed(1):"â€”"})]}),(0,t.jsx)(H.Z,{className:"h-8 w-8 text-yellow-500"})]})})]}),q&&(0,t.jsxs)(p.Zb,{className:"border-blue-200 bg-blue-50",children:[(0,t.jsx)(p.Ol,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,t.jsx)(c.Z,{className:"h-6 w-6 text-blue-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(p.ll,{className:"text-blue-900",children:"Agente Coordinador Principal"}),(0,t.jsxs)(p.SZ,{className:"text-blue-700",children:[q.name," - ",q.description]})]})]}),(0,t.jsx)(L.C,{className:"bg-blue-100 text-blue-800",children:"Coordinador"})]})}),(0,t.jsx)(p.aY,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-blue-600",children:"Proveedor:"}),(0,t.jsx)("p",{className:"font-medium",children:q.aiProvider})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-blue-600",children:"Modelo:"}),(0,t.jsx)("p",{className:"font-medium",children:q.aiModel})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-blue-600",children:"Conversaciones:"}),(0,t.jsx)("p",{className:"font-medium",children:q.totalConversations})]})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(u.z,{variant:"outline",size:"sm",onClick:()=>U(q),children:(0,t.jsx)($.Z,{className:"h-4 w-4"})}),(0,t.jsx)(u.z,{variant:"outline",size:"sm",onClick:()=>G(q.id,q.status),children:"ACTIVE"===q.status?(0,t.jsx)(W.Z,{className:"h-4 w-4"}):(0,t.jsx)(X.Z,{className:"h-4 w-4"})})]})]})})]}),(0,t.jsxs)(p.Zb,{children:[(0,t.jsxs)(p.Ol,{children:[(0,t.jsx)(p.ll,{children:"Agentes Especializados"}),(0,t.jsx)(p.SZ,{children:"Agentes especializados para diferentes funciones de tu negocio"})]}),(0,t.jsx)(p.aY,{children:0===a.filter(e=>!e.isCoordinator).length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(J.Z,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-500",children:"No hay agentes especializados configurados"}),(0,t.jsx)(u.z,{className:"mt-4",onClick:()=>C(!0),children:"Crear Primer Agente"})]}):(0,t.jsx)("div",{className:"space-y-4",children:a.filter(e=>!e.isCoordinator).map(e=>{let s=et[e.status],a=er[e.type]||Y.Z;return(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"p-2 bg-gray-100 rounded-lg",children:(0,t.jsx)(a,{className:"h-5 w-5 text-gray-600"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("h3",{className:"font-medium",children:e.name}),(0,t.jsxs)(L.C,{className:ea[e.status],children:[(0,t.jsx)(s,{className:"h-3 w-3 mr-1"}),e.status]}),(0,t.jsx)(L.C,{variant:"outline",className:"text-xs",children:e.type})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description||"Sin descripci\xf3n"}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500 mt-2",children:[(0,t.jsxs)("span",{children:[e.aiProvider," â€¢ ",e.aiModel]}),(0,t.jsxs)("span",{children:[e.totalConversations," conversaciones"]}),(0,t.jsxs)("span",{children:[e.totalMessages," mensajes"]}),e.averageRating&&(0,t.jsxs)("span",{children:["â˜… ",e.averageRating.toFixed(1)]})]})]})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(u.z,{variant:"outline",size:"sm",onClick:()=>U(e),children:(0,t.jsx)(ee.Z,{className:"h-4 w-4"})}),(0,t.jsx)(u.z,{variant:"outline",size:"sm",onClick:()=>G(e.id,e.status),children:"ACTIVE"===e.status?(0,t.jsx)(W.Z,{className:"h-4 w-4"}):(0,t.jsx)(X.Z,{className:"h-4 w-4"})}),(0,t.jsx)(u.z,{variant:"outline",size:"sm",onClick:()=>B(e.id),className:"text-red-600 hover:text-red-700",children:(0,t.jsx)(D.Z,{className:"h-4 w-4"})})]})]},e.id)})})})]}),(0,t.jsx)(v.Vq,{open:A,onOpenChange:S,children:(0,t.jsxs)(v.cZ,{className:"sm:max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(v.fK,{children:[(0,t.jsx)(v.$N,{children:"Editar Agente RAG"}),(0,t.jsx)(v.Be,{children:"Modifica la configuraci\xf3n del agente"})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{htmlFor:"edit-name",children:"Nombre del Agente *"}),(0,t.jsx)(x.I,{id:"edit-name",value:k.name,onChange:e=>F(s=>({...s,name:e.target.value}))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{htmlFor:"edit-description",children:"Descripci\xf3n"}),(0,t.jsx)(h.g,{id:"edit-description",value:k.description,onChange:e=>F(s=>({...s,description:e.target.value}))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{htmlFor:"edit-type",children:"Tipo de Agente *"}),(0,t.jsxs)(g.Ph,{value:k.type,onValueChange:e=>F(s=>({...s,type:e})),children:[(0,t.jsx)(g.i4,{children:(0,t.jsx)(g.ki,{})}),(0,t.jsx)(g.Bw,{children:en.map(e=>(0,t.jsx)(g.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{htmlFor:"edit-aiProvider",children:"Proveedor de IA *"}),(0,t.jsxs)(g.Ph,{value:k.aiProvider,onValueChange:e=>F(s=>({...s,aiProvider:e})),children:[(0,t.jsx)(g.i4,{children:(0,t.jsx)(g.ki,{})}),(0,t.jsx)(g.Bw,{children:ei.map(e=>(0,t.jsx)(g.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{htmlFor:"edit-aiModel",children:"Modelo de IA *"}),(0,t.jsx)(x.I,{id:"edit-aiModel",value:k.aiModel,onChange:e=>F(s=>({...s,aiModel:e.target.value}))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{htmlFor:"edit-systemPrompt",children:"Prompt del Sistema"}),(0,t.jsx)(h.g,{id:"edit-systemPrompt",rows:3,value:k.systemPrompt,onChange:e=>F(s=>({...s,systemPrompt:e.target.value}))})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(es.Switch,{id:"edit-isCoordinator",checked:k.isCoordinator,onCheckedChange:e=>F(s=>({...s,isCoordinator:e}))}),(0,t.jsx)(m.Label,{htmlFor:"edit-isCoordinator",children:"Agente Coordinador Principal"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{htmlFor:"edit-priority",children:"Prioridad (1-10)"}),(0,t.jsx)(x.I,{id:"edit-priority",type:"number",min:"1",max:"10",value:k.priority,onChange:e=>F(s=>({...s,priority:parseInt(e.target.value)}))})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(u.z,{variant:"outline",onClick:()=>S(!1),children:"Cancelar"}),(0,t.jsx)(u.z,{onClick:z,disabled:O,children:O?"Actualizando...":"Actualizar"})]})]})})]})}function ec(){let{data:e}=(0,i.useSession)()||{},{toast:s}=(0,N.pm)(),[a,E]=(0,r.useState)([]),[y,b]=(0,r.useState)(null),[C,A]=(0,r.useState)(!0),[I,w]=(0,r.useState)(""),[R,T]=(0,r.useState)("all"),[P,O]=(0,r.useState)("all"),[D,L]=(0,r.useState)(!1),[M,k]=(0,r.useState)(!1),[F,Z]=(0,r.useState)(!1),[U,z]=(0,r.useState)(!1),[G,V]=(0,r.useState)(!1),[H,q]=(0,r.useState)({url:"",name:"",tags:""}),[Q,Y]=(0,r.useState)({name:"",content:"",tags:""});(0,r.useEffect)(()=>{$(),K()},[]);let $=async()=>{try{A(!0);let e=new URLSearchParams;I&&e.set("search",I),"all"!==R&&e.set("status",R),"all"!==P&&e.set("type",P);let a=await fetch(`/api/knowledge?${e}`),t=await a.json();t.success?E(t.data.sources):s({title:"Error",description:t.error||"Error cargando fuentes",variant:"destructive"})}catch(e){console.error("Error loading sources:",e),s({title:"Error",description:"Error de conexi\xf3n",variant:"destructive"})}finally{A(!1)}},K=async()=>{try{let e=await fetch("/api/knowledge/stats"),s=await e.json();s.success&&b(s.data)}catch(e){console.error("Error loading stats:",e)}};(0,r.useEffect)(()=>{let e=setTimeout(()=>{$()},500);return()=>clearTimeout(e)},[I,R,P]);let W=(0,r.useCallback)(e=>{E(s=>[e,...s]),L(!1),z(!1),s({title:"\xc9xito",description:"Archivo subido correctamente. El procesamiento comenzar\xe1 en breve."}),K()},[s]),X=async()=>{if(!H.url||!H.name){s({title:"Error",description:"URL y nombre son requeridos",variant:"destructive"});return}try{V(!0);let e=await fetch("/api/knowledge",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:H.name,type:f.rH.URL,sourceUrl:H.url,tags:H.tags.split(",").map(e=>e.trim()).filter(e=>e)})}),a=await e.json();a.success?(E(e=>[a.data.source,...e]),k(!1),q({url:"",name:"",tags:""}),s({title:"\xc9xito",description:"URL agregada correctamente. Procesamiento iniciado."}),K()):s({title:"Error",description:a.error||"Error agregando URL",variant:"destructive"})}catch(e){s({title:"Error",description:"Error de conexi\xf3n",variant:"destructive"})}finally{V(!1)}},J=async()=>{if(!Q.name||!Q.content){s({title:"Error",description:"Nombre y contenido son requeridos",variant:"destructive"});return}try{V(!0);let e=await fetch("/api/knowledge",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Q.name,type:f.rH.TEXT,textContent:Q.content,tags:Q.tags.split(",").map(e=>e.trim()).filter(e=>e)})}),a=await e.json();a.success?(E(e=>[a.data.source,...e]),Z(!1),Y({name:"",content:"",tags:""}),s({title:"\xc9xito",description:"Contenido agregado correctamente. Procesamiento iniciado."}),K()):s({title:"Error",description:a.error||"Error agregando contenido",variant:"destructive"})}catch(e){s({title:"Error",description:"Error de conexi\xf3n",variant:"destructive"})}finally{V(!1)}},ee=async e=>{if(confirm("\xbfEst\xe1s seguro de que quieres eliminar esta fuente? Esta acci\xf3n no se puede deshacer."))try{let a=await fetch(`/api/knowledge/${e}`,{method:"DELETE"}),t=await a.json();t.success?(E(s=>s.filter(s=>s.id!==e)),s({title:"\xc9xito",description:"Fuente eliminada correctamente"}),K()):s({title:"Error",description:t.error||"Error eliminando fuente",variant:"destructive"})}catch(e){s({title:"Error",description:"Error de conexi\xf3n",variant:"destructive"})}},es=async e=>{try{let a=await fetch(`/api/knowledge/${e}/process`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({forceReprocess:!0})}),t=await a.json();t.success?(s({title:"\xc9xito",description:"Reprocesamiento iniciado"}),E(s=>s.map(s=>s.id===e?{...s,status:f.hC.PROCESSING}:s))):s({title:"Error",description:t.error||"Error reprocesando fuente",variant:"destructive"})}catch(e){s({title:"Error",description:"Error de conexi\xf3n",variant:"destructive"})}};return(0,t.jsxs)("div",{className:"container mx-auto py-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Base de Conocimiento Avanzada"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Sistema inteligente de m\xfaltiples agentes RAG especializados con diferentes proveedores de IA"})]}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsxs)(v.Vq,{open:D,onOpenChange:L,children:[(0,t.jsx)(v.hg,{asChild:!0,children:(0,t.jsxs)(u.z,{children:[(0,t.jsx)(n.Z,{className:"h-4 w-4 mr-2"}),"Agregar Conocimiento"]})}),(0,t.jsxs)(v.cZ,{className:"sm:max-w-md",children:[(0,t.jsxs)(v.fK,{children:[(0,t.jsx)(v.$N,{children:"Agregar Fuente de Conocimiento"}),(0,t.jsx)(v.Be,{children:"Elige el tipo de contenido que quieres agregar a tu base de conocimiento."})]}),(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)(u.z,{variant:"outline",className:"h-20 flex flex-col gap-2",onClick:()=>{L(!1),z(!0)},children:[(0,t.jsx)(l.Z,{className:"h-6 w-6"}),(0,t.jsx)("span",{children:"Subir Archivo"}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"PDF, DOC, TXT"})]}),(0,t.jsxs)(u.z,{variant:"outline",className:"h-20 flex flex-col gap-2",onClick:()=>{L(!1),k(!0)},children:[(0,t.jsx)(c.Z,{className:"h-6 w-6"}),(0,t.jsx)("span",{children:"P\xe1gina Web"}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"URL o sitio web"})]}),(0,t.jsxs)(u.z,{variant:"outline",className:"h-20 flex flex-col gap-2",onClick:()=>{L(!1),Z(!0)},children:[(0,t.jsx)(o.Z,{className:"h-6 w-6"}),(0,t.jsx)("span",{children:"Texto Manual"}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Escribir directamente"})]})]})]})]})})]}),(0,t.jsxs)(j.Tabs,{defaultValue:"agents",className:"space-y-6",children:[(0,t.jsxs)(j.TabsList,{className:"grid w-full grid-cols-2",children:[(0,t.jsx)(j.TabsTrigger,{value:"agents",children:"Agentes RAG Inteligentes"}),(0,t.jsx)(j.TabsTrigger,{value:"sources",children:"Fuentes de Conocimiento"})]}),(0,t.jsx)(j.TabsContent,{value:"agents",className:"space-y-6",children:(0,t.jsx)(el,{})}),(0,t.jsxs)(j.TabsContent,{value:"sources",className:"space-y-6",children:[y&&(0,t.jsx)(B,{stats:y}),(0,t.jsxs)(p.Zb,{children:[(0,t.jsx)(p.Ol,{children:(0,t.jsx)(p.ll,{className:"text-lg",children:"Fuentes de Conocimiento"})}),(0,t.jsxs)(p.aY,{children:[(0,t.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(d.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,t.jsx)(x.I,{placeholder:"Buscar fuentes...",value:I,onChange:e=>w(e.target.value),className:"pl-10"})]})}),(0,t.jsxs)(g.Ph,{value:R,onValueChange:T,children:[(0,t.jsx)(g.i4,{className:"w-48",children:(0,t.jsx)(g.ki,{placeholder:"Filtrar por estado"})}),(0,t.jsxs)(g.Bw,{children:[(0,t.jsx)(g.Ql,{value:"all",children:"Todos los estados"}),(0,t.jsx)(g.Ql,{value:"ACTIVE",children:"Activo"}),(0,t.jsx)(g.Ql,{value:"PROCESSING,CHUNKING,EMBEDDING",children:"Procesando"}),(0,t.jsx)(g.Ql,{value:"ERROR",children:"Con Error"}),(0,t.jsx)(g.Ql,{value:"DISABLED",children:"Deshabilitado"})]})]}),(0,t.jsxs)(g.Ph,{value:P,onValueChange:O,children:[(0,t.jsx)(g.i4,{className:"w-48",children:(0,t.jsx)(g.ki,{placeholder:"Filtrar por tipo"})}),(0,t.jsxs)(g.Bw,{children:[(0,t.jsx)(g.Ql,{value:"all",children:"Todos los tipos"}),(0,t.jsx)(g.Ql,{value:"FILE",children:"Archivos"}),(0,t.jsx)(g.Ql,{value:"URL",children:"URLs"}),(0,t.jsx)(g.Ql,{value:"TEXT",children:"Texto"})]})]})]}),(0,t.jsx)(_,{sources:a,loading:C,onDelete:ee,onReprocess:es,onRefresh:$})]})]}),(0,t.jsx)(v.Vq,{open:M,onOpenChange:k,children:(0,t.jsxs)(v.cZ,{className:"sm:max-w-md",children:[(0,t.jsxs)(v.fK,{children:[(0,t.jsx)(v.$N,{children:"Agregar P\xe1gina Web"}),(0,t.jsx)(v.Be,{children:"Agrega una URL para que nuestra IA extraiga el contenido autom\xe1ticamente."})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{htmlFor:"url",children:"URL *"}),(0,t.jsx)(x.I,{id:"url",placeholder:"https://ejemplo.com",value:H.url,onChange:e=>q(s=>({...s,url:e.target.value}))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{htmlFor:"url-name",children:"Nombre *"}),(0,t.jsx)(x.I,{id:"url-name",placeholder:"Mi sitio web",value:H.name,onChange:e=>q(s=>({...s,name:e.target.value}))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{htmlFor:"url-tags",children:"Etiquetas (opcional)"}),(0,t.jsx)(x.I,{id:"url-tags",placeholder:"web, productos, precios",value:H.tags,onChange:e=>q(s=>({...s,tags:e.target.value}))})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(u.z,{variant:"outline",onClick:()=>k(!1),children:"Cancelar"}),(0,t.jsx)(u.z,{onClick:X,disabled:G,children:G?"Procesando...":"Agregar URL"})]})]})}),(0,t.jsx)(v.Vq,{open:F,onOpenChange:Z,children:(0,t.jsxs)(v.cZ,{className:"sm:max-w-2xl",children:[(0,t.jsxs)(v.fK,{children:[(0,t.jsx)(v.$N,{children:"Agregar Contenido de Texto"}),(0,t.jsx)(v.Be,{children:"Escribe o pega el contenido que quieres que tu IA aprenda."})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{htmlFor:"text-name",children:"Nombre *"}),(0,t.jsx)(x.I,{id:"text-name",placeholder:"Mi documento de texto",value:Q.name,onChange:e=>Y(s=>({...s,name:e.target.value}))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{htmlFor:"text-content",children:"Contenido *"}),(0,t.jsx)(h.g,{id:"text-content",placeholder:"Escribe aqu\xed el contenido que quieres que tu IA aprenda...",rows:10,value:Q.content,onChange:e=>Y(s=>({...s,content:e.target.value}))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{htmlFor:"text-tags",children:"Etiquetas (opcional)"}),(0,t.jsx)(x.I,{id:"text-tags",placeholder:"manual, gu\xeda, procedimientos",value:Q.tags,onChange:e=>Y(s=>({...s,tags:e.target.value}))})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(u.z,{variant:"outline",onClick:()=>Z(!1),children:"Cancelar"}),(0,t.jsx)(u.z,{onClick:J,disabled:G,children:G?"Procesando...":"Agregar Contenido"})]})]})}),(0,t.jsx)(v.Vq,{open:U,onOpenChange:z,children:(0,t.jsxs)(v.cZ,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(v.fK,{children:[(0,t.jsx)(v.$N,{children:"Subir Documentos"}),(0,t.jsx)(v.Be,{children:"Sube documentos PDF, DOC, TXT u otros archivos para entrenar tu IA."})]}),(0,t.jsx)("div",{className:"py-4",children:(0,t.jsx)(S,{onUploadSuccess:W,onCancel:()=>z(!1)})})]})})]})]})]})}},2422:function(e,s,a){"use strict";a.d(s,{d:function(){return c},z:function(){return o}});var t=a(15444),r=a(89300),i=a(21030),n=a(2371),l=a(65522);let c=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef(({className:e,variant:s,size:a,asChild:r=!1,...n},o)=>{let d=r?i.g7:"button";return(0,t.jsx)(d,{className:(0,l.cn)(c({variant:s,size:a,className:e})),ref:o,...n})});o.displayName="Button"},37108:function(e,s,a){"use strict";a.d(s,{E:function(){return l}});var t=a(15444),r=a(89300),i=a(25052),n=a(65522);let l=r.forwardRef(({className:e,value:s,...a},r)=>(0,t.jsx)(i.fC,{ref:r,className:(0,n.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...a,children:(0,t.jsx)(i.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));l.displayName=i.fC.displayName},25181:function(e,s,a){"use strict";a.d(s,{Switch:function(){return l}});var t=a(15444),r=a(89300),i=a(62312),n=a(65522);let l=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(i.fC,{className:(0,n.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,ref:a,children:(0,t.jsx)(i.bU,{className:(0,n.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));l.displayName=i.fC.displayName},79507:function(e,s,a){"use strict";a.d(s,{RM:function(){return c},SC:function(){return o},iA:function(){return n},pj:function(){return u},ss:function(){return d},xD:function(){return l}});var t=a(15444),r=a(89300),i=a(65522);let n=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:a,className:(0,i.cn)("w-full caption-bottom text-sm",e),...s})}));n.displayName="Table";let l=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("thead",{ref:a,className:(0,i.cn)("[&_tr]:border-b",e),...s}));l.displayName="TableHeader";let c=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("tbody",{ref:a,className:(0,i.cn)("[&_tr:last-child]:border-0",e),...s}));c.displayName="TableBody",r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("tfoot",{ref:a,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...s})).displayName="TableFooter";let o=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("tr",{ref:a,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...s}));o.displayName="TableRow";let d=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("th",{ref:a,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...s}));d.displayName="TableHead";let u=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("td",{ref:a,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...s}));u.displayName="TableCell",r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("caption",{ref:a,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",e),...s})).displayName="TableCaption"},86765:function(e,s,a){"use strict";a.d(s,{Tabs:function(){return l},TabsContent:function(){return d},TabsList:function(){return c},TabsTrigger:function(){return o}});var t=a(15444),r=a(89300),i=a(84018),n=a(65522);let l=i.fC,c=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(i.aV,{ref:a,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));c.displayName=i.aV.displayName;let o=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(i.xz,{ref:a,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));o.displayName=i.xz.displayName;let d=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(i.VY,{ref:a,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));d.displayName=i.VY.displayName},67012:function(e,s,a){"use strict";a.d(s,{g:function(){return n}});var t=a(15444),r=a(89300),i=a(65522);let n=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));n.displayName="Textarea"},33186:function(e,s,a){"use strict";a.d(s,{BT:function(){return i.AutomationActionType},C2:function(){return R},DX:function(){return A},Dn:function(){return S},ED:function(){return h},Eb:function(){return v},FQ:function(){return N},Go:function(){return l},Jg:function(){return p},Om:function(){return u},Pg:function(){return y},Rh:function(){return w},Rn:function(){return g},Sn:function(){return o},UM:function(){return P},Ug:function(){return b},Vb:function(){return i.AutomationConditionType},WC:function(){return c},WV:function(){return C},WY:function(){return n},aE:function(){return x},d1:function(){return j},fB:function(){return d},hC:function(){return i.KnowledgeSourceStatus},hQ:function(){return f},mT:function(){return T},n9:function(){return m},rH:function(){return i.KnowledgeSourceType},uU:function(){return I},wu:function(){return O},ym:function(){return E}});var t,r,i=a(51181);(t=r||(r={})).INSUFFICIENT_BALANCE="INSUFFICIENT_BALANCE",t.NO_PROVIDER_AVAILABLE="NO_PROVIDER_AVAILABLE",t.PROVIDER_ERROR="PROVIDER_ERROR",t.INVALID_REQUEST="INVALID_REQUEST",t.RATE_LIMIT_EXCEEDED="RATE_LIMIT_EXCEEDED",t.INTERNAL_ERROR="INTERNAL_ERROR";let n={OPEN:"Abierta",PENDING:"Pendiente",RESOLVED:"Resuelta",TRANSFERRED:"Transferida",ARCHIVED:"Archivada"},l={LOW:"Baja",MEDIUM:"Media",HIGH:"Alta",URGENT:"Urgente"},c={LOW:"gray",MEDIUM:"blue",HIGH:"orange",URGENT:"red"},o={QR_CODE:"Conexi\xf3n R\xe1pida (QR)",API_OFFICIAL:"Conexi\xf3n Profesional (API)"},d={DISCONNECTED:"Desconectado",CONNECTING:"Conectando",CONNECTED:"Conectado",ERROR:"Error",EXPIRED:"Expirado"},u={DISCONNECTED:"gray",CONNECTING:"yellow",CONNECTED:"green",ERROR:"red",EXPIRED:"orange"},x={image:["image/jpeg","image/png","image/gif","image/webp"],document:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain"],video:["video/mp4","video/avi","video/mov","video/wmv"],audio:["audio/mp3","audio/wav","audio/aac","audio/ogg"]},m={image:10485760,document:52428800,video:104857600,audio:20971520},h={SALES:"Ventas",SUPPORT:"Soporte",QUESTION:"Pregunta",COMPLAINT:"Queja",BOOKING:"Reserva",PAYMENT:"Pago",INFORMATION:"Informaci\xf3n",GREETING:"Saludo",FAREWELL:"Despedida",OTHER:"Otro"},p={SALES:"green",SUPPORT:"blue",QUESTION:"yellow",COMPLAINT:"red",BOOKING:"purple",PAYMENT:"orange",INFORMATION:"cyan",GREETING:"teal",FAREWELL:"gray",OTHER:"slate"},j={INTENTION_DETECTED:"Intenci\xf3n detectada",KEYWORDS_CONTAINS:"Contiene palabras clave",SENDER_IS_VIP:"Remitente es VIP",TIME_RANGE:"Horario espec\xedfico",FIRST_MESSAGE:"Primer mensaje",MESSAGE_COUNT:"N\xfamero de mensajes",RESPONSE_TIME:"Tiempo de respuesta"},g={ADD_TAG:"Agregar etiqueta",ASSIGN_AGENT:"Asignar agente",SET_PRIORITY:"Establecer prioridad",AUTO_REPLY:"Respuesta autom\xe1tica",MARK_VIP:"Marcar como VIP",TRANSFER_CONVERSATION:"Transferir conversaci\xf3n",CREATE_TASK:"Crear tarea",SEND_NOTIFICATION:"Enviar notificaci\xf3n"},v={pdf:["application/pdf"],document:["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],text:["text/plain","text/markdown","text/csv"],web:["text/html"]},N=52428800,f={UPLOADING:"Subiendo",PROCESSING:"Procesando",CHUNKING:"Fragmentando",EMBEDDING:"Generando Embeddings",ACTIVE:"Activo",ERROR:"Error",DISABLED:"Deshabilitado"},E={ECOMMERCE:"E-commerce",CRM:"CRM",ERP:"ERP",PAYMENT:"Pagos",ANALYTICS:"An\xe1lisis",MARKETING:"Marketing",SOCIAL_MEDIA:"Redes Sociales",EMAIL:"Email Marketing",SUPPORT:"Soporte",OTHER:"Otros"},y={AVAILABLE:"Disponible",CONNECTED:"Conectado",DISCONNECTED:"Desconectado",ERROR:"Error",PENDING:"Pendiente"},b={SHOPIFY:{displayName:"Shopify",description:"Conecta tu tienda Shopify para consultar productos, pedidos e inventario",authType:"oauth",authFields:["shop_domain","access_token"],iconUrl:"/integrations/shopify.svg",brandColor:"#7AB55C",supportedFeatures:["products","orders","customers","inventory"],documentation:"https://docs.shopify.com/api"},WOOCOMMERCE:{displayName:"WooCommerce",description:"Conecta tu tienda WooCommerce para gestionar productos y pedidos",authType:"api_key",authFields:["site_url","consumer_key","consumer_secret"],iconUrl:"/integrations/woocommerce.svg",brandColor:"#7F54B3",supportedFeatures:["products","orders","customers"],documentation:"https://woocommerce.github.io/woocommerce-rest-api-docs/"},TIENDANUBE:{displayName:"TiendaNube",description:"Conecta tu tienda TiendaNube para sincronizar cat\xe1logo y pedidos",authType:"oauth",authFields:["store_id","access_token"],iconUrl:"/integrations/tiendanube.svg",brandColor:"#FF6900",supportedFeatures:["products","orders","customers"],documentation:"https://developers.tiendanube.com/"}},C={PENDING:"Pendiente",APPROVED:"Aprobada",REJECTED:"Rechazada",PAUSED:"Pausada",ARCHIVED:"Archivada"},A={PENDING:"yellow",APPROVED:"green",REJECTED:"red",PAUSED:"orange",ARCHIVED:"gray"},S={DRAFT:"Borrador",SCHEDULED:"Programada",SENDING:"Enviando",COMPLETED:"Completada",PAUSED:"Pausada",CANCELLED:"Cancelada",FAILED:"Fallida"},I={DRAFT:"gray",SCHEDULED:"blue",SENDING:"yellow",COMPLETED:"green",PAUSED:"orange",CANCELLED:"red",FAILED:"red"},w={IMMEDIATE:"Inmediato",SCHEDULED:"Programado",DRIP:"Secuencial",AB_TEST:"Prueba A/B",WHATSAPP_BUSINESS:"WhatsApp Business",WHATSAPP_API:"WhatsApp API"},R={IMMEDIATE:"Env\xedo inmediato a todos los destinatarios",SCHEDULED:"Env\xedo programado para una fecha espec\xedfica",DRIP:"Env\xedo secuencial con intervalos definidos",AB_TEST:"Prueba diferentes versiones del mensaje",WHATSAPP_BUSINESS:"M\xe1ximo 40 mensajes diarios, cualquier contenido (texto/imagen/video/audio)",WHATSAPP_API:"Env\xedo ilimitado, solo plantillas verificadas por Meta"},T={INCLUDE_TAG:"Incluir etiqueta",EXCLUDE_TAG:"Excluir etiqueta",CHANNEL:"Canal de origen",VIP_STATUS:"Estado VIP",LAST_CONTACT:"\xdaltimo contacto",CONVERSATION_STATUS:"Estado de conversaci\xf3n"},P={SEND_RATE:10,BATCH_SIZE:100,RETRY_ATTEMPTS:3,PREVIEW_SAMPLE_SIZE:20,PREVIEW_EXPIRATION_HOURS:24},O={BUSINESS:{MAX_DAILY_MESSAGES:40,SEND_RATE:2,BATCH_SIZE:10,REQUIRES_VERIFICATION:!1,SUPPORTS_RICH_MEDIA:!0},API:{MAX_DAILY_MESSAGES:null,SEND_RATE:50,BATCH_SIZE:500,REQUIRES_VERIFICATION:!0,SUPPORTS_RICH_MEDIA:!0}}},65522:function(e,s,a){"use strict";a.d(s,{cn:function(){return i}});var t=a(32191),r=a(23607);function i(...e){return(0,r.m6)((0,t.W)(e))}}},function(e){e.O(0,[6539,5762,688,8077,8151,4018,822,1181,2578,9972,9558,4198,2386,7156,1744],function(){return e(e.s=97454)}),_N_E=e.O()}]);