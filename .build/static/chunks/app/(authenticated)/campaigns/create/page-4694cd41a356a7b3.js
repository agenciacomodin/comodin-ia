(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3846],{7874:function(e,a,s){Promise.resolve().then(s.bind(s,20033))},20033:function(e,a,s){"use strict";s.d(a,{default:function(){return w}});var t=s(15444),r=s(89300),n=s(99827),i=s(2422),l=s(61335),c=s(74678),d=s(34635),o=s(67012),u=s(70489),m=s(37108),p=s(56948),x=s(26771),h=s(6488),f=s(64624),g=s(75012),N=s(66124),v=s(51137),j=s(23572),E=s(62492),b=s(18218),y=s(66772),C=s(81178),R=s(80586),I=s(45053),A=s(95854),T=s(79047),S=s(33186),D=s(49911);function w({onCampaignCreated:e}){let[a,s]=(0,r.useState)(0),[l,c]=(0,r.useState)([]),[d,o]=(0,r.useState)(!0),[u,p]=(0,r.useState)(!1),{toast:y}=(0,A.pm)(),C=(0,T.useRouter)(),[R,I]=(0,r.useState)({type:"IMMEDIATE",sendRate:S.UM.SEND_RATE,batchSize:S.UM.BATCH_SIZE,timezone:"America/Mexico_City"}),[D,w]=(0,r.useState)(null),[M,U]=(0,r.useState)([]),[Z,k]=(0,r.useState)(null),[V,G]=(0,r.useState)({}),H=[{id:"template",title:"Seleccionar Plantilla",description:"Elige la plantilla de mensaje pre-aprobada",icon:x.Z,isCompleted:!!D},{id:"basic",title:"Informaci\xf3n B\xe1sica",description:"Configura los detalles b\xe1sicos de la campa\xf1a",icon:h.Z,isCompleted:!!R.name&&!!R.type},{id:"audience",title:"Constructor de Audiencias",description:"Define tu p\xfablico objetivo con precisi\xf3n",icon:f.Z,isCompleted:M.length>0&&!!Z},{id:"schedule",title:"Programaci\xf3n y Env\xedo",description:"Configura cu\xe1ndo y c\xf3mo enviar la campa\xf1a",icon:g.Z,isCompleted:"IMMEDIATE"===R.type||!!R.scheduledFor},{id:"review",title:"Revisi\xf3n y Confirmaci\xf3n",description:"Revisa todos los detalles antes de crear",icon:N.Z,isCompleted:!1}];(0,r.useEffect)(()=>{z()},[]);let z=async()=>{try{let e=await fetch("/api/campaigns/templates?status=APPROVED&isActive=true"),a=await e.json();if(a.success)c(a.data||[]);else throw Error(a.error)}catch(e){console.error("Error loading templates:",e),y({title:"Error",description:"No se pudieron cargar las plantillas",variant:"destructive"})}finally{o(!1)}},B=e=>{let a={};switch(e){case 0:D||(a.template=["Debes seleccionar una plantilla"]);break;case 1:R.name||(a.name=["El nombre de la campa\xf1a es requerido"]),R.type||(a.type=["El tipo de campa\xf1a es requerido"]);break;case 2:0===M.length&&(a.audience=["Debes definir al menos un filtro de audiencia"]),Z||(a.preview=["Debes generar una vista previa de la audiencia"]);break;case 3:"SCHEDULED"!==R.type||R.scheduledFor||(a.schedule=["Debes seleccionar una fecha y hora para la campa\xf1a programada"]),R.sendRate&&(R.sendRate<1||R.sendRate>60)&&(a.sendRate=["La velocidad de env\xedo debe estar entre 1 y 60 mensajes por minuto"])}return G(a),0===Object.keys(a).length},Y=async()=>{if(D&&Z)try{p(!0);let a={name:R.name,description:R.description,type:R.type,templateId:D.id,messageVariables:R.messageVariables||{},audienceFilters:M,maxRecipients:R.maxRecipients,scheduledFor:R.scheduledFor?new Date(R.scheduledFor):void 0,timezone:R.timezone||"America/Mexico_City",sendRate:R.sendRate||S.UM.SEND_RATE,batchSize:R.batchSize||S.UM.BATCH_SIZE,budgetLimit:R.budgetLimit},s=await fetch("/api/campaigns",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),t=await s.json();if(t.success)y({title:"\xc9xito",description:"Campa\xf1a creada exitosamente"}),e?.(t.data.id),C.push(`/campaigns/${t.data.id}`);else throw Error(t.error)}catch(e){console.error("Error creating campaign:",e),y({title:"Error",description:"Error al crear la campa\xf1a",variant:"destructive"})}finally{p(!1)}},W=(a+1)/H.length*100;return(0,t.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Crear Nueva Campa\xf1a"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Asistente paso a paso para crear campa\xf1as profesionales con segmentaci\xf3n avanzada"}),(0,t.jsx)(m.E,{value:W,className:"max-w-md mx-auto"})]}),(0,t.jsx)(n.Zb,{children:(0,t.jsx)(n.aY,{className:"p-6",children:(0,t.jsx)("div",{className:"flex justify-between items-center",children:H.map((e,s)=>{let r=e.icon,n=s===a,i=e.isCompleted,l=s<a;return(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,t.jsx)("div",{className:`
                    relative flex items-center justify-center w-12 h-12 rounded-full border-2 transition-colors
                    ${n?"border-primary bg-primary text-primary-foreground":i||l?"border-green-500 bg-green-500 text-white":"border-muted-foreground/30 text-muted-foreground"}
                  `,children:i||l?(0,t.jsx)(N.Z,{className:"h-6 w-6"}):(0,t.jsx)(r,{className:"h-6 w-6"})}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:`text-sm font-medium ${n?"text-primary":"text-muted-foreground"}`,children:e.title}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground hidden sm:block",children:e.description})]})]},e.id)})})})}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{children:[(0,t.jsxs)(n.ll,{className:"flex items-center space-x-2",children:[r.createElement(H[a].icon,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:H[a].title})]}),(0,t.jsx)(n.SZ,{children:H[a].description})]}),(0,t.jsx)(n.aY,{className:"space-y-6",children:(()=>{switch(a){case 0:return(0,t.jsx)(P,{templates:l,loading:d,selectedTemplate:D,onSelectTemplate:w,errors:V});case 1:return(0,t.jsx)(O,{data:R,onChange:I,errors:V});case 2:return(0,t.jsx)(L,{filters:M,preview:Z,onFiltersChange:U,onPreviewChange:k,errors:V});case 3:return(0,t.jsx)(_,{data:R,onChange:I,audienceSize:Z?.totalContacts||0,errors:V});case 4:return(0,t.jsx)(F,{campaignData:R,selectedTemplate:D,audiencePreview:Z,audienceFilters:M,onCreateCampaign:Y,creating:u});default:return null}})()})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)(i.z,{variant:"outline",onClick:()=>{a>0&&s(a-1)},disabled:0===a,children:[(0,t.jsx)(v.Z,{className:"mr-2 h-4 w-4"}),"Anterior"]}),a<H.length-1?(0,t.jsxs)(i.z,{onClick:()=>{B(a)&&a<H.length-1&&s(a+1)},children:["Siguiente",(0,t.jsx)(j.Z,{className:"ml-2 h-4 w-4"})]}):(0,t.jsx)(i.z,{onClick:Y,disabled:u||!B(a),className:"bg-green-600 hover:bg-green-700",children:u?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(E.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Creando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.Z,{className:"mr-2 h-4 w-4"}),"Crear Campa\xf1a"]})})]})]})}function P({templates:e,loading:a,selectedTemplate:s,onSelectTemplate:r,errors:i}){return a?(0,t.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,a)=>(0,t.jsx)("div",{className:"animate-pulse",children:(0,t.jsx)("div",{className:"h-20 bg-gray-200 rounded-lg"})},a))}):0===e.length?(0,t.jsxs)(p.bZ,{children:[(0,t.jsx)(y.Z,{className:"h-4 w-4"}),(0,t.jsx)(p.X,{children:"No hay plantillas aprobadas disponibles. Necesitas crear y aprobar plantillas antes de crear campa\xf1as."})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[i.template&&(0,t.jsxs)(p.bZ,{variant:"destructive",children:[(0,t.jsx)(y.Z,{className:"h-4 w-4"}),(0,t.jsx)(p.X,{children:i.template[0]})]}),(0,t.jsx)("div",{className:"grid gap-4",children:e.map(e=>(0,t.jsx)(n.Zb,{className:`cursor-pointer transition-colors ${s?.id===e.id?"border-primary bg-primary/5":"hover:border-primary/50"}`,onClick:()=>r(e),children:(0,t.jsx)(n.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("h3",{className:"font-medium",children:e.name}),(0,t.jsx)(l.C,{variant:"secondary",className:"text-xs",children:e.category}),(0,t.jsx)(l.C,{variant:"outline",className:"text-xs",children:e.language.toUpperCase()})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.bodyContent}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{children:["Usado ",e.usageCount," veces"]}),e.successfulSends>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"â€¢"}),(0,t.jsxs)("span",{children:[e.successfulSends," env\xedos exitosos"]})]})]})]}),s?.id===e.id&&(0,t.jsx)("div",{className:"ml-4",children:(0,t.jsx)(N.Z,{className:"h-5 w-5 text-primary"})})]})})},e.id))})]})}function O({data:e,onChange:a,errors:s}){return(0,t.jsxs)("div",{className:"space-y-6",children:[(s.name||s.type)&&(0,t.jsxs)(p.bZ,{variant:"destructive",children:[(0,t.jsx)(y.Z,{className:"h-4 w-4"}),(0,t.jsx)(p.X,{children:s.name?.[0]||s.type?.[0]})]}),(0,t.jsxs)("div",{className:"grid gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"campaign-name",children:"Nombre de la campa\xf1a *"}),(0,t.jsx)(c.I,{id:"campaign-name",placeholder:"Ej: Promoci\xf3n Black Friday 2024",value:e.name||"",onChange:s=>a({...e,name:s.target.value}),className:s.name?"border-red-500":""})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"campaign-description",children:"Descripci\xf3n (opcional)"}),(0,t.jsx)(o.g,{id:"campaign-description",placeholder:"Describe el objetivo y detalles de la campa\xf1a...",value:e.description||"",onChange:s=>a({...e,description:s.target.value}),rows:3})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"campaign-type",children:"Tipo de campa\xf1a *"}),(0,t.jsxs)(u.Ph,{value:e.type,onValueChange:s=>a({...e,type:s}),children:[(0,t.jsx)(u.i4,{className:s.type?"border-red-500":"",children:(0,t.jsx)(u.ki,{placeholder:"Selecciona el tipo de campa\xf1a"})}),(0,t.jsxs)(u.Bw,{children:[(0,t.jsx)(u.Ql,{value:"IMMEDIATE",children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"font-medium",children:S.Rh.IMMEDIATE}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Env\xedo inmediato una vez confirmada"})]})}),(0,t.jsx)(u.Ql,{value:"SCHEDULED",children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"font-medium",children:S.Rh.SCHEDULED}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Programar para una fecha y hora espec\xedfica"})]})}),(0,t.jsx)(u.Ql,{value:"DRIP",children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"font-medium",children:S.Rh.DRIP}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Campa\xf1a secuencial con m\xfaltiples mensajes"})]})}),(0,t.jsx)(u.Ql,{value:"AB_TEST",children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"font-medium",children:S.Rh.AB_TEST}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Prueba A/B para optimizar mensajes"})]})})]})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"max-recipients",children:"L\xedmite m\xe1ximo de destinatarios (opcional)"}),(0,t.jsx)(c.I,{id:"max-recipients",type:"number",placeholder:"Ej: 5000",value:e.maxRecipients||"",onChange:s=>a({...e,maxRecipients:s.target.value?parseInt(s.target.value):void 0}),min:"1",max:"50000"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"\xdatil para pruebas A/B o env\xedos graduales. Deja en blanco para enviar a toda la audiencia."})]})]})]})}function L({filters:e,preview:a,onFiltersChange:s,onPreviewChange:r,errors:n}){return(0,t.jsxs)("div",{className:"space-y-4",children:[(n.audience||n.preview)&&(0,t.jsxs)(p.bZ,{variant:"destructive",children:[(0,t.jsx)(y.Z,{className:"h-4 w-4"}),(0,t.jsx)(p.X,{children:n.audience?.[0]||n.preview?.[0]})]}),(0,t.jsx)(D.default,{initialFilters:e,onFiltersChange:s,onPreviewGenerated:r})]})}function _({data:e,onChange:a,audienceSize:s,errors:r}){let i=s&&e.sendRate?Math.ceil(s/e.sendRate):0;return(0,t.jsxs)("div",{className:"space-y-6",children:[(r.schedule||r.sendRate)&&(0,t.jsxs)(p.bZ,{variant:"destructive",children:[(0,t.jsx)(y.Z,{className:"h-4 w-4"}),(0,t.jsx)(p.X,{children:r.schedule?.[0]||r.sendRate?.[0]})]}),"SCHEDULED"===e.type&&(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"scheduled-for",children:"Fecha y hora de env\xedo *"}),(0,t.jsx)(c.I,{id:"scheduled-for",type:"datetime-local",value:e.scheduledFor?"string"==typeof e.scheduledFor?e.scheduledFor:e.scheduledFor.toISOString().slice(0,16):"",onChange:s=>a({...e,scheduledFor:s.target.value?new Date(s.target.value):void 0}),className:r.schedule?"border-red-500":"",min:new Date().toISOString().slice(0,16)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"send-rate",children:"Velocidad de env\xedo (mensajes/minuto)"}),(0,t.jsx)(c.I,{id:"send-rate",type:"number",value:e.sendRate||S.UM.SEND_RATE,onChange:s=>a({...e,sendRate:parseInt(s.target.value)}),min:"1",max:"60",className:r.sendRate?"border-red-500":""}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Controla la velocidad para evitar saturar los servidores"})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"batch-size",children:"Tama\xf1o de lote"}),(0,t.jsx)(c.I,{id:"batch-size",type:"number",value:e.batchSize||S.UM.BATCH_SIZE,onChange:s=>a({...e,batchSize:parseInt(s.target.value)}),min:"10",max:"1000"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"N\xfamero de mensajes procesados en cada lote"})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"budget-limit",children:"L\xedmite de presupuesto (USD, opcional)"}),(0,t.jsx)(c.I,{id:"budget-limit",type:"number",step:"0.01",placeholder:"Ej: 100.00",value:e.budgetLimit||"",onChange:s=>a({...e,budgetLimit:s.target.value?parseFloat(s.target.value):void 0}),min:"0"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"La campa\xf1a se pausar\xe1 autom\xe1ticamente si se alcanza este l\xedmite"})]}),s>0&&(0,t.jsx)(n.Zb,{className:"bg-blue-50 border-blue-200",children:(0,t.jsxs)(n.aY,{className:"p-4",children:[(0,t.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Estimaci\xf3n de Campa\xf1a"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-blue-700",children:"Audiencia:"}),(0,t.jsxs)("p",{className:"font-medium",children:[s.toLocaleString()," contactos"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-blue-700",children:"Duraci\xf3n estimada:"}),(0,t.jsxs)("p",{className:"font-medium",children:[i," minutos"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-blue-700",children:"Costo estimado:"}),(0,t.jsx)("p",{className:"font-medium",children:"$0.05 - $0.15 USD"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-blue-700",children:"Entrega estimada:"}),(0,t.jsx)("p",{className:"font-medium",children:"85% - 95%"})]})]})]})})]})}function F({campaignData:e,selectedTemplate:a,audiencePreview:s,audienceFilters:r,onCreateCampaign:c,creating:d}){return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(p.bZ,{children:[(0,t.jsx)(N.Z,{className:"h-4 w-4"}),(0,t.jsx)(p.X,{children:"Revisa cuidadosamente todos los detalles antes de crear la campa\xf1a. Una vez creada, algunos elementos no podr\xe1n modificarse."})]}),(0,t.jsxs)("div",{className:"grid gap-6",children:[(0,t.jsxs)(n.Zb,{children:[(0,t.jsx)(n.Ol,{children:(0,t.jsx)(n.ll,{className:"text-base",children:"Informaci\xf3n de la Campa\xf1a"})}),(0,t.jsxs)(n.aY,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Nombre:"}),(0,t.jsx)("span",{className:"font-medium",children:e.name})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Tipo:"}),(0,t.jsx)(l.C,{variant:"secondary",children:S.Rh[e.type]})]}),e.description&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Descripci\xf3n:"}),(0,t.jsx)("span",{className:"font-medium text-right max-w-xs",children:e.description})]}),e.scheduledFor&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Programada para:"}),(0,t.jsx)("span",{className:"font-medium",children:(0,R.WU)(new Date(e.scheduledFor),"dd/MM/yyyy HH:mm",{locale:I.es})})]})]})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsx)(n.Ol,{children:(0,t.jsx)(n.ll,{className:"text-base",children:"Plantilla Seleccionada"})}),(0,t.jsx)(n.aY,{children:a&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"font-medium",children:a.name}),(0,t.jsx)(l.C,{variant:"outline",className:"text-xs",children:a.category})]}),(0,t.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg",children:(0,t.jsx)("p",{className:"text-sm",children:a.bodyContent})}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Usado ",a.usageCount," veces â€¢ ",a.successfulSends," env\xedos exitosos"]})]})})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsx)(n.Ol,{children:(0,t.jsx)(n.ll,{className:"text-base",children:"Audiencia Objetivo"})}),(0,t.jsx)(n.aY,{children:s&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("span",{className:"font-medium text-lg",children:[s.totalContacts.toLocaleString()," contactos"]}),(0,t.jsxs)(l.C,{variant:"outline",children:[s.vipCount," VIP"]})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Filtros aplicados: ",r.length," criterio",1!==r.length?"s":""]}),(0,t.jsxs)("div",{className:"space-y-1",children:[r.slice(0,3).map((e,a)=>(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["â€¢ ",S.mT[e.type]]},a)),r.length>3&&(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["... y ",r.length-3," filtro",r.length-3!=1?"s":""," m\xe1s"]})]})]})})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsx)(n.Ol,{children:(0,t.jsx)(n.ll,{className:"text-base",children:"Configuraci\xf3n de Env\xedo"})}),(0,t.jsxs)(n.aY,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Velocidad:"}),(0,t.jsxs)("span",{className:"font-medium",children:[e.sendRate," mensajes/minuto"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Tama\xf1o de lote:"}),(0,t.jsxs)("span",{className:"font-medium",children:[e.batchSize," mensajes"]})]}),e.maxRecipients&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"L\xedmite m\xe1ximo:"}),(0,t.jsxs)("span",{className:"font-medium",children:[e.maxRecipients.toLocaleString()," contactos"]})]}),e.budgetLimit&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"L\xedmite de presupuesto:"}),(0,t.jsxs)("span",{className:"font-medium",children:["$",e.budgetLimit," USD"]})]})]})]})]}),(0,t.jsx)("div",{className:"flex justify-center pt-4",children:(0,t.jsx)(i.z,{onClick:c,disabled:d,size:"lg",className:"bg-green-600 hover:bg-green-700 min-w-[200px]",children:d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(E.Z,{className:"mr-2 h-5 w-5 animate-spin"}),"Creando Campa\xf1a..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(C.Z,{className:"mr-2 h-5 w-5"}),"Crear Campa\xf1a"]})})})]})}},56948:function(e,a,s){"use strict";s.d(a,{Cd:function(){return d},X:function(){return o},bZ:function(){return c}});var t=s(15444),r=s(89300),n=s(2371),i=s(65522);let l=(0,n.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=r.forwardRef(({className:e,variant:a,...s},r)=>(0,t.jsx)("div",{ref:r,role:"alert",className:(0,i.cn)(l({variant:a}),e),...s}));c.displayName="Alert";let d=r.forwardRef(({className:e,...a},s)=>(0,t.jsx)("h5",{ref:s,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",e),...a}));d.displayName="AlertTitle";let o=r.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",e),...a}));o.displayName="AlertDescription"},74678:function(e,a,s){"use strict";s.d(a,{I:function(){return i}});var t=s(15444),r=s(89300),n=s(65522);let i=r.forwardRef(({className:e,type:a,...s},r)=>(0,t.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...s}));i.displayName="Input"},37108:function(e,a,s){"use strict";s.d(a,{E:function(){return l}});var t=s(15444),r=s(89300),n=s(25052),i=s(65522);let l=r.forwardRef(({className:e,value:a,...s},r)=>(0,t.jsx)(n.fC,{ref:r,className:(0,i.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...s,children:(0,t.jsx)(n.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})}));l.displayName=n.fC.displayName},67012:function(e,a,s){"use strict";s.d(a,{g:function(){return i}});var t=s(15444),r=s(89300),n=s(65522);let i=r.forwardRef(({className:e,...a},s)=>(0,t.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...a}));i.displayName="Textarea"},33186:function(e,a,s){"use strict";s.d(a,{BT:function(){return n.AutomationActionType},DX:function(){return R},Dn:function(){return I},ED:function(){return x},Eb:function(){return N},FQ:function(){return v},Go:function(){return l},Jg:function(){return h},Om:function(){return u},Pg:function(){return b},Rh:function(){return T},Rn:function(){return g},Sn:function(){return d},UM:function(){return D},Ug:function(){return y},Vb:function(){return n.AutomationConditionType},WC:function(){return c},WV:function(){return C},WY:function(){return i},aE:function(){return m},d1:function(){return f},fB:function(){return o},hC:function(){return n.KnowledgeSourceStatus},hQ:function(){return j},mT:function(){return S},n9:function(){return p},rH:function(){return n.KnowledgeSourceType},uU:function(){return A},ym:function(){return E}});var t,r,n=s(51181);(t=r||(r={})).INSUFFICIENT_BALANCE="INSUFFICIENT_BALANCE",t.NO_PROVIDER_AVAILABLE="NO_PROVIDER_AVAILABLE",t.PROVIDER_ERROR="PROVIDER_ERROR",t.INVALID_REQUEST="INVALID_REQUEST",t.RATE_LIMIT_EXCEEDED="RATE_LIMIT_EXCEEDED",t.INTERNAL_ERROR="INTERNAL_ERROR";let i={OPEN:"Abierta",PENDING:"Pendiente",RESOLVED:"Resuelta",TRANSFERRED:"Transferida",ARCHIVED:"Archivada"},l={LOW:"Baja",MEDIUM:"Media",HIGH:"Alta",URGENT:"Urgente"},c={LOW:"gray",MEDIUM:"blue",HIGH:"orange",URGENT:"red"},d={QR_CODE:"Conexi\xf3n R\xe1pida (QR)",API_OFFICIAL:"Conexi\xf3n Profesional (API)"},o={DISCONNECTED:"Desconectado",CONNECTING:"Conectando",CONNECTED:"Conectado",ERROR:"Error",EXPIRED:"Expirado"},u={DISCONNECTED:"gray",CONNECTING:"yellow",CONNECTED:"green",ERROR:"red",EXPIRED:"orange"},m={image:["image/jpeg","image/png","image/gif","image/webp"],document:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain"],video:["video/mp4","video/avi","video/mov","video/wmv"],audio:["audio/mp3","audio/wav","audio/aac","audio/ogg"]},p={image:10485760,document:52428800,video:104857600,audio:20971520},x={SALES:"Ventas",SUPPORT:"Soporte",QUESTION:"Pregunta",COMPLAINT:"Queja",BOOKING:"Reserva",PAYMENT:"Pago",INFORMATION:"Informaci\xf3n",GREETING:"Saludo",FAREWELL:"Despedida",OTHER:"Otro"},h={SALES:"green",SUPPORT:"blue",QUESTION:"yellow",COMPLAINT:"red",BOOKING:"purple",PAYMENT:"orange",INFORMATION:"cyan",GREETING:"teal",FAREWELL:"gray",OTHER:"slate"},f={INTENTION_DETECTED:"Intenci\xf3n detectada",KEYWORDS_CONTAINS:"Contiene palabras clave",SENDER_IS_VIP:"Remitente es VIP",TIME_RANGE:"Horario espec\xedfico",FIRST_MESSAGE:"Primer mensaje",MESSAGE_COUNT:"N\xfamero de mensajes",RESPONSE_TIME:"Tiempo de respuesta"},g={ADD_TAG:"Agregar etiqueta",ASSIGN_AGENT:"Asignar agente",SET_PRIORITY:"Establecer prioridad",AUTO_REPLY:"Respuesta autom\xe1tica",MARK_VIP:"Marcar como VIP",TRANSFER_CONVERSATION:"Transferir conversaci\xf3n",CREATE_TASK:"Crear tarea",SEND_NOTIFICATION:"Enviar notificaci\xf3n"},N={pdf:["application/pdf"],document:["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],text:["text/plain","text/markdown","text/csv"],web:["text/html"]},v=52428800,j={UPLOADING:"Subiendo",PROCESSING:"Procesando",CHUNKING:"Fragmentando",EMBEDDING:"Generando Embeddings",ACTIVE:"Activo",ERROR:"Error",DISABLED:"Deshabilitado"},E={ECOMMERCE:"E-commerce",CRM:"CRM",ERP:"ERP",PAYMENT:"Pagos",ANALYTICS:"An\xe1lisis",MARKETING:"Marketing",SOCIAL_MEDIA:"Redes Sociales",OTHER:"Otros"},b={AVAILABLE:"Disponible",CONNECTED:"Conectado",DISCONNECTED:"Desconectado",ERROR:"Error",PENDING:"Pendiente"},y={SHOPIFY:{displayName:"Shopify",description:"Conecta tu tienda Shopify para consultar productos, pedidos e inventario",authType:"oauth",authFields:["shop_domain","access_token"],iconUrl:"/integrations/shopify.svg",brandColor:"#7AB55C",supportedFeatures:["products","orders","customers","inventory"],documentation:"https://docs.shopify.com/api"},WOOCOMMERCE:{displayName:"WooCommerce",description:"Conecta tu tienda WooCommerce para gestionar productos y pedidos",authType:"api_key",authFields:["site_url","consumer_key","consumer_secret"],iconUrl:"/integrations/woocommerce.svg",brandColor:"#7F54B3",supportedFeatures:["products","orders","customers"],documentation:"https://woocommerce.github.io/woocommerce-rest-api-docs/"},TIENDANUBE:{displayName:"TiendaNube",description:"Conecta tu tienda TiendaNube para sincronizar cat\xe1logo y pedidos",authType:"oauth",authFields:["store_id","access_token"],iconUrl:"/integrations/tiendanube.svg",brandColor:"#FF6900",supportedFeatures:["products","orders","customers"],documentation:"https://developers.tiendanube.com/"}},C={PENDING:"Pendiente",APPROVED:"Aprobada",REJECTED:"Rechazada",PAUSED:"Pausada",ARCHIVED:"Archivada"},R={PENDING:"yellow",APPROVED:"green",REJECTED:"red",PAUSED:"orange",ARCHIVED:"gray"},I={DRAFT:"Borrador",SCHEDULED:"Programada",SENDING:"Enviando",COMPLETED:"Completada",PAUSED:"Pausada",CANCELLED:"Cancelada",FAILED:"Fallida"},A={DRAFT:"gray",SCHEDULED:"blue",SENDING:"yellow",COMPLETED:"green",PAUSED:"orange",CANCELLED:"red",FAILED:"red"},T={IMMEDIATE:"Inmediato",SCHEDULED:"Programado",DRIP:"Secuencial",AB_TEST:"Prueba A/B"},S={INCLUDE_TAG:"Incluir etiqueta",EXCLUDE_TAG:"Excluir etiqueta",CHANNEL:"Canal de origen",VIP_STATUS:"Estado VIP",LAST_CONTACT:"\xdaltimo contacto",CONVERSATION_STATUS:"Estado de conversaci\xf3n"},D={SEND_RATE:10,BATCH_SIZE:100,RETRY_ATTEMPTS:3,PREVIEW_SAMPLE_SIZE:20,PREVIEW_EXPIRATION_HOURS:24}},66772:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(42154).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},66124:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(42154).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},62492:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(42154).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},26771:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(42154).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},81178:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(42154).Z)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},6488:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(42154).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},79047:function(e,a,s){"use strict";var t=s(41206);s.o(t,"usePathname")&&s.d(a,{usePathname:function(){return t.usePathname}}),s.o(t,"useRouter")&&s.d(a,{useRouter:function(){return t.useRouter}})},25052:function(e,a,s){"use strict";s.d(a,{fC:function(){return j},z$:function(){return E}});var t=s(89300),r=s(68788),n=s(57234),i=s(15444),l="Progress",[c,d]=(0,r.b)(l),[o,u]=c(l),m=t.forwardRef((e,a)=>{var s,t;let{__scopeProgress:r,value:l=null,max:c,getValueLabel:d=h,...u}=e;(c||0===c)&&!N(c)&&console.error((s=`${c}`,`Invalid prop \`max\` of value \`${s}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let m=N(c)?c:100;null===l||v(l,m)||console.error((t=`${l}`,`Invalid prop \`value\` of value \`${t}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let p=v(l,m)?l:null,x=g(p)?d(p,m):void 0;return(0,i.jsx)(o,{scope:r,value:p,max:m,children:(0,i.jsx)(n.WV.div,{"aria-valuemax":m,"aria-valuemin":0,"aria-valuenow":g(p)?p:void 0,"aria-valuetext":x,role:"progressbar","data-state":f(p,m),"data-value":p??void 0,"data-max":m,...u,ref:a})})});m.displayName=l;var p="ProgressIndicator",x=t.forwardRef((e,a)=>{let{__scopeProgress:s,...t}=e,r=u(p,s);return(0,i.jsx)(n.WV.div,{"data-state":f(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...t,ref:a})});function h(e,a){return`${Math.round(e/a*100)}%`}function f(e,a){return null==e?"indeterminate":e===a?"complete":"loading"}function g(e){return"number"==typeof e}function N(e){return g(e)&&!isNaN(e)&&e>0}function v(e,a){return g(e)&&!isNaN(e)&&e<=a&&e>=0}x.displayName=p;var j=m,E=x}},function(e){e.O(0,[9993,688,8077,8151,6298,1561,6448,5150,9911,2386,7156,1744],function(){return e(e.s=7874)}),_N_E=e.O()}]);