(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7588],{66965:function(e,s,a){Promise.resolve().then(a.bind(a,82538)),Promise.resolve().then(a.bind(a,7270))},82538:function(e,s,a){"use strict";a.d(s,{ProtectedRoute:function(){return o}});var l=a(15444),n=a(51924),t=a(56948),i=a(81059),c=a(70362),r=a(2422),d=a(79047);function o({children:e,permissions:s=[],requireAll:a=!1,fallback:o,redirectTo:h}){let{isLoading:x,isAuthenticated:m,hasAnyPermission:u,hasAllPermissions:j,getDashboardRoute:p}=(0,n.TE)(),f=(0,d.useRouter)();return x?(0,l.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):m?!(s.length>0)||(a?j(s):u(s))?(0,l.jsx)(l.Fragment,{children:e}):o?(0,l.jsx)(l.Fragment,{children:o}):(0,l.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,l.jsxs)(t.bZ,{className:"max-w-md",children:[(0,l.jsx)(c.Z,{className:"h-4 w-4"}),(0,l.jsx)(t.Cd,{children:"Sin Permisos"}),(0,l.jsx)(t.X,{children:"No tienes los permisos necesarios para acceder a esta funcionalidad."}),(0,l.jsx)(r.z,{onClick:()=>f.push(h||p()),className:"mt-3 w-full",children:"Volver al Dashboard"})]})}):(0,l.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,l.jsxs)(t.bZ,{className:"max-w-md",children:[(0,l.jsx)(i.Z,{className:"h-4 w-4"}),(0,l.jsx)(t.Cd,{children:"Acceso Denegado"}),(0,l.jsx)(t.X,{children:"Debes iniciar sesi\xf3n para acceder a esta p\xe1gina."}),(0,l.jsx)(r.z,{onClick:()=>f.push("/auth/login"),className:"mt-3 w-full",children:"Iniciar Sesi\xf3n"})]})})}},7270:function(e,s,a){"use strict";a.d(s,{ContactsManager:function(){return P}});var l=a(15444),n=a(89300),t=a(2422),i=a(99827),c=a(74678),r=a(61335),d=a(81577),o=a(29530),h=a(34635),x=a(70489),m=a(4805),u=a(26584),j=a(39429),p=a(64624),f=a(90185),v=a(58510),N=a(25076),g=a(83183),y=a(20357),w=a(40563),b=a(95854),C=a(99719);let A=[{id:"1",name:"Juan P\xe9rez",phone:"+54 9 11 1234-5678",email:"juan.perez@email.com",status:"active",type:"client",channel:"whatsapp",lastActivity:"5m"},{id:"2",name:"Mar\xeda Garc\xeda",phone:"+54 9 11 9876-5432",email:"maria.garcia@email.com",status:"pending",type:"lead",channel:"whatsapp",lastActivity:"15m"},{id:"3",name:"Carlos Rodr\xedguez",phone:"+54 9 11 5555-6666",email:"carlos.rodriguez@empresa.com",status:"inactive",type:"prospect",channel:"email",lastActivity:"1h"},{id:"4",name:"Ana Silva",phone:"+54 9 11 7777-8888",email:"ana.silva@tienda.com",status:"vip",type:"client",channel:"whatsapp",lastActivity:"2h"}];function P(){let[e]=(0,n.useState)(A),[s,a]=(0,n.useState)(""),[P,E]=(0,n.useState)("all"),[I,R]=(0,n.useState)("all"),[S,O]=(0,n.useState)(!1),[Z,T]=(0,n.useState)(!1),[L,D]=(0,n.useState)({name:"",phone:"",email:"",type:"lead",channel:"whatsapp"}),{toast:Q}=(0,b.pm)(),z=e.filter(e=>{let a=e.name.toLowerCase().includes(s.toLowerCase())||e.phone.includes(s)||e.email.toLowerCase().includes(s.toLowerCase()),l="all"===P||e.status===P,n="all"===I||e.type===I;return a&&l&&n}),k=e=>{switch(e){case"active":return"default";case"vip":case"inactive":return"secondary";default:return"outline"}},M=e=>{switch(e){case"active":return"bg-green-500";case"vip":return"bg-blue-500";case"pending":return"bg-orange-500";default:return"bg-gray-400"}},U=e=>{switch(e){case"active":return"Activo";case"vip":return"VIP";case"pending":return"Pendiente";case"inactive":return"Inactivo";default:return"Desconocido"}},V=e=>{switch(e){case"client":return"Cliente";case"lead":return"Lead";case"prospect":return"Prospecto";default:return"Desconocido"}},_=e=>{switch(e){case"whatsapp":return"WhatsApp";case"email":return"Email";case"phone":return"Tel\xe9fono";case"web":return"Web Chat";default:return"Desconocido"}};return(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Contactos"}),(0,l.jsx)("p",{className:"text-gray-600 mt-1",children:"Gestiona tu base de clientes y leads"})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)(o.Vq,{open:Z,onOpenChange:T,children:[(0,l.jsx)(o.hg,{asChild:!0,children:(0,l.jsxs)(t.z,{variant:"outline",children:[(0,l.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"Importar"]})}),(0,l.jsxs)(o.cZ,{children:[(0,l.jsxs)(o.fK,{children:[(0,l.jsx)(o.$N,{children:"Importar Contactos"}),(0,l.jsx)(o.Be,{children:"Sube un archivo CSV con tus contactos. El archivo debe incluir las columnas: Nombre, Tel\xe9fono, Email."})]}),(0,l.jsx)("div",{className:"space-y-4",children:(0,l.jsxs)("div",{children:[(0,l.jsx)(h.Label,{htmlFor:"file",children:"Seleccionar archivo CSV"}),(0,l.jsx)(c.I,{id:"file",type:"file",accept:".csv",onChange:e=>{let s=e.target.files?.[0];s&&(Q({title:"Importaci\xf3n iniciada",description:`Procesando archivo: ${s.name}`}),T(!1))}})]})})]})]}),(0,l.jsxs)(t.z,{onClick:()=>{let e=new Blob([[["Nombre","Tel\xe9fono","Email","Tipo","Estado","Canal"],...z.map(e=>[e.name,e.phone,e.email,e.type,e.status,e.channel])].map(e=>e.join(",")).join("\n")],{type:"text/csv"}),s=URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download="contactos.csv",a.click(),URL.revokeObjectURL(s),Q({title:"Exportaci\xf3n completada",description:`Se han exportado ${z.length} contactos.`})},variant:"outline",children:[(0,l.jsx)(u.Z,{className:"w-4 h-4 mr-2"}),"Exportar"]}),(0,l.jsxs)(o.Vq,{open:S,onOpenChange:O,children:[(0,l.jsx)(o.hg,{asChild:!0,children:(0,l.jsxs)(t.z,{children:[(0,l.jsx)(j.Z,{className:"w-4 h-4 mr-2"}),"Nuevo Contacto"]})}),(0,l.jsxs)(o.cZ,{className:"sm:max-w-[425px]",children:[(0,l.jsxs)(o.fK,{children:[(0,l.jsx)(o.$N,{children:"Agregar Nuevo Contacto"}),(0,l.jsx)(o.Be,{children:"Completa la informaci\xf3n del nuevo contacto."})]}),(0,l.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(h.Label,{htmlFor:"name",children:"Nombre completo"}),(0,l.jsx)(c.I,{id:"name",value:L.name,onChange:e=>D({...L,name:e.target.value})})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(h.Label,{htmlFor:"phone",children:"Tel\xe9fono"}),(0,l.jsx)(c.I,{id:"phone",value:L.phone,onChange:e=>D({...L,phone:e.target.value}),placeholder:"+54 9 11 1234-5678"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(h.Label,{htmlFor:"email",children:"Email"}),(0,l.jsx)(c.I,{id:"email",type:"email",value:L.email,onChange:e=>D({...L,email:e.target.value})})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(h.Label,{htmlFor:"type",children:"Tipo de contacto"}),(0,l.jsxs)(x.Ph,{value:L.type,onValueChange:e=>D({...L,type:e}),children:[(0,l.jsx)(x.i4,{children:(0,l.jsx)(x.ki,{})}),(0,l.jsxs)(x.Bw,{children:[(0,l.jsx)(x.Ql,{value:"lead",children:"Lead"}),(0,l.jsx)(x.Ql,{value:"prospect",children:"Prospecto"}),(0,l.jsx)(x.Ql,{value:"client",children:"Cliente"})]})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(h.Label,{htmlFor:"channel",children:"Canal preferido"}),(0,l.jsxs)(x.Ph,{value:L.channel,onValueChange:e=>D({...L,channel:e}),children:[(0,l.jsx)(x.i4,{children:(0,l.jsx)(x.ki,{})}),(0,l.jsxs)(x.Bw,{children:[(0,l.jsx)(x.Ql,{value:"whatsapp",children:"WhatsApp"}),(0,l.jsx)(x.Ql,{value:"email",children:"Email"}),(0,l.jsx)(x.Ql,{value:"phone",children:"Tel\xe9fono"}),(0,l.jsx)(x.Ql,{value:"web",children:"Web Chat"})]})]})]})]}),(0,l.jsx)(o.cN,{children:(0,l.jsx)(t.z,{onClick:()=>{Q({title:"Contacto agregado",description:`${L.name} ha sido agregado a tu lista de contactos.`}),O(!1),D({name:"",phone:"",email:"",type:"lead",channel:"whatsapp"})},children:"Agregar Contacto"})})]})]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,l.jsxs)(i.Zb,{children:[(0,l.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(i.ll,{className:"text-sm font-medium",children:"Total Contactos"}),(0,l.jsx)(p.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsxs)(i.aY,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:e.length}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"+12% desde el mes pasado"})]})]}),(0,l.jsxs)(i.Zb,{children:[(0,l.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(i.ll,{className:"text-sm font-medium",children:"Nuevos Esta Semana"}),(0,l.jsx)(j.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsxs)(i.aY,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:"12"}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"+23% vs semana anterior"})]})]}),(0,l.jsxs)(i.Zb,{children:[(0,l.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(i.ll,{className:"text-sm font-medium",children:"Activos WhatsApp"}),(0,l.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsxs)(i.aY,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:e.filter(e=>"whatsapp"===e.channel&&"active"===e.status).length}),(0,l.jsxs)("p",{className:"text-xs text-muted-foreground",children:[Math.round(e.filter(e=>"whatsapp"===e.channel).length/e.length*100),"% del total"]})]})]}),(0,l.jsxs)(i.Zb,{children:[(0,l.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(i.ll,{className:"text-sm font-medium",children:"Tasa Conversi\xf3n"}),(0,l.jsx)(v.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsxs)(i.aY,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:"18.7%"}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Lead-to-customer"})]})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,l.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,l.jsx)(N.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,l.jsx)(c.I,{placeholder:"Buscar contactos...",className:"pl-10",value:s,onChange:e=>a(e.target.value)})]}),(0,l.jsxs)(x.Ph,{value:P,onValueChange:E,children:[(0,l.jsx)(x.i4,{className:"w-40",children:(0,l.jsx)(x.ki,{placeholder:"Estado"})}),(0,l.jsxs)(x.Bw,{children:[(0,l.jsx)(x.Ql,{value:"all",children:"Todos los estados"}),(0,l.jsx)(x.Ql,{value:"active",children:"Activos"}),(0,l.jsx)(x.Ql,{value:"inactive",children:"Inactivos"}),(0,l.jsx)(x.Ql,{value:"pending",children:"Pendientes"}),(0,l.jsx)(x.Ql,{value:"vip",children:"VIP"})]})]}),(0,l.jsxs)(x.Ph,{value:I,onValueChange:R,children:[(0,l.jsx)(x.i4,{className:"w-40",children:(0,l.jsx)(x.ki,{placeholder:"Tipo"})}),(0,l.jsxs)(x.Bw,{children:[(0,l.jsx)(x.Ql,{value:"all",children:"Todos los tipos"}),(0,l.jsx)(x.Ql,{value:"client",children:"Clientes"}),(0,l.jsx)(x.Ql,{value:"lead",children:"Leads"}),(0,l.jsx)(x.Ql,{value:"prospect",children:"Prospectos"})]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,l.jsxs)(i.Zb,{className:"lg:col-span-2",children:[(0,l.jsxs)(i.Ol,{children:[(0,l.jsxs)(i.ll,{children:["Lista de Contactos (",z.length,")"]}),(0,l.jsx)(i.SZ,{children:"Todos tus contactos organizados y actualizados"})]}),(0,l.jsx)(i.aY,{children:(0,l.jsxs)("div",{className:"space-y-4",children:[z.map(e=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)(d.qE,{children:[(0,l.jsx)(d.F$,{src:""}),(0,l.jsx)(d.Q5,{children:e.name.split(" ").map(e=>e[0]).join("").toUpperCase()})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"font-medium",children:e.name}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:e.phone}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:e.email})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(r.C,{variant:k(e.status),children:V(e.type)}),(0,l.jsx)(r.C,{variant:"outline",children:_(e.channel)}),(0,l.jsx)("div",{className:`w-3 h-3 rounded-full ${M(e.status)}`,title:U(e.status)}),(0,l.jsxs)(C.h_,{children:[(0,l.jsx)(C.$F,{asChild:!0,children:(0,l.jsx)(t.z,{variant:"ghost",size:"sm",children:(0,l.jsx)(g.Z,{className:"h-4 w-4"})})}),(0,l.jsxs)(C.AW,{align:"end",children:[(0,l.jsxs)(C.Xi,{children:[(0,l.jsx)(y.Z,{className:"mr-2 h-4 w-4"}),"Editar"]}),(0,l.jsxs)(C.Xi,{className:"text-red-600",children:[(0,l.jsx)(w.Z,{className:"mr-2 h-4 w-4"}),"Eliminar"]})]})]})]})]},e.id)),0===z.length&&(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)(p.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-500",children:"No se encontraron contactos"})]})]})})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)(i.Zb,{className:"mb-6",children:[(0,l.jsxs)(i.Ol,{children:[(0,l.jsx)(i.ll,{children:"Segmentaci\xf3n"}),(0,l.jsx)(i.SZ,{children:"Distribuci\xf3n de contactos por tipo"})]}),(0,l.jsx)(i.aY,{children:(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-sm font-medium",children:"Clientes Activos"}),(0,l.jsx)(r.C,{variant:"secondary",children:e.filter(e=>"client"===e.type&&"active"===e.status).length})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-sm font-medium",children:"Leads Calificados"}),(0,l.jsx)(r.C,{variant:"secondary",children:e.filter(e=>"lead"===e.type).length})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-sm font-medium",children:"Prospectos"}),(0,l.jsx)(r.C,{variant:"secondary",children:e.filter(e=>"prospect"===e.type).length})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-sm font-medium",children:"Clientes VIP"}),(0,l.jsx)(r.C,{variant:"secondary",children:e.filter(e=>"vip"===e.status).length})]})]})})]}),(0,l.jsxs)(i.Zb,{children:[(0,l.jsxs)(i.Ol,{children:[(0,l.jsx)(i.ll,{children:"Actividad Reciente"}),(0,l.jsx)(i.SZ,{children:"\xdaltimas interacciones con contactos"})]}),(0,l.jsx)(i.aY,{children:(0,l.jsx)("div",{className:"space-y-3",children:e.slice(0,3).map(e=>(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,l.jsx)(f.Z,{className:"w-4 h-4 text-green-600"})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("p",{className:"text-sm font-medium",children:e.name}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:"\xdaltima actividad"})]}),(0,l.jsx)("span",{className:"text-xs text-gray-500",children:e.lastActivity})]},e.id))})})]})]})]})]})}},81577:function(e,s,a){"use strict";a.d(s,{F$:function(){return r},Q5:function(){return d},qE:function(){return c}});var l=a(15444),n=a(89300),t=a(40445),i=a(65522);let c=n.forwardRef(({className:e,...s},a)=>(0,l.jsx)(t.fC,{ref:a,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...s}));c.displayName=t.fC.displayName;let r=n.forwardRef(({className:e,...s},a)=>(0,l.jsx)(t.Ee,{ref:a,className:(0,i.cn)("aspect-square h-full w-full",e),...s}));r.displayName=t.Ee.displayName;let d=n.forwardRef(({className:e,...s},a)=>(0,l.jsx)(t.NY,{ref:a,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...s}));d.displayName=t.NY.displayName},51924:function(e,s,a){"use strict";a.d(s,{TE:function(){return t}});var l=a(75762),n=a(92937);function t(){let{data:e,status:s}=(0,l.useSession)(),a=e?.user,t=a?.role,i=a?.organizationId;return{isAuthenticated:!!e,isLoading:"loading"===s,user:a,role:t,organizationId:i,hasPermission:e=>!!t&&(0,n.N$)(t,e),hasAnyPermission:e=>!!t&&(0,n.vr)(t,e),hasAllPermissions:e=>{if(!t)return!1;let s=(0,n.ai)(t).map(e=>e.toString());return(0,n.wP)(s,e)},canAccessRoute:e=>{if(!t)return!1;let s=(0,n.ai)(t).map(e=>e.toString());return(0,n.mn)(s,e)},getDashboardRoute:()=>t?(0,n.Ol)(t):"/dashboard",getAllPermissions:()=>t?(0,n.ai)(t):[],isSuperAdmin:"SUPER_ADMIN"===t,isDistributor:"DISTRIBUIDOR"===t,isOwner:"PROPIETARIO"===t,isAgent:"AGENTE"===t,canManageUsers:"SUPER_ADMIN"===t||"PROPIETARIO"===t,canManageOrganization:"SUPER_ADMIN"===t||"PROPIETARIO"===t,canViewAllConversations:"AGENTE"!==t,canManageWhatsApp:"SUPER_ADMIN"===t||"PROPIETARIO"===t,canManageBilling:"SUPER_ADMIN"===t||"PROPIETARIO"===t,canConfigureAI:"SUPER_ADMIN"===t||"PROPIETARIO"===t,canViewReports:"AGENTE"!==t,canManageClients:"DISTRIBUIDOR"===t||"SUPER_ADMIN"===t}}}},function(e){e.O(0,[6539,5762,688,8077,8151,822,2578,64,3657,4198,2386,7156,1744],function(){return e(e.s=66965)}),_N_E=e.O()}]);