(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1935],{95403:function(e,s,a){Promise.resolve().then(a.bind(a,55555))},55555:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return $}});var t=a(15444),n=a(89300),l=a(75762),r=a(82538),i=a(92937),c=a(99827),d=a(2422),o=a(61335),x=a(86765),m=a(66124),u=a(62492),h=a(4460),j=a(70362),p=a(39429),g=a(95181),f=a(9621),N=a(6488),v=a(55404),b=a(74678),y=a(34635),w=a(67012),C=a(25181),A=a(81471);function S({onChannelCreated:e,onBack:s}){let[a,l]=(0,n.useState)(null),[r,i]=(0,n.useState)(""),[x,h]=(0,n.useState)(""),[p,g]=(0,n.useState)(""),[f,N]=(0,n.useState)(""),[S,I]=(0,n.useState)(!1),[R,E]=(0,n.useState)(!1),T=async()=>{if(r&&x){E(!0);try{await new Promise(e=>setTimeout(e,2e3)),l({qrCode:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2ZmZiIvPjx0ZXh0IHg9IjEwMCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiMzMzMiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkNvZGlnbyBRUjwvdGV4dD48L3N2Zz4=",expiration:new Date(Date.now()+3e5),status:"WAITING",connectionId:`qr_${Date.now()}`}),setTimeout(()=>{l(e=>e?{...e,status:"SCANNING"}:null)},3e3),setTimeout(()=>{l(e=>e?{...e,status:"SUCCESS"}:null)},8e3)}catch(e){console.error("Error generando QR:",e),l(e=>e?{...e,status:"ERROR"}:null)}finally{E(!1)}}},D=()=>{if(!a)return"gray";switch(a.status){case"WAITING":return"blue";case"SCANNING":return"yellow";case"SUCCESS":return"green";case"ERROR":case"EXPIRED":return"red";default:return"gray"}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Conexi\xf3n R\xe1pida (QR)"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"La forma m\xe1s f\xe1cil de conectar WhatsApp a tu plataforma"})]}),(0,t.jsx)(d.z,{variant:"outline",onClick:s,children:"Volver"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(c.Zb,{children:[(0,t.jsxs)(c.Ol,{children:[(0,t.jsx)(c.ll,{children:"Configuraci\xf3n del Canal"}),(0,t.jsx)(c.SZ,{children:"Configura los detalles de tu nuevo canal de WhatsApp"})]}),(0,t.jsxs)(c.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.Label,{htmlFor:"channel-name",children:"Nombre del Canal"}),(0,t.jsx)(b.I,{id:"channel-name",value:r,onChange:e=>i(e.target.value),placeholder:"Ej: Soporte Principal",disabled:a?.status==="SUCCESS"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.Label,{htmlFor:"phone-number",children:"N\xfamero de Tel\xe9fono"}),(0,t.jsx)(b.I,{id:"phone-number",value:x,onChange:e=>h(e.target.value),placeholder:"+52 55 1234 5678",disabled:a?.status==="SUCCESS"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"N\xfamero que aparecer\xe1 asociado a este canal"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.Label,{htmlFor:"welcome-message",children:"Mensaje de Bienvenida (Opcional)"}),(0,t.jsx)(w.g,{id:"welcome-message",value:p,onChange:e=>g(e.target.value),placeholder:"Mensaje autom\xe1tico para nuevos contactos",rows:3,disabled:a?.status==="SUCCESS"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.Label,{htmlFor:"auto-reply",children:"Respuesta Autom\xe1tica (Opcional)"}),(0,t.jsx)(w.g,{id:"auto-reply",value:f,onChange:e=>N(e.target.value),placeholder:"Mensaje fuera del horario de atenci\xf3n",rows:3,disabled:a?.status==="SUCCESS"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(y.Label,{children:"Canal Predeterminado"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Usar este canal como predeterminado para nuevas conversaciones"})]}),(0,t.jsx)(C.Switch,{checked:S,onCheckedChange:I,disabled:a?.status==="SUCCESS"})]}),(0,t.jsx)("div",{className:"pt-4",children:a?"SUCCESS"===a.status?(0,t.jsxs)(d.z,{onClick:()=>{a&&"SUCCESS"===a.status&&(e({id:`channel_${Date.now()}`,name:r,phone:x,connectionType:"QR_CODE",status:"CONNECTED",isActive:!0,isDefault:S,messagesReceived:0,messagesSent:0,connectedAt:new Date}),s())},className:"w-full bg-blue-600 hover:bg-blue-700",children:[(0,t.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Completar Configuraci\xf3n"]}):(0,t.jsx)(d.z,{onClick:()=>{l(null),i(""),h(""),g(""),N(""),I(!1)},variant:"outline",className:"w-full",children:"Reintentar"}):(0,t.jsx)(d.z,{onClick:T,disabled:!r||!x||R,className:"w-full bg-green-600 hover:bg-green-700",children:R?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(A.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Generando QR..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.Z,{className:"h-4 w-4 mr-2"}),"Generar C\xf3digo QR"]})})})]})]}),(0,t.jsxs)(c.Zb,{children:[(0,t.jsxs)(c.Ol,{children:[(0,t.jsx)(c.ll,{children:"C\xf3digo QR"}),(0,t.jsx)(c.SZ,{children:"Escanea este c\xf3digo desde WhatsApp en tu tel\xe9fono"})]}),(0,t.jsx)(c.aY,{children:a?(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[(()=>{if(!a)return null;switch(a.status){case"WAITING":return(0,t.jsx)(u.Z,{className:"h-4 w-4 text-blue-600"});case"SCANNING":return(0,t.jsx)(A.Z,{className:"h-4 w-4 text-yellow-600 animate-spin"});case"SUCCESS":return(0,t.jsx)(m.Z,{className:"h-4 w-4 text-green-600"});case"ERROR":case"EXPIRED":return(0,t.jsx)(j.Z,{className:"h-4 w-4 text-red-600"});default:return null}})(),(0,t.jsx)(o.C,{variant:"green"===D()?"default":"outline",className:`${"green"===D()?"bg-green-100 text-green-800":"blue"===D()?"bg-blue-100 text-blue-800":"yellow"===D()?"bg-yellow-100 text-yellow-800":"red"===D()?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:(()=>{if(!a)return"";switch(a.status){case"WAITING":return"Esperando escaneo...";case"SCANNING":return"Conectando con WhatsApp...";case"SUCCESS":return"\xa1Conectado exitosamente!";case"ERROR":return"Error en la conexi\xf3n";case"EXPIRED":return"El c\xf3digo QR ha expirado";default:return""}})()})]}),("WAITING"===a.status||"SCANNING"===a.status)&&(0,t.jsx)("div",{className:"bg-white p-4 border-2 border-gray-200 rounded-lg inline-block",children:(0,t.jsx)("img",{src:a.qrCode,alt:"C\xf3digo QR de WhatsApp",className:"w-48 h-48"})}),"WAITING"===a.status&&(0,t.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,t.jsx)("p",{children:"1. Abre WhatsApp en tu tel\xe9fono"}),(0,t.jsx)("p",{children:"2. Ve a Configuraci\xf3n â†’ Dispositivos vinculados"}),(0,t.jsx)("p",{children:'3. Toca "Vincular un dispositivo"'}),(0,t.jsx)("p",{children:"4. Escanea este c\xf3digo QR"})]}),"SUCCESS"===a.status&&(0,t.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg",children:[(0,t.jsx)(m.Z,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-green-800 font-medium",children:"\xa1WhatsApp conectado exitosamente!"}),(0,t.jsx)("p",{className:"text-green-600 text-sm mt-1",children:"Tu canal est\xe1 listo para recibir mensajes"})]}),("ERROR"===a.status||"EXPIRED"===a.status)&&(0,t.jsxs)("div",{className:"p-4 bg-red-50 rounded-lg",children:[(0,t.jsx)(j.Z,{className:"w-8 h-8 text-red-600 mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-red-800 font-medium",children:"EXPIRED"===a.status?"El c\xf3digo QR ha expirado":"Error en la conexi\xf3n"}),(0,t.jsx)("p",{className:"text-red-600 text-sm mt-1",children:"Intenta generar un nuevo c\xf3digo"})]}),"WAITING"===a.status&&(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"El c\xf3digo expira en 5 minutos"})]}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(v.Z,{className:"w-12 h-12 text-gray-400"})}),(0,t.jsx)("p",{className:"text-gray-500",children:"Completa la configuraci\xf3n para generar el c\xf3digo QR"})]})})]})]})]})}var I=a(56948),R=a(19484),E=a(33394),T=a(70691),D=a(52429),k=a(25422),Z=a(1804),O=a(64611);function P({onChannelCreated:e,onBack:s}){let[a,l]=(0,n.useState)(""),[r,i]=(0,n.useState)(""),[o,u]=(0,n.useState)(""),[h,p]=(0,n.useState)(""),[g,f]=(0,n.useState)(""),[N,v]=(0,n.useState)(""),[A,S]=(0,n.useState)(""),[P,M]=(0,n.useState)(""),[z,L]=(0,n.useState)(""),[W,G]=(0,n.useState)(""),[V,U]=(0,n.useState)(!1),[_,F]=(0,n.useState)(!1),[B,Y]=(0,n.useState)(!1),[$,Q]=(0,n.useState)("idle"),X=async(e,s)=>{try{await navigator.clipboard.writeText(e),O.Am.success(`${s} copiado al portapapeles`)}catch(e){O.Am.error("Error al copiar")}},H=async()=>{if(!o||!h||!N)return O.Am.error("Por favor completa todos los campos requeridos"),!1;Y(!0),Q("testing");try{if(await new Promise(e=>setTimeout(e,3e3)),Math.random()>.3)return Q("success"),!0;return Q("error"),O.Am.error("Las credenciales no son v\xe1lidas"),!1}catch(e){return Q("error"),O.Am.error("Error al validar las credenciales"),!1}finally{Y(!1)}},q=async()=>{await H()&&a&&r&&(e({id:`channel_${Date.now()}`,name:a,phone:r,connectionType:"API_OFFICIAL",status:"CONNECTED",isActive:!0,isDefault:V,messagesReceived:0,messagesSent:0,connectedAt:new Date}),O.Am.success("Canal creado exitosamente"),s())},J=`${window.location.origin}/api/webhooks/whatsapp`;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Conexi\xf3n Profesional (API)"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Conecta usando la API oficial de Meta para funcionalidades avanzadas"})]}),(0,t.jsx)(d.z,{variant:"outline",onClick:s,children:"Volver"})]}),(0,t.jsxs)(I.bZ,{className:"border-blue-200 bg-blue-50",children:[(0,t.jsx)(R.Z,{className:"h-4 w-4 text-blue-600"}),(0,t.jsxs)(I.X,{className:"text-blue-800",children:[(0,t.jsx)("strong",{children:"Conexi\xf3n Profesional:"})," Esta opci\xf3n requiere una cuenta de Meta Business y configuraci\xf3n avanzada. Ofrece mayor control, estad\xedsticas detalladas y capacidad de automatizaci\xf3n."]})]}),(0,t.jsxs)(x.Tabs,{defaultValue:"setup",className:"space-y-6",children:[(0,t.jsxs)(x.TabsList,{className:"grid w-full grid-cols-3",children:[(0,t.jsx)(x.TabsTrigger,{value:"setup",children:"Configuraci\xf3n Inicial"}),(0,t.jsx)(x.TabsTrigger,{value:"credentials",children:"Credenciales API"}),(0,t.jsx)(x.TabsTrigger,{value:"advanced",children:"Configuraci\xf3n Avanzada"})]}),(0,t.jsxs)(x.TabsContent,{value:"setup",className:"space-y-6",children:[(0,t.jsxs)(c.Zb,{children:[(0,t.jsxs)(c.Ol,{children:[(0,t.jsx)(c.ll,{children:"Informaci\xf3n del Canal"}),(0,t.jsx)(c.SZ,{children:"Configuraci\xf3n b\xe1sica de tu canal profesional"})]}),(0,t.jsxs)(c.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.Label,{htmlFor:"api-channel-name",children:"Nombre del Canal *"}),(0,t.jsx)(b.I,{id:"api-channel-name",value:a,onChange:e=>l(e.target.value),placeholder:"Ej: Ventas Profesional"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.Label,{htmlFor:"api-phone-number",children:"N\xfamero de Tel\xe9fono *"}),(0,t.jsx)(b.I,{id:"api-phone-number",value:r,onChange:e=>i(e.target.value),placeholder:"+52 55 1234 5678"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between pt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(y.Label,{children:"Canal Predeterminado"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Usar este canal como predeterminado para nuevas conversaciones"})]}),(0,t.jsx)(C.Switch,{checked:V,onCheckedChange:U})]})]})]}),(0,t.jsxs)(c.Zb,{children:[(0,t.jsxs)(c.Ol,{children:[(0,t.jsx)(c.ll,{children:"Gu\xeda de Configuraci\xf3n"}),(0,t.jsx)(c.SZ,{children:"Pasos para obtener las credenciales de la API de Meta"})]}),(0,t.jsx)(c.aY,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"w-6 h-6 rounded-full bg-blue-100 text-blue-600 text-sm font-semibold flex items-center justify-center",children:"1"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Crear una App de Meta"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:'Ve a Meta for Developers y crea una nueva aplicaci\xf3n de tipo "Business"'}),(0,t.jsx)(d.z,{variant:"outline",size:"sm",className:"mt-2",asChild:!0,children:(0,t.jsxs)("a",{href:"https://developers.facebook.com/apps",target:"_blank",rel:"noopener noreferrer",children:[(0,t.jsx)(E.Z,{className:"h-3 w-3 mr-1"}),"Ir a Meta Developers"]})})]})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"w-6 h-6 rounded-full bg-blue-100 text-blue-600 text-sm font-semibold flex items-center justify-center",children:"2"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Configurar WhatsApp Business API"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:'Agrega el producto "WhatsApp" a tu aplicaci\xf3n y configura tu n\xfamero de tel\xe9fono'})]})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"w-6 h-6 rounded-full bg-blue-100 text-blue-600 text-sm font-semibold flex items-center justify-center",children:"3"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Obtener Credenciales"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Copia el Access Token, App ID, y Phone Number ID desde el panel de Meta"})]})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"w-6 h-6 rounded-full bg-blue-100 text-blue-600 text-sm font-semibold flex items-center justify-center",children:"4"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Configurar Webhook"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Configura el webhook para recibir mensajes entrantes"})]})]})]})})]})]}),(0,t.jsx)(x.TabsContent,{value:"credentials",className:"space-y-6",children:(0,t.jsxs)(c.Zb,{children:[(0,t.jsxs)(c.Ol,{children:[(0,t.jsxs)(c.ll,{className:"flex items-center space-x-2",children:[(0,t.jsx)(T.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Credenciales de la API de Meta"})]}),(0,t.jsx)(c.SZ,{children:"Introduce las credenciales obtenidas de tu aplicaci\xf3n de Meta"})]}),(0,t.jsxs)(c.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.Label,{htmlFor:"access-token",children:"Access Token *"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(b.I,{id:"access-token",type:_?"text":"password",value:o,onChange:e=>u(e.target.value),placeholder:"EAAxxxxxxxxxxxxxxxxxxxx"}),(0,t.jsx)(d.z,{variant:"outline",size:"sm",onClick:()=>F(!_),children:_?(0,t.jsx)(D.Z,{className:"h-4 w-4"}):(0,t.jsx)(k.Z,{className:"h-4 w-4"})})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Token de acceso de tu aplicaci\xf3n de Meta"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.Label,{htmlFor:"app-id",children:"App ID *"}),(0,t.jsx)(b.I,{id:"app-id",value:h,onChange:e=>p(e.target.value),placeholder:"1234567890123456"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.Label,{htmlFor:"app-secret",children:"App Secret"}),(0,t.jsx)(b.I,{id:"app-secret",type:_?"text":"password",value:g,onChange:e=>f(e.target.value),placeholder:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.Label,{htmlFor:"phone-number-id",children:"Phone Number ID *"}),(0,t.jsx)(b.I,{id:"phone-number-id",value:N,onChange:e=>v(e.target.value),placeholder:"1234567890123456"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.Label,{htmlFor:"business-account-id",children:"Business Account ID"}),(0,t.jsx)(b.I,{id:"business-account-id",value:A,onChange:e=>S(e.target.value),placeholder:"1234567890123456"})]})]}),(0,t.jsxs)("div",{className:"pt-4 border-t",children:[(0,t.jsx)("h4",{className:"font-medium mb-3",children:"Configuraci\xf3n de Webhook"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.Label,{children:"URL de Webhook"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(b.I,{value:J,readOnly:!0,className:"bg-gray-50"}),(0,t.jsx)(d.z,{variant:"outline",size:"sm",onClick:()=>X(J,"URL de webhook"),children:(0,t.jsx)(Z.Z,{className:"h-4 w-4"})})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Configura esta URL en tu aplicaci\xf3n de Meta"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.Label,{htmlFor:"webhook-token",children:"Verify Token"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(b.I,{id:"webhook-token",value:P,onChange:e=>M(e.target.value),placeholder:"Token de verificaci\xf3n"}),(0,t.jsx)(d.z,{variant:"outline",size:"sm",onClick:()=>{M(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)),O.Am.success("Token de webhook generado")},children:"Generar"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Token para verificar los webhooks"})]})]})]}),"idle"!==$&&(0,t.jsxs)("div",{className:"pt-4",children:["testing"===$&&(0,t.jsxs)(I.bZ,{className:"border-yellow-200 bg-yellow-50",children:[(0,t.jsx)(j.Z,{className:"h-4 w-4 text-yellow-600"}),(0,t.jsx)(I.X,{className:"text-yellow-800",children:"Validando credenciales..."})]}),"success"===$&&(0,t.jsxs)(I.bZ,{className:"border-green-200 bg-green-50",children:[(0,t.jsx)(m.Z,{className:"h-4 w-4 text-green-600"}),(0,t.jsx)(I.X,{className:"text-green-800",children:"\xa1Credenciales v\xe1lidas! La conexi\xf3n se estableci\xf3 correctamente."})]}),"error"===$&&(0,t.jsxs)(I.bZ,{className:"border-red-200 bg-red-50",children:[(0,t.jsx)(j.Z,{className:"h-4 w-4 text-red-600"}),(0,t.jsx)(I.X,{className:"text-red-800",children:"Error al validar las credenciales. Verifica que sean correctas."})]})]}),(0,t.jsx)("div",{className:"pt-4",children:(0,t.jsx)(d.z,{onClick:H,disabled:B||!o||!h||!N,className:"w-full",children:B?"Validando...":"Probar Conexi\xf3n"})})]})]})}),(0,t.jsxs)(x.TabsContent,{value:"advanced",className:"space-y-6",children:[(0,t.jsxs)(c.Zb,{children:[(0,t.jsxs)(c.Ol,{children:[(0,t.jsx)(c.ll,{children:"Mensajes Autom\xe1ticos"}),(0,t.jsx)(c.SZ,{children:"Configura mensajes autom\xe1ticos para mejorar la experiencia del cliente"})]}),(0,t.jsxs)(c.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.Label,{htmlFor:"api-welcome-message",children:"Mensaje de Bienvenida"}),(0,t.jsx)(w.g,{id:"api-welcome-message",value:z,onChange:e=>L(e.target.value),placeholder:"\xa1Hola! Gracias por contactarnos. En breve uno de nuestros agentes te atender\xe1.",rows:3}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Mensaje autom\xe1tico enviado a nuevos contactos"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.Label,{htmlFor:"api-auto-reply",children:"Respuesta Autom\xe1tica"}),(0,t.jsx)(w.g,{id:"api-auto-reply",value:W,onChange:e=>G(e.target.value),placeholder:"Gracias por tu mensaje. Actualmente estamos fuera del horario de atenci\xf3n. Te responderemos pronto.",rows:3}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Mensaje enviado fuera del horario de atenci\xf3n"})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,t.jsx)(d.z,{variant:"outline",onClick:s,children:"Cancelar"}),(0,t.jsx)(d.z,{onClick:q,disabled:!a||!r||!o||!h||!N||B,className:"bg-blue-600 hover:bg-blue-700",children:B?"Creando Canal...":"Crear Canal"})]})]})]})]})}var M=a(29530),z=a(99321),L=a(79582),W=a(78539),G=a(20357),V=a(40563),U=a(26378),_=a(99719),F=a(33186);function B({channels:e,selectedChannel:s,onChannelSelect:a,onChannelUpdate:l,onChannelDelete:r}){let[i,x]=(0,n.useState)(null),[p,f]=(0,n.useState)({name:"",phone:"",welcomeMessage:"",autoReplyMessage:"",isActive:!0,isDefault:!1}),v=e=>{switch(e){case"CONNECTED":return(0,t.jsx)(m.Z,{className:"h-4 w-4 text-green-600"});case"CONNECTING":return(0,t.jsx)(u.Z,{className:"h-4 w-4 text-yellow-600"});case"DISCONNECTED":default:return(0,t.jsx)(h.Z,{className:"h-4 w-4 text-gray-400"});case"ERROR":case"EXPIRED":return(0,t.jsx)(j.Z,{className:"h-4 w-4 text-red-600"})}},A=e=>{x(e),f({name:e.name,phone:e.phone,welcomeMessage:"",autoReplyMessage:"",isActive:e.isActive,isDefault:e.isDefault})},S=e=>{r(e.id),O.Am.success("Canal eliminado exitosamente")},I=e=>{let s=!e.isActive;l(e.id,{isActive:s}),O.Am.success(`Canal ${s?"activado":"desactivado"}`)},R=e=>{if(!e)return"Nunca";let s=Math.floor((new Date().getTime()-e.getTime())/6e4),a=Math.floor(s/60);return s<1?"Ahora":s<60?`Hace ${s} min`:a<24?`Hace ${a}h`:`Hace ${Math.floor(a/24)} d\xedas`};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(c.Zb,{children:[(0,t.jsxs)(c.Ol,{children:[(0,t.jsx)(c.ll,{children:"Gesti\xf3n de Canales"}),(0,t.jsx)(c.SZ,{children:"Administra todos tus canales de WhatsApp conectados"})]}),(0,t.jsx)(c.aY,{children:0===e.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,t.jsx)(g.Z,{className:"w-8 h-8 text-gray-400"})}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay canales configurados"}),(0,t.jsx)("p",{className:"text-gray-500 mb-4",children:"Crea tu primer canal para comenzar a usar WhatsApp"})]}):(0,t.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,t.jsx)("div",{className:`p-4 border rounded-lg hover:bg-gray-50 transition-colors cursor-pointer ${s?.id===e.id?"ring-2 ring-blue-500 bg-blue-50":""}`,onClick:()=>a(e),children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:v(e.status)}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 truncate",children:e.name}),e.isDefault&&(0,t.jsxs)(o.C,{variant:"secondary",className:"text-xs bg-yellow-100 text-yellow-800",children:[(0,t.jsx)(L.Z,{className:"h-3 w-3 mr-1"}),"Predeterminado"]}),!e.isActive&&(0,t.jsx)(o.C,{variant:"outline",className:"text-xs text-gray-500",children:"Inactivo"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,t.jsx)("span",{children:e.phone}),(0,t.jsx)("span",{children:"â€¢"}),(0,t.jsx)("span",{children:F.Sn[e.connectionType]}),(0,t.jsx)("span",{children:"â€¢"}),(0,t.jsx)(o.C,{variant:"outline",className:`text-xs ${"green"===F.Om[e.status]?"border-green-200 text-green-700":"yellow"===F.Om[e.status]?"border-yellow-200 text-yellow-700":"red"===F.Om[e.status]?"border-red-200 text-red-700":"orange"===F.Om[e.status]?"border-orange-200 text-orange-700":"border-gray-200 text-gray-700"}`,children:F.fB[e.status]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"hidden md:flex items-center space-x-4 text-sm",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:(e.messagesReceived+e.messagesSent).toLocaleString()}),(0,t.jsx)("p",{className:"text-gray-500",children:"Mensajes"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:R(e.lastActivity)}),(0,t.jsx)("p",{className:"text-gray-500",children:"Actividad"})]})]}),(0,t.jsxs)(_.h_,{children:[(0,t.jsx)(_.$F,{asChild:!0,onClick:e=>e.stopPropagation(),children:(0,t.jsx)(d.z,{variant:"ghost",size:"sm",children:(0,t.jsx)(W.Z,{className:"h-4 w-4"})})}),(0,t.jsxs)(_.AW,{align:"end",children:[(0,t.jsx)(_.Ju,{children:"Acciones"}),(0,t.jsx)(_.VD,{}),(0,t.jsxs)(_.Xi,{onClick:s=>{s.stopPropagation(),A(e)},children:[(0,t.jsx)(G.Z,{className:"h-4 w-4 mr-2"}),"Editar"]}),(0,t.jsxs)(_.Xi,{onClick:s=>{s.stopPropagation(),I(e)},children:[(0,t.jsx)(N.Z,{className:"h-4 w-4 mr-2"}),e.isActive?"Desactivar":"Activar"]}),(0,t.jsx)(_.VD,{}),(0,t.jsxs)(z.aR,{children:[(0,t.jsx)(z.vW,{asChild:!0,children:(0,t.jsxs)(_.Xi,{className:"text-red-600 focus:text-red-600",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)(V.Z,{className:"h-4 w-4 mr-2"}),"Eliminar"]})}),(0,t.jsxs)(z._T,{onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)(z.fY,{children:[(0,t.jsx)(z.f$,{children:"\xbfEst\xe1s seguro?"}),(0,t.jsxs)(z.yT,{children:['Esta acci\xf3n no se puede deshacer. Se eliminar\xe1 permanentemente el canal "',e.name,'" y se perder\xe1 toda la configuraci\xf3n asociada.']})]}),(0,t.jsxs)(z.xo,{children:[(0,t.jsx)(z.le,{children:"Cancelar"}),(0,t.jsx)(z.OL,{className:"bg-red-600 hover:bg-red-700",onClick:()=>S(e),children:"Eliminar"})]})]})]})]})]})]})]})},e.id))})})]}),s&&(0,t.jsxs)(c.Zb,{children:[(0,t.jsxs)(c.Ol,{children:[(0,t.jsxs)(c.ll,{className:"flex items-center space-x-2",children:[(0,t.jsx)(U.Z,{className:"h-5 w-5"}),(0,t.jsxs)("span",{children:["Detalles de ",s.name]})]}),(0,t.jsx)(c.SZ,{children:"Estad\xedsticas y configuraci\xf3n detallada del canal"})]}),(0,t.jsx)(c.aY,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900",children:"Informaci\xf3n General"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Estado:"}),(0,t.jsx)(o.C,{variant:"outline",className:`text-xs ${"green"===F.Om[s.status]?"border-green-200 text-green-700":"yellow"===F.Om[s.status]?"border-yellow-200 text-yellow-700":"red"===F.Om[s.status]?"border-red-200 text-red-700":"orange"===F.Om[s.status]?"border-orange-200 text-orange-700":"border-gray-200 text-gray-700"}`,children:F.fB[s.status]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Tipo:"}),(0,t.jsx)("span",{className:"font-medium",children:F.Sn[s.connectionType]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Conectado:"}),(0,t.jsx)("span",{className:"font-medium",children:s.connectedAt?s.connectedAt.toLocaleDateString("es-ES"):"No conectado"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"\xdaltima actividad:"}),(0,t.jsx)("span",{className:"font-medium",children:R(s.lastActivity)})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900",children:"Estad\xedsticas"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Recibidos:"}),(0,t.jsx)("span",{className:"font-medium text-blue-600",children:s.messagesReceived.toLocaleString()})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Enviados:"}),(0,t.jsx)("span",{className:"font-medium text-green-600",children:s.messagesSent.toLocaleString()})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Total:"}),(0,t.jsx)("span",{className:"font-medium",children:(s.messagesReceived+s.messagesSent).toLocaleString()})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900",children:"Acciones"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(d.z,{size:"sm",variant:"outline",className:"w-full justify-start",onClick:()=>A(s),children:[(0,t.jsx)(G.Z,{className:"h-4 w-4 mr-2"}),"Editar Configuraci\xf3n"]}),(0,t.jsxs)(d.z,{size:"sm",variant:"outline",className:"w-full justify-start",onClick:()=>I(s),children:[(0,t.jsx)(N.Z,{className:"h-4 w-4 mr-2"}),s.isActive?"Desactivar Canal":"Activar Canal"]})]})]})]})})]}),(0,t.jsx)(M.Vq,{open:!!i,onOpenChange:()=>x(null),children:(0,t.jsxs)(M.cZ,{className:"sm:max-w-[500px]",children:[(0,t.jsxs)(M.fK,{children:[(0,t.jsx)(M.$N,{children:"Editar Canal"}),(0,t.jsx)(M.Be,{children:"Modifica la configuraci\xf3n del canal de WhatsApp"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.Label,{htmlFor:"edit-name",children:"Nombre del Canal"}),(0,t.jsx)(b.I,{id:"edit-name",value:p.name,onChange:e=>f(s=>({...s,name:e.target.value}))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.Label,{htmlFor:"edit-phone",children:"N\xfamero de Tel\xe9fono"}),(0,t.jsx)(b.I,{id:"edit-phone",value:p.phone,onChange:e=>f(s=>({...s,phone:e.target.value}))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.Label,{htmlFor:"edit-welcome",children:"Mensaje de Bienvenida"}),(0,t.jsx)(w.g,{id:"edit-welcome",value:p.welcomeMessage,onChange:e=>f(s=>({...s,welcomeMessage:e.target.value})),rows:3,placeholder:"Mensaje autom\xe1tico para nuevos contactos"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.Label,{htmlFor:"edit-auto-reply",children:"Respuesta Autom\xe1tica"}),(0,t.jsx)(w.g,{id:"edit-auto-reply",value:p.autoReplyMessage,onChange:e=>f(s=>({...s,autoReplyMessage:e.target.value})),rows:3,placeholder:"Mensaje fuera del horario de atenci\xf3n"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(y.Label,{children:"Canal Activo"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Activar o desactivar este canal"})]}),(0,t.jsx)(C.Switch,{checked:p.isActive,onCheckedChange:e=>f(s=>({...s,isActive:e}))})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(y.Label,{children:"Canal Predeterminado"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Usar como canal principal para nuevas conversaciones"})]}),(0,t.jsx)(C.Switch,{checked:p.isDefault,onCheckedChange:e=>f(s=>({...s,isDefault:e}))})]})]}),(0,t.jsxs)(M.cN,{children:[(0,t.jsx)(d.z,{variant:"outline",onClick:()=>x(null),children:"Cancelar"}),(0,t.jsx)(d.z,{onClick:()=>{i&&(l(i.id,{name:p.name,phone:p.phone,isActive:p.isActive,isDefault:p.isDefault}),p.isDefault&&e.forEach(e=>{e.id!==i.id&&e.isDefault&&l(e.id,{isDefault:!1})}),O.Am.success("Canal actualizado exitosamente"),x(null))},children:"Guardar Cambios"})]})]})})]})}let Y=[{id:"1",name:"Soporte Principal",phone:"+52 55 1234 5678",connectionType:"QR_CODE",status:"CONNECTED",isActive:!0,isDefault:!0,messagesReceived:1245,messagesSent:987,lastActivity:new Date(Date.now()-3e5),connectedAt:new Date(Date.now()-1728e5)},{id:"2",name:"Ventas",phone:"+52 55 8765 4321",connectionType:"API_OFFICIAL",status:"CONNECTED",isActive:!0,isDefault:!1,messagesReceived:645,messagesSent:523,lastActivity:new Date(Date.now()-9e5),connectedAt:new Date(Date.now()-6048e5)},{id:"3",name:"Servicio T\xe9cnico",phone:"+52 55 5555 0000",connectionType:"QR_CODE",status:"EXPIRED",isActive:!1,isDefault:!1,messagesReceived:234,messagesSent:198,lastActivity:new Date(Date.now()-2592e5),connectedAt:new Date(Date.now()-864e6)}];function $(){let{data:e}=(0,l.useSession)()||{},[s,a]=(0,n.useState)(Y),[b,y]=(0,n.useState)("overview"),[w,C]=(0,n.useState)(null),A=e=>{switch(e){case"CONNECTED":return(0,t.jsx)(m.Z,{className:"h-4 w-4 text-green-600"});case"CONNECTING":return(0,t.jsx)(u.Z,{className:"h-4 w-4 text-yellow-600"});case"DISCONNECTED":default:return(0,t.jsx)(h.Z,{className:"h-4 w-4 text-gray-400"});case"ERROR":return(0,t.jsx)(j.Z,{className:"h-4 w-4 text-red-600"});case"EXPIRED":return(0,t.jsx)(j.Z,{className:"h-4 w-4 text-orange-600"})}},I=e=>{a(s=>[...s,e])},R=s.filter(e=>"CONNECTED"===e.status&&e.isActive),E=s.reduce((e,s)=>e+s.messagesReceived+s.messagesSent,0);return(0,t.jsx)(r.ProtectedRoute,{permissions:[i.y3.MANAGE_ORGANIZATION_SETTINGS],children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Canales de WhatsApp"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Gestiona las conexiones de WhatsApp para tu organizaci\xf3n"})]}),(0,t.jsxs)(d.z,{onClick:()=>y("new-connection"),className:"bg-green-600 hover:bg-green-700",children:[(0,t.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Nuevo Canal"]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,t.jsx)(c.Zb,{children:(0,t.jsx)(c.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,t.jsx)(g.Z,{className:"h-5 w-5 text-green-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.length}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Canales Totales"})]})]})})}),(0,t.jsx)(c.Zb,{children:(0,t.jsx)(c.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,t.jsx)(f.Z,{className:"h-5 w-5 text-blue-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:R.length}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Conectados"})]})]})})}),(0,t.jsx)(c.Zb,{children:(0,t.jsx)(c.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,t.jsx)(N.Z,{className:"h-5 w-5 text-purple-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:E.toLocaleString()}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Mensajes Totales"})]})]})})}),(0,t.jsx)(c.Zb,{children:(0,t.jsx)(c.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"p-2 bg-indigo-100 rounded-lg",children:(0,t.jsx)(m.Z,{className:"h-5 w-5 text-indigo-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.find(e=>e.isDefault)?.name||"No definido"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 truncate",children:"Canal Predeterminado"})]})]})})})]}),(0,t.jsxs)(x.Tabs,{value:b,onValueChange:y,className:"space-y-6",children:[(0,t.jsxs)(x.TabsList,{className:"grid w-full grid-cols-4",children:[(0,t.jsxs)(x.TabsTrigger,{value:"overview",children:[(0,t.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"Resumen"]}),(0,t.jsxs)(x.TabsTrigger,{value:"channels",children:[(0,t.jsx)(N.Z,{className:"w-4 h-4 mr-2"}),"Canales"]}),(0,t.jsxs)(x.TabsTrigger,{value:"qr-connection",children:[(0,t.jsx)(v.Z,{className:"w-4 h-4 mr-2"}),"Conexi\xf3n QR"]}),(0,t.jsxs)(x.TabsTrigger,{value:"api-connection",children:[(0,t.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),"Conexi\xf3n API"]})]}),(0,t.jsx)(x.TabsContent,{value:"overview",className:"space-y-6",children:(0,t.jsxs)(c.Zb,{children:[(0,t.jsxs)(c.Ol,{children:[(0,t.jsx)(c.ll,{children:"Estado de Conexiones"}),(0,t.jsx)(c.SZ,{children:"Vista general de todos tus canales de WhatsApp"})]}),(0,t.jsx)(c.aY,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[s.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,t.jsx)("div",{className:"flex items-center space-x-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[A(e.status),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"font-medium",children:e.name}),e.isDefault&&(0,t.jsx)(o.C,{variant:"secondary",className:"text-xs",children:"Predeterminado"}),!e.isActive&&(0,t.jsx)(o.C,{variant:"outline",className:"text-xs text-gray-500",children:"Inactivo"})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:[e.phone," â€¢ ",F.Sn[e.connectionType]]})]})]})}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"text-right text-sm",children:[(0,t.jsxs)("p",{className:"text-gray-900",children:[(e.messagesReceived+e.messagesSent).toLocaleString()," mensajes"]}),(0,t.jsx)("p",{className:"text-gray-500",children:(0,t.jsx)(o.C,{variant:"outline",className:`text-xs ${"green"===F.Om[e.status]?"border-green-200 text-green-700":"yellow"===F.Om[e.status]?"border-yellow-200 text-yellow-700":"red"===F.Om[e.status]?"border-red-200 text-red-700":"orange"===F.Om[e.status]?"border-orange-200 text-orange-700":"border-gray-200 text-gray-700"}`,children:F.fB[e.status]})})]}),(0,t.jsx)(d.z,{variant:"outline",size:"sm",onClick:()=>{C(e),y("channels")},children:"Configurar"})]})]},e.id)),0===s.length&&(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,t.jsx)(g.Z,{className:"w-8 h-8 text-gray-400"})}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay canales configurados"}),(0,t.jsx)("p",{className:"text-gray-500 mb-4",children:"Conecta tu primer canal de WhatsApp para comenzar"}),(0,t.jsx)(d.z,{onClick:()=>y("qr-connection"),children:"Crear Primer Canal"})]})]})})]})}),(0,t.jsx)(x.TabsContent,{value:"channels",children:(0,t.jsx)(B,{channels:s,selectedChannel:w,onChannelSelect:C,onChannelUpdate:(e,s)=>{a(a=>a.map(a=>a.id===e?{...a,...s}:a))},onChannelDelete:e=>{a(s=>s.filter(s=>s.id!==e)),w?.id===e&&C(null)}})}),(0,t.jsx)(x.TabsContent,{value:"qr-connection",children:(0,t.jsx)(S,{onChannelCreated:I,onBack:()=>y("overview")})}),(0,t.jsx)(x.TabsContent,{value:"api-connection",children:(0,t.jsx)(P,{onChannelCreated:I,onBack:()=>y("overview")})})]})]})})}},82538:function(e,s,a){"use strict";a.d(s,{ProtectedRoute:function(){return o}});var t=a(15444),n=a(51924),l=a(56948),r=a(81059),i=a(70362),c=a(2422),d=a(79047);function o({children:e,permissions:s=[],requireAll:a=!1,fallback:o,redirectTo:x}){let{isLoading:m,isAuthenticated:u,hasAnyPermission:h,hasAllPermissions:j,getDashboardRoute:p}=(0,n.TE)(),g=(0,d.useRouter)();return m?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):u?!(s.length>0)||(a?j(s):h(s))?(0,t.jsx)(t.Fragment,{children:e}):o?(0,t.jsx)(t.Fragment,{children:o}):(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,t.jsxs)(l.bZ,{className:"max-w-md",children:[(0,t.jsx)(i.Z,{className:"h-4 w-4"}),(0,t.jsx)(l.Cd,{children:"Sin Permisos"}),(0,t.jsx)(l.X,{children:"No tienes los permisos necesarios para acceder a esta funcionalidad."}),(0,t.jsx)(c.z,{onClick:()=>g.push(x||p()),className:"mt-3 w-full",children:"Volver al Dashboard"})]})}):(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,t.jsxs)(l.bZ,{className:"max-w-md",children:[(0,t.jsx)(r.Z,{className:"h-4 w-4"}),(0,t.jsx)(l.Cd,{children:"Acceso Denegado"}),(0,t.jsx)(l.X,{children:"Debes iniciar sesi\xf3n para acceder a esta p\xe1gina."}),(0,t.jsx)(c.z,{onClick:()=>g.push("/auth/login"),className:"mt-3 w-full",children:"Iniciar Sesi\xf3n"})]})})}},99321:function(e,s,a){"use strict";a.d(s,{OL:function(){return g},_T:function(){return m},aR:function(){return c},f$:function(){return j},fY:function(){return u},le:function(){return f},vW:function(){return d},xo:function(){return h},yT:function(){return p}});var t=a(15444),n=a(89300),l=a(95954),r=a(65522),i=a(2422);let c=l.fC,d=l.xz,o=l.h_,x=n.forwardRef(({className:e,...s},a)=>(0,t.jsx)(l.aV,{className:(0,r.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s,ref:a}));x.displayName=l.aV.displayName;let m=n.forwardRef(({className:e,...s},a)=>(0,t.jsxs)(o,{children:[(0,t.jsx)(x,{}),(0,t.jsx)(l.VY,{ref:a,className:(0,r.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s})]}));m.displayName=l.VY.displayName;let u=({className:e,...s})=>(0,t.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...s});u.displayName="AlertDialogHeader";let h=({className:e,...s})=>(0,t.jsx)("div",{className:(0,r.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});h.displayName="AlertDialogFooter";let j=n.forwardRef(({className:e,...s},a)=>(0,t.jsx)(l.Dx,{ref:a,className:(0,r.cn)("text-lg font-semibold",e),...s}));j.displayName=l.Dx.displayName;let p=n.forwardRef(({className:e,...s},a)=>(0,t.jsx)(l.dk,{ref:a,className:(0,r.cn)("text-sm text-muted-foreground",e),...s}));p.displayName=l.dk.displayName;let g=n.forwardRef(({className:e,...s},a)=>(0,t.jsx)(l.aU,{ref:a,className:(0,r.cn)((0,i.d)(),e),...s}));g.displayName=l.aU.displayName;let f=n.forwardRef(({className:e,...s},a)=>(0,t.jsx)(l.$j,{ref:a,className:(0,r.cn)((0,i.d)({variant:"outline"}),"mt-2 sm:mt-0",e),...s}));f.displayName=l.$j.displayName},56948:function(e,s,a){"use strict";a.d(s,{Cd:function(){return d},X:function(){return o},bZ:function(){return c}});var t=a(15444),n=a(89300),l=a(2371),r=a(65522);let i=(0,l.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=n.forwardRef(({className:e,variant:s,...a},n)=>(0,t.jsx)("div",{ref:n,role:"alert",className:(0,r.cn)(i({variant:s}),e),...a}));c.displayName="Alert";let d=n.forwardRef(({className:e,...s},a)=>(0,t.jsx)("h5",{ref:a,className:(0,r.cn)("mb-1 font-medium leading-none tracking-tight",e),...s}));d.displayName="AlertTitle";let o=n.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,r.cn)("text-sm [&_p]:leading-relaxed",e),...s}));o.displayName="AlertDescription"},29530:function(e,s,a){"use strict";a.d(s,{$N:function(){return j},Be:function(){return p},Vq:function(){return c},cN:function(){return h},cZ:function(){return m},fK:function(){return u},hg:function(){return d}});var t=a(15444),n=a(89300),l=a(49095),r=a(33485),i=a(65522);let c=l.fC,d=l.xz,o=l.h_;l.x8;let x=n.forwardRef(({className:e,...s},a)=>(0,t.jsx)(l.aV,{ref:a,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));x.displayName=l.aV.displayName;let m=n.forwardRef(({className:e,children:s,...a},n)=>(0,t.jsxs)(o,{children:[(0,t.jsx)(x,{}),(0,t.jsxs)(l.VY,{ref:n,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[s,(0,t.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(r.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));m.displayName=l.VY.displayName;let u=({className:e,...s})=>(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});u.displayName="DialogHeader";let h=({className:e,...s})=>(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});h.displayName="DialogFooter";let j=n.forwardRef(({className:e,...s},a)=>(0,t.jsx)(l.Dx,{ref:a,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));j.displayName=l.Dx.displayName;let p=n.forwardRef(({className:e,...s},a)=>(0,t.jsx)(l.dk,{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",e),...s}));p.displayName=l.dk.displayName},74678:function(e,s,a){"use strict";a.d(s,{I:function(){return r}});var t=a(15444),n=a(89300),l=a(65522);let r=n.forwardRef(({className:e,type:s,...a},n)=>(0,t.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...a}));r.displayName="Input"},34635:function(e,s,a){"use strict";a.d(s,{Label:function(){return d}});var t=a(15444),n=a(89300),l=a(4100),r=a(2371),i=a(65522);let c=(0,r.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=n.forwardRef(({className:e,...s},a)=>(0,t.jsx)(l.f,{ref:a,className:(0,i.cn)(c(),e),...s}));d.displayName=l.f.displayName},25181:function(e,s,a){"use strict";a.d(s,{Switch:function(){return i}});var t=a(15444),n=a(89300),l=a(62312),r=a(65522);let i=n.forwardRef(({className:e,...s},a)=>(0,t.jsx)(l.fC,{className:(0,r.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,ref:a,children:(0,t.jsx)(l.bU,{className:(0,r.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));i.displayName=l.fC.displayName},86765:function(e,s,a){"use strict";a.d(s,{Tabs:function(){return i},TabsContent:function(){return o},TabsList:function(){return c},TabsTrigger:function(){return d}});var t=a(15444),n=a(89300),l=a(84018),r=a(65522);let i=l.fC,c=n.forwardRef(({className:e,...s},a)=>(0,t.jsx)(l.aV,{ref:a,className:(0,r.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));c.displayName=l.aV.displayName;let d=n.forwardRef(({className:e,...s},a)=>(0,t.jsx)(l.xz,{ref:a,className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));d.displayName=l.xz.displayName;let o=n.forwardRef(({className:e,...s},a)=>(0,t.jsx)(l.VY,{ref:a,className:(0,r.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));o.displayName=l.VY.displayName},67012:function(e,s,a){"use strict";a.d(s,{g:function(){return r}});var t=a(15444),n=a(89300),l=a(65522);let r=n.forwardRef(({className:e,...s},a)=>(0,t.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));r.displayName="Textarea"},51924:function(e,s,a){"use strict";a.d(s,{TE:function(){return l}});var t=a(75762),n=a(92937);function l(){let{data:e,status:s}=(0,t.useSession)(),a=e?.user,l=a?.role,r=a?.organizationId;return{isAuthenticated:!!e,isLoading:"loading"===s,user:a,role:l,organizationId:r,hasPermission:e=>!!l&&(0,n.N$)(l,e),hasAnyPermission:e=>!!l&&(0,n.vr)(l,e),hasAllPermissions:e=>{if(!l)return!1;let s=(0,n.ai)(l).map(e=>e.toString());return(0,n.wP)(s,e)},canAccessRoute:e=>{if(!l)return!1;let s=(0,n.ai)(l).map(e=>e.toString());return(0,n.mn)(s,e)},getDashboardRoute:()=>l?(0,n.Ol)(l):"/dashboard",getAllPermissions:()=>l?(0,n.ai)(l):[],isSuperAdmin:"SUPER_ADMIN"===l,isDistributor:"DISTRIBUIDOR"===l,isOwner:"PROPIETARIO"===l,isAgent:"AGENTE"===l,canManageUsers:"SUPER_ADMIN"===l||"PROPIETARIO"===l,canManageOrganization:"SUPER_ADMIN"===l||"PROPIETARIO"===l,canViewAllConversations:"AGENTE"!==l,canManageWhatsApp:"SUPER_ADMIN"===l||"PROPIETARIO"===l,canManageBilling:"SUPER_ADMIN"===l||"PROPIETARIO"===l,canConfigureAI:"SUPER_ADMIN"===l||"PROPIETARIO"===l,canViewReports:"AGENTE"!==l,canManageClients:"DISTRIBUIDOR"===l||"SUPER_ADMIN"===l}}}},function(e){e.O(0,[6539,5762,688,8077,8151,4018,1181,2578,1605,5480,3657,7232,2386,7156,1744],function(){return e(e.s=95403)}),_N_E=e.O()}]);