(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1370],{10019:function(e,s,a){Promise.resolve().then(a.bind(a,38135))},38135:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return ea}});var t=a(15444),i=a(89300),r=a(75762),n=a(99827),l=a(2422),c=a(61335),o=a(74678),d=a(25181),x=a(86765),m=a(29530),u=a(79507),h=a(61572),j=a(39429),f=a(6488),p=a(99983),g=a(82280),N=a(25076),v=a(92690),y=a(56603),b=a(4464),w=a(18218),C=a(26378),T=a(64990),Z=a(20357),E=a(40563),k=a(34635),S=a(67012),A=a(70489),R=a(92232),z=a(90185),I=a(79582),O=a(62492),D=a(34761),P=a(64624),M=a(33186);function _({ruleId:e,onSave:s,onCancel:a}){let[r,c]=(0,i.useState)(!1),[x,m]=(0,i.useState)(""),[u,h]=(0,i.useState)(""),[p,g]=(0,i.useState)(100),[N,v]=(0,i.useState)(!0),[y,b]=(0,i.useState)([]),[C,T]=(0,i.useState)([]),[Z,E]=(0,i.useState)([]);(0,i.useEffect)(()=>{e&&A(),z()},[e]);let A=async()=>{try{let s=await fetch(`/api/automations/rules/${e}`),a=await s.json();if(a.success){let e=a.data;m(e.name),h(e.description||""),g(e.priority),v(e.isActive),b(e.conditions.map(e=>({id:e.id,type:e.type,logicalOperator:e.logicalOperator||"AND",configuration:{intentionTypes:e.intentionTypes||[],keywords:e.keywords||[],keywordMatchType:e.keywordMatchType||"ANY",timeStart:e.timeStart,timeEnd:e.timeEnd,weekdays:e.weekdays||[],messageCountMin:e.messageCountMin,messageCountMax:e.messageCountMax,responseTimeMin:e.responseTimeMin,responseTimeMax:e.responseTimeMax}}))),T(e.actions.map(e=>({id:e.id,type:e.type,executionOrder:e.executionOrder,configuration:{tagName:e.tagName,tagColor:e.tagColor,agentId:e.agentId,priority:e.priority,replyMessage:e.replyMessage,replyDelay:e.replyDelay||0}})))}}catch(e){console.error("Error cargando regla:",e)}},z=async()=>{try{let e=await fetch("/api/users"),s=await e.json();s.success&&E(s.data.filter(e=>"AGENTE"===e.role))}catch(e){console.error("Error cargando agentes:",e)}},I=e=>{b(y.filter(s=>s.id!==e))},O=(e,s)=>{b(y.map(a=>a.id===e?{...a,...s}:a))},D=e=>{T(C.filter(s=>s.id!==e))},P=(e,s)=>{T(C.map(a=>a.id===e?{...a,...s}:a))},_=async()=>{if(!x.trim()){alert("El nombre de la regla es requerido");return}if(0===y.length){alert("Debe definir al menos una condici\xf3n");return}if(0===C.length){alert("Debe definir al menos una acci\xf3n");return}c(!0);try{let a={name:x.trim(),description:u.trim()||void 0,priority:p,isActive:N,conditions:y.map(e=>({type:e.type,logicalOperator:e.logicalOperator,...e.configuration})),actions:C.map((e,s)=>({type:e.type,executionOrder:s+1,...e.configuration}))},t=e?`/api/automations/rules/${e}`:"/api/automations/rules",i=e?"PUT":"POST",r=await fetch(t,{method:i,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),n=await r.json();n.success?s():alert(`Error: ${n.error}`)}catch(e){console.error("Error guardando regla:",e),alert("Error guardando regla")}finally{c(!1)}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(k.Label,{htmlFor:"rule-name",children:"Nombre de la Regla *"}),(0,t.jsx)(o.I,{id:"rule-name",value:x,onChange:e=>m(e.target.value),placeholder:"Ej: Clasificar consultas de ventas",className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(k.Label,{htmlFor:"rule-description",children:"Descripci\xf3n"}),(0,t.jsx)(S.g,{id:"rule-description",value:u,onChange:e=>h(e.target.value),placeholder:"Descripci\xf3n opcional de lo que hace esta regla",className:"mt-1"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(k.Label,{htmlFor:"priority",children:"Prioridad"}),(0,t.jsx)(o.I,{id:"priority",type:"number",value:p,onChange:e=>g(parseInt(e.target.value)||100),min:"1",max:"1000",className:"mt-1 w-24"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Menor n\xfamero = mayor prioridad"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 mt-6",children:[(0,t.jsx)(d.Switch,{id:"is-active",checked:N,onCheckedChange:v}),(0,t.jsx)(k.Label,{htmlFor:"is-active",children:"Regla activa"})]})]})]}),(0,t.jsx)(R.Z,{}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{children:[(0,t.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(f.Z,{className:"h-5 w-5"}),"Condiciones"]}),(0,t.jsx)(n.SZ,{children:"Define cu\xe1ndo debe ejecutarse esta regla. Todas las condiciones deben cumplirse."})]}),(0,t.jsxs)(n.aY,{className:"space-y-4",children:[y.map((e,s)=>(0,t.jsx)(L,{condition:e,isFirst:0===s,onUpdate:s=>O(e.id,s),onRemove:()=>I(e.id)},e.id)),(0,t.jsxs)(l.z,{variant:"outline",onClick:()=>{b([...y,{id:`condition_${Date.now()}`,type:M.Vb.INTENTION_DETECTED,logicalOperator:"AND",configuration:{intentionTypes:[],keywords:[],keywordMatchType:"ANY"}}])},children:[(0,t.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),"Agregar Condici\xf3n"]})]})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{children:[(0,t.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(w.Z,{className:"h-5 w-5"}),"Acciones"]}),(0,t.jsx)(n.SZ,{children:"Define qu\xe9 debe hacer el sistema cuando se cumplan las condiciones."})]}),(0,t.jsxs)(n.aY,{className:"space-y-4",children:[C.map((e,s)=>(0,t.jsx)(Y,{action:e,orderNumber:s+1,availableAgents:Z,onUpdate:s=>P(e.id,s),onRemove:()=>D(e.id)},e.id)),(0,t.jsxs)(l.z,{variant:"outline",onClick:()=>{let e={id:`action_${Date.now()}`,type:M.BT.ADD_TAG,executionOrder:C.length+1,configuration:{tagName:"",tagColor:"#3B82F6"}};T([...C,e])},children:[(0,t.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),"Agregar Acci\xf3n"]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(l.z,{variant:"outline",onClick:a,disabled:r,children:"Cancelar"}),(0,t.jsx)(l.z,{onClick:_,disabled:r,children:r?"Guardando...":e?"Actualizar Regla":"Crear Regla"})]})]})}function L({condition:e,isFirst:s,onUpdate:a,onRemove:i}){return(0,t.jsx)(n.Zb,{children:(0,t.jsx)(n.aY,{className:"pt-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[!s&&(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsxs)(A.Ph,{value:e.logicalOperator,onValueChange:e=>a({logicalOperator:e}),children:[(0,t.jsx)(A.i4,{className:"w-16",children:(0,t.jsx)(A.ki,{})}),(0,t.jsxs)(A.Bw,{children:[(0,t.jsx)(A.Ql,{value:"AND",children:"Y"}),(0,t.jsx)(A.Ql,{value:"OR",children:"O"})]})]})}),(0,t.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(e=>{switch(e){case M.Vb.INTENTION_DETECTED:return(0,t.jsx)(b.Z,{className:"h-4 w-4"});case M.Vb.KEYWORDS_CONTAINS:return(0,t.jsx)(z.Z,{className:"h-4 w-4"});case M.Vb.SENDER_IS_VIP:return(0,t.jsx)(I.Z,{className:"h-4 w-4"});case M.Vb.TIME_RANGE:return(0,t.jsx)(O.Z,{className:"h-4 w-4"});default:return(0,t.jsx)(f.Z,{className:"h-4 w-4"})}})(e.type),(0,t.jsxs)(A.Ph,{value:e.type,onValueChange:e=>a({type:e,configuration:{}}),children:[(0,t.jsx)(A.i4,{className:"w-64",children:(0,t.jsx)(A.ki,{})}),(0,t.jsx)(A.Bw,{children:Object.entries(M.d1).map(([e,s])=>(0,t.jsx)(A.Ql,{value:e,children:s},e))})]})]}),e.type===M.Vb.INTENTION_DETECTED&&(0,t.jsxs)("div",{children:[(0,t.jsx)(k.Label,{children:"Intenciones a detectar:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:Object.entries(M.ED).map(([s,i])=>(0,t.jsx)(c.C,{variant:e.configuration.intentionTypes?.includes(s)?"default":"outline",className:"cursor-pointer",onClick:()=>{let t=e.configuration.intentionTypes||[],i=t.includes(s)?t.filter(e=>e!==s):[...t,s];a({configuration:{...e.configuration,intentionTypes:i}})},children:i},s))})]}),e.type===M.Vb.KEYWORDS_CONTAINS&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(k.Label,{children:"Palabras clave:"}),(0,t.jsx)(o.I,{placeholder:"Separar con comas: precio, costo, cotizaci\xf3n",value:e.configuration.keywords?.join(", ")||"",onChange:s=>{let t=s.target.value.split(",").map(e=>e.trim()).filter(e=>e);a({configuration:{...e.configuration,keywords:t}})}}),(0,t.jsxs)(A.Ph,{value:e.configuration.keywordMatchType||"ANY",onValueChange:s=>a({configuration:{...e.configuration,keywordMatchType:s}}),children:[(0,t.jsx)(A.i4,{className:"w-48",children:(0,t.jsx)(A.ki,{})}),(0,t.jsxs)(A.Bw,{children:[(0,t.jsx)(A.Ql,{value:"ANY",children:"Cualquier palabra"}),(0,t.jsx)(A.Ql,{value:"ALL",children:"Todas las palabras"}),(0,t.jsx)(A.Ql,{value:"EXACT",children:"Coincidencia exacta"})]})]})]}),e.type===M.Vb.TIME_RANGE&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(k.Label,{children:"Hora inicio:"}),(0,t.jsx)(o.I,{type:"time",value:e.configuration.timeStart||"",onChange:s=>a({configuration:{...e.configuration,timeStart:s.target.value}})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(k.Label,{children:"Hora fin:"}),(0,t.jsx)(o.I,{type:"time",value:e.configuration.timeEnd||"",onChange:s=>a({configuration:{...e.configuration,timeEnd:s.target.value}})})]})]})]}),(0,t.jsx)(l.z,{variant:"ghost",size:"sm",onClick:i,className:"text-destructive",children:(0,t.jsx)(E.Z,{className:"h-4 w-4"})})]})})})}function Y({action:e,orderNumber:s,availableAgents:a,onUpdate:i,onRemove:r}){return(0,t.jsx)(n.Zb,{children:(0,t.jsx)(n.aY,{className:"pt-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(c.C,{variant:"outline",children:s})}),(0,t.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(e=>{switch(e){case M.BT.ADD_TAG:return(0,t.jsx)(D.Z,{className:"h-4 w-4"});case M.BT.ASSIGN_AGENT:return(0,t.jsx)(P.Z,{className:"h-4 w-4"});case M.BT.AUTO_REPLY:return(0,t.jsx)(z.Z,{className:"h-4 w-4"});case M.BT.MARK_VIP:return(0,t.jsx)(I.Z,{className:"h-4 w-4"});default:return(0,t.jsx)(w.Z,{className:"h-4 w-4"})}})(e.type),(0,t.jsxs)(A.Ph,{value:e.type,onValueChange:e=>i({type:e,configuration:{}}),children:[(0,t.jsx)(A.i4,{className:"w-64",children:(0,t.jsx)(A.ki,{})}),(0,t.jsx)(A.Bw,{children:Object.entries(M.Rn).map(([e,s])=>(0,t.jsx)(A.Ql,{value:e,children:s},e))})]})]}),e.type===M.BT.ADD_TAG&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(k.Label,{children:"Nombre de la etiqueta:"}),(0,t.jsx)(o.I,{value:e.configuration.tagName||"",onChange:s=>i({configuration:{...e.configuration,tagName:s.target.value}}),placeholder:"Cliente Potencial"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(k.Label,{children:"Color:"}),(0,t.jsx)(o.I,{type:"color",value:e.configuration.tagColor||"#3B82F6",onChange:s=>i({configuration:{...e.configuration,tagColor:s.target.value}})})]})]}),e.type===M.BT.ASSIGN_AGENT&&(0,t.jsxs)("div",{children:[(0,t.jsx)(k.Label,{children:"Asignar a agente:"}),(0,t.jsxs)(A.Ph,{value:e.configuration.agentId||"",onValueChange:s=>i({configuration:{...e.configuration,agentId:s}}),children:[(0,t.jsx)(A.i4,{children:(0,t.jsx)(A.ki,{placeholder:"Seleccionar agente"})}),(0,t.jsx)(A.Bw,{children:a.map(e=>(0,t.jsx)(A.Ql,{value:e.id,children:e.name||e.email},e.id))})]})]}),e.type===M.BT.SET_PRIORITY&&(0,t.jsxs)("div",{children:[(0,t.jsx)(k.Label,{children:"Prioridad:"}),(0,t.jsxs)(A.Ph,{value:e.configuration.priority||"",onValueChange:s=>i({configuration:{...e.configuration,priority:s}}),children:[(0,t.jsx)(A.i4,{children:(0,t.jsx)(A.ki,{placeholder:"Seleccionar prioridad"})}),(0,t.jsx)(A.Bw,{children:Object.entries(M.Go).map(([e,s])=>(0,t.jsx)(A.Ql,{value:e,children:s},e))})]})]}),e.type===M.BT.AUTO_REPLY&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(k.Label,{children:"Mensaje de respuesta:"}),(0,t.jsx)(S.g,{value:e.configuration.replyMessage||"",onChange:s=>i({configuration:{...e.configuration,replyMessage:s.target.value}}),placeholder:"Gracias por tu mensaje. Un agente te contactar\xe1 pronto.",rows:3})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(k.Label,{children:"Delay (segundos):"}),(0,t.jsx)(o.I,{type:"number",min:"0",max:"300",value:e.configuration.replyDelay||0,onChange:s=>i({configuration:{...e.configuration,replyDelay:parseInt(s.target.value)||0}})})]})]})]}),(0,t.jsx)(l.z,{variant:"ghost",size:"sm",onClick:r,className:"text-destructive",children:(0,t.jsx)(E.Z,{className:"h-4 w-4"})})]})})})}var V=a(37108),B=a(64670),F=a(77694);function $({stats:e}){let s=e.totalExecutions>0?Math.round(e.successfulExecutions/e.totalExecutions*100):0;return(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ll,{className:"text-sm font-medium",children:"Reglas Activas"}),(0,t.jsx)(h.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(n.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:e.activeRules}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["de ",e.totalRules," reglas totales"]}),(0,t.jsx)(V.E,{value:e.totalRules>0?e.activeRules/e.totalRules*100:0,className:"mt-2"})]})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ll,{className:"text-sm font-medium",children:"Ejecuciones Hoy"}),(0,t.jsx)(p.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(n.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:e.executionsToday}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.totalExecutions," total"]})]})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ll,{className:"text-sm font-medium",children:"Tasa de \xc9xito"}),s>=90?(0,t.jsx)(v.Z,{className:"h-4 w-4 text-green-500"}):s>=70?(0,t.jsx)(B.Z,{className:"h-4 w-4 text-yellow-500"}):(0,t.jsx)(F.Z,{className:"h-4 w-4 text-red-500"})]}),(0,t.jsxs)(n.aY,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[s,"%"]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.successfulExecutions," exitosas, ",e.failedExecutions," fallidas"]}),(0,t.jsx)(V.E,{value:s,className:"mt-2"})]})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ll,{className:"text-sm font-medium",children:"Tiempo Promedio"}),(0,t.jsx)(O.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(n.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:e.avgExecutionTime<1e3?`${e.avgExecutionTime}ms`:`${(e.avgExecutionTime/1e3).toFixed(1)}s`}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"por ejecuci\xf3n"})]})]}),e.topIntentions.length>0&&(0,t.jsxs)(n.Zb,{className:"md:col-span-2",children:[(0,t.jsx)(n.Ol,{children:(0,t.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(b.Z,{className:"h-4 w-4"}),"Intenciones M\xe1s Detectadas"]})}),(0,t.jsx)(n.aY,{children:(0,t.jsx)("div",{className:"space-y-3",children:e.topIntentions.slice(0,5).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(c.C,{variant:"secondary",children:M.ED[e.intention]||e.intention})}),(0,t.jsx)("div",{className:"text-sm font-medium",children:e.count})]},e.intention))})})]}),e.topActions.length>0&&(0,t.jsxs)(n.Zb,{className:"md:col-span-2",children:[(0,t.jsx)(n.Ol,{children:(0,t.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(w.Z,{className:"h-4 w-4"}),"Acciones M\xe1s Ejecutadas"]})}),(0,t.jsx)(n.aY,{children:(0,t.jsx)("div",{className:"space-y-3",children:e.topActions.slice(0,5).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(c.C,{variant:"secondary",children:M.Rn[e.action]||e.action})}),(0,t.jsx)("div",{className:"text-sm font-medium",children:e.count})]},e.action))})})]})]})}var G=a(56948),Q=a(81178),q=a(66772);function H({onTestComplete:e}){let[s,a]=(0,i.useState)(""),[r,o]=(0,i.useState)(!1),[d,x]=(0,i.useState)(null),[m,u]=(0,i.useState)(null),j=async()=>{if(!s.trim()){u("Por favor ingrese un mensaje para probar");return}o(!0),u(null),x(null);try{let a=await fetch("/api/automations/test-message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:s.trim()})}),t=await a.json();t.success?(x(t.data),e&&e()):u(t.error||"Error analizando mensaje")}catch(e){console.error("Error probando mensaje:",e),u("Error de conexi\xf3n")}finally{o(!1)}},f=e=>{a(e),x(null),u(null)};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{children:[(0,t.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(g.Z,{className:"h-5 w-5"}),"Probador de An\xe1lisis de IA"]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Pruebe c\xf3mo el sistema de IA analizar\xe1 diferentes tipos de mensajes"})]}),(0,t.jsxs)(n.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Mensaje a analizar:"}),(0,t.jsx)(S.g,{value:s,onChange:e=>a(e.target.value),placeholder:"Escriba el mensaje que quiere probar...",rows:4,className:"resize-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Ejemplos r\xe1pidos:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:["Hola, me interesa conocer los precios de sus productos","Buenos d\xedas, tengo un problema con mi pedido anterior","\xbfPodr\xedan ayudarme con una consulta t\xe9cnica?","Quiero hacer una queja sobre el servicio recibido","Me gustar\xeda agendar una cita para ma\xf1ana","\xbfC\xf3mo puedo realizar el pago de mi factura?","Necesito m\xe1s informaci\xf3n sobre sus servicios","Gracias por todo, que tengan buen d\xeda"].map((e,s)=>(0,t.jsxs)(l.z,{variant:"outline",size:"sm",onClick:()=>f(e),className:"text-xs h-auto py-1 px-2 whitespace-normal text-left",children:['"',e.substring(0,30),'..."']},s))})]}),(0,t.jsx)(l.z,{onClick:j,disabled:r||!s.trim(),className:"w-full",children:r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Analizando mensaje..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Q.Z,{className:"h-4 w-4 mr-2"}),"Probar An\xe1lisis"]})}),m&&(0,t.jsxs)(G.bZ,{variant:"destructive",children:[(0,t.jsx)(q.Z,{className:"h-4 w-4"}),(0,t.jsx)(G.X,{children:m})]})]})]}),d&&(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{children:[(0,t.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(h.Z,{className:"h-5 w-5"}),"Resultado del An\xe1lisis"]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:['Analizando: "',d.message,'"']})]}),(0,t.jsxs)(n.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(b.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Intenciones Detectadas"}),(0,t.jsxs)(c.C,{variant:"outline",children:["Confianza: ",Math.round(100*d.analysis.confidenceScore),"%"]})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:d.analysis.detectedIntentions.map(e=>(0,t.jsx)(c.C,{variant:"default",className:`bg-${M.Jg[e]}-100 text-${M.Jg[e]}-800`,children:M.ED[e]||e},e))})]}),(0,t.jsx)(R.Z,{}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(C.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"An\xe1lisis de Sentimiento"})]}),(0,t.jsx)(c.C,{variant:"outline",className:(e=>{switch(e){case"positive":return"text-green-600";case"negative":return"text-red-600";default:return"text-gray-600"}})(d.analysis.sentiment),children:(e=>{switch(e){case"positive":return"Positivo";case"negative":return"Negativo";default:return"Neutral"}})(d.analysis.sentiment)})]}),(0,t.jsx)(R.Z,{}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(D.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Palabras Clave Extra\xeddas"})]}),d.analysis.keywordsExtracted.length>0?(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:d.analysis.keywordsExtracted.map((e,s)=>(0,t.jsx)(c.C,{variant:"secondary",children:e},s))}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"No se encontraron palabras clave relevantes"})]}),(0,t.jsx)(R.Z,{}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-xs",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"Proveedor IA"}),(0,t.jsx)("div",{className:"text-muted-foreground",children:d.analysis.aiProvider})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"Modelo"}),(0,t.jsx)("div",{className:"text-muted-foreground",children:d.analysis.modelUsed})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"font-medium flex items-center gap-1",children:[(0,t.jsx)(O.Z,{className:"h-3 w-3"}),"Tiempo"]}),(0,t.jsxs)("div",{className:"text-muted-foreground",children:[d.analysis.processingTime,"ms"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"Estado"}),(0,t.jsxs)("div",{className:"text-green-600 flex items-center gap-1",children:[(0,t.jsx)(v.Z,{className:"h-3 w-3"}),"Exitoso"]})]})]})]})]})]})}var U=a(4693),J=a(75012),K=a(51137),W=a(23572),X=a(80586),ee=a(45053);function es(){let[e,s]=(0,i.useState)([]),[a,r]=(0,i.useState)(!0),[d,x]=(0,i.useState)(""),[m,h]=(0,i.useState)("all"),[j,f]=(0,i.useState)(1),[g,y]=(0,i.useState)(1),[w,C]=(0,i.useState)([]),[T,Z]=(0,i.useState)("all");(0,i.useEffect)(()=>{E(),k()},[j,m,T]);let E=async()=>{try{r(!0);let e=new URLSearchParams({page:j.toString(),limit:"25"});"all"!==m&&e.append("success",("success"===m).toString()),"all"!==T&&e.append("ruleId",T);let a=await fetch(`/api/automations/executions?${e}`),t=await a.json();t.success&&(s(t.data),y(t.pagination.totalPages))}catch(e){console.error("Error cargando historial:",e)}finally{r(!1)}},k=async()=>{try{let e=await fetch("/api/automations/rules"),s=await e.json();s.success&&C(s.data)}catch(e){console.error("Error cargando reglas:",e)}},S=e.filter(e=>e.ruleName.toLowerCase().includes(d.toLowerCase())||e.contactName?.toLowerCase().includes(d.toLowerCase())),R=e=>e<1e3?`${e}ms`:`${(e/1e3).toFixed(1)}s`;return(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{children:[(0,t.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(p.Z,{className:"h-5 w-5"}),"Historial de Ejecuciones"]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Registro detallado de todas las automatizaciones ejecutadas"})]}),(0,t.jsxs)(n.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(N.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),(0,t.jsx)(o.I,{placeholder:"Buscar por regla o contacto...",value:d,onChange:e=>x(e.target.value),className:"pl-10"})]}),(0,t.jsxs)(A.Ph,{value:T,onValueChange:e=>{Z(e),f(1)},children:[(0,t.jsx)(A.i4,{className:"w-48",children:(0,t.jsx)(A.ki,{})}),(0,t.jsxs)(A.Bw,{children:[(0,t.jsx)(A.Ql,{value:"all",children:"Todas las reglas"}),w.map(e=>(0,t.jsx)(A.Ql,{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)(A.Ph,{value:m,onValueChange:e=>{h(e),f(1)},children:[(0,t.jsx)(A.i4,{className:"w-32",children:(0,t.jsx)(A.ki,{})}),(0,t.jsxs)(A.Bw,{children:[(0,t.jsx)(A.Ql,{value:"all",children:"Todos"}),(0,t.jsx)(A.Ql,{value:"success",children:"Exitosas"}),(0,t.jsx)(A.Ql,{value:"failed",children:"Fallidas"})]})]})]}),a?(0,t.jsx)("div",{className:"text-center py-8",children:"Cargando historial..."}):0===S.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(p.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No hay ejecuciones"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Las ejecuciones de automatizaciones aparecer\xe1n aqu\xed"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(u.iA,{children:[(0,t.jsx)(u.xD,{children:(0,t.jsxs)(u.SC,{children:[(0,t.jsx)(u.ss,{children:"Regla"}),(0,t.jsx)(u.ss,{children:"Contacto"}),(0,t.jsx)(u.ss,{children:"Estado"}),(0,t.jsx)(u.ss,{children:"Intenciones"}),(0,t.jsx)(u.ss,{children:"Confianza"}),(0,t.jsx)(u.ss,{children:"Tiempo"}),(0,t.jsx)(u.ss,{children:"Fecha"})]})}),(0,t.jsx)(u.RM,{children:S.map(e=>(0,t.jsxs)(u.SC,{children:[(0,t.jsx)(u.pj,{children:(0,t.jsx)("div",{className:"font-medium",children:e.ruleName})}),(0,t.jsx)(u.pj,{children:e.contactName?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(U.Z,{className:"h-4 w-4 text-muted-foreground"}),e.contactName]}):(0,t.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,t.jsx)(u.pj,{children:(0,t.jsx)(c.C,{variant:e.success?"default":"destructive",className:"flex items-center gap-1 w-fit",children:e.success?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.Z,{className:"h-3 w-3"}),"Exitosa"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(F.Z,{className:"h-3 w-3"}),"Fallida"]})})}),(0,t.jsx)(u.pj,{children:e.detectedIntentions.length>0?(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.detectedIntentions.slice(0,2).map(e=>(0,t.jsx)(c.C,{variant:"secondary",className:"text-xs",children:M.ED[e]||e},e)),e.detectedIntentions.length>2&&(0,t.jsxs)(c.C,{variant:"outline",className:"text-xs",children:["+",e.detectedIntentions.length-2]})]}):(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"})}),(0,t.jsx)(u.pj,{children:e.confidenceScore?(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(b.Z,{className:"h-3 w-3 text-muted-foreground"}),(0,t.jsxs)("span",{className:"text-sm",children:[Math.round(100*e.confidenceScore),"%"]})]}):(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"})}),(0,t.jsx)(u.pj,{children:(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,t.jsx)(O.Z,{className:"h-3 w-3 text-muted-foreground"}),R(e.executionTime)]})}),(0,t.jsx)(u.pj,{children:(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(0,t.jsx)(J.Z,{className:"h-3 w-3"}),(0,X.WU)(new Date(e.createdAt),"dd/MM/yyyy HH:mm",{locale:ee.es})]})})]},e.id))})]}),g>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["P\xe1gina ",j," de ",g]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(l.z,{variant:"outline",size:"sm",onClick:()=>f(Math.max(1,j-1)),disabled:1===j,children:[(0,t.jsx)(K.Z,{className:"h-4 w-4"}),"Anterior"]}),(0,t.jsxs)(l.z,{variant:"outline",size:"sm",onClick:()=>f(Math.min(g,j+1)),disabled:j===g,children:["Siguiente",(0,t.jsx)(W.Z,{className:"h-4 w-4"})]})]})]})]})]})]})}function ea(){let{data:e}=(0,r.useSession)(),[s,a]=(0,i.useState)([]),[k,S]=(0,i.useState)(null),[A,R]=(0,i.useState)(!0),[z,I]=(0,i.useState)(""),[O,D]=(0,i.useState)(!1),[P,M]=(0,i.useState)(!1),[L,Y]=(0,i.useState)(null);if(e?.user?.role!=="PROPIETARIO")return(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)(n.Zb,{children:(0,t.jsx)(n.aY,{className:"flex items-center justify-center h-40",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(h.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium",children:"Acceso Restringido"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Solo el propietario puede configurar automatizaciones"})]})})})});(0,i.useEffect)(()=>{V(),B()},[]);let V=async()=>{try{R(!0);let e=await fetch("/api/automations/rules"),s=await e.json();s.success&&a(s.data)}catch(e){console.error("Error cargando reglas:",e)}finally{R(!1)}},B=async()=>{try{let e=await fetch("/api/automations/stats"),s=await e.json();s.success&&S(s.data)}catch(e){console.error("Error cargando estad\xedsticas:",e)}},F=async(e,s)=>{try{(await fetch(`/api/automations/rules/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!s})})).ok&&(V(),B())}catch(e){console.error("Error actualizando regla:",e)}},G=async e=>{if(confirm("\xbfEst\xe1s seguro de que quieres eliminar esta regla?"))try{(await fetch(`/api/automations/rules/${e}`,{method:"DELETE"})).ok&&(V(),B())}catch(e){console.error("Error eliminando regla:",e)}},Q=s.filter(e=>{let s=e.name.toLowerCase().includes(z.toLowerCase())||e.description?.toLowerCase().includes(z.toLowerCase()),a=!O||e.isActive;return s&&a});return(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[(0,t.jsx)(h.Z,{className:"h-8 w-8 text-primary"}),"Etiquetado Inteligente"]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Configure reglas autom\xe1ticas para clasificar y responder conversaciones"})]}),(0,t.jsxs)(m.Vq,{open:P,onOpenChange:M,children:[(0,t.jsx)(m.hg,{asChild:!0,children:(0,t.jsxs)(l.z,{children:[(0,t.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),"Nueva Regla"]})}),(0,t.jsxs)(m.cZ,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(m.fK,{children:[(0,t.jsx)(m.$N,{children:"Constructor de Reglas"}),(0,t.jsx)(m.Be,{children:"Cree reglas personalizadas para automatizar la clasificaci\xf3n de conversaciones"})]}),(0,t.jsx)(_,{ruleId:L,onSave:()=>{M(!1),Y(null),V(),B()},onCancel:()=>{M(!1),Y(null)}})]})]})]}),k&&(0,t.jsx)($,{stats:k}),(0,t.jsxs)(x.Tabs,{defaultValue:"rules",className:"space-y-4",children:[(0,t.jsxs)(x.TabsList,{children:[(0,t.jsxs)(x.TabsTrigger,{value:"rules",className:"flex items-center gap-2",children:[(0,t.jsx)(f.Z,{className:"h-4 w-4"}),"Reglas"]}),(0,t.jsxs)(x.TabsTrigger,{value:"history",className:"flex items-center gap-2",children:[(0,t.jsx)(p.Z,{className:"h-4 w-4"}),"Historial"]}),(0,t.jsxs)(x.TabsTrigger,{value:"tester",className:"flex items-center gap-2",children:[(0,t.jsx)(g.Z,{className:"h-4 w-4"}),"Probador"]})]}),(0,t.jsx)(x.TabsContent,{value:"rules",className:"space-y-4",children:(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{children:[(0,t.jsx)(n.ll,{className:"text-lg",children:"Reglas de Automatizaci\xf3n"}),(0,t.jsx)(n.SZ,{children:"Gestione las reglas que determinan c\xf3mo se procesan los mensajes entrantes"})]}),(0,t.jsxs)(n.aY,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4 mb-4",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(N.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),(0,t.jsx)(o.I,{placeholder:"Buscar reglas...",value:z,onChange:e=>I(e.target.value),className:"pl-10"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.Switch,{id:"active-only",checked:O,onCheckedChange:D}),(0,t.jsx)("label",{htmlFor:"active-only",className:"text-sm",children:"Solo activas"})]})]}),A?(0,t.jsx)("div",{className:"text-center py-8",children:"Cargando reglas..."}):0===Q.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(h.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No hay reglas configuradas"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"Crea tu primera regla para activar la inteligencia artificial"}),(0,t.jsxs)(l.z,{onClick:()=>M(!0),children:[(0,t.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),"Crear Primera Regla"]})]}):(0,t.jsxs)(u.iA,{children:[(0,t.jsx)(u.xD,{children:(0,t.jsxs)(u.SC,{children:[(0,t.jsx)(u.ss,{children:"Regla"}),(0,t.jsx)(u.ss,{children:"Estado"}),(0,t.jsx)(u.ss,{children:"Prioridad"}),(0,t.jsx)(u.ss,{children:"Condiciones"}),(0,t.jsx)(u.ss,{children:"Acciones"}),(0,t.jsx)(u.ss,{children:"Estad\xedsticas"}),(0,t.jsx)(u.ss,{children:"Acciones"})]})}),(0,t.jsx)(u.RM,{children:Q.map(e=>(0,t.jsxs)(u.SC,{children:[(0,t.jsx)(u.pj,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),e.description&&(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:e.description})]})}),(0,t.jsx)(u.pj,{children:(0,t.jsx)(c.C,{variant:e.isActive?"default":"secondary",children:e.isActive?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.Z,{className:"h-3 w-3 mr-1"}),"Activa"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.Z,{className:"h-3 w-3 mr-1"}),"Pausada"]})})}),(0,t.jsx)(u.pj,{children:(0,t.jsxs)(c.C,{variant:"outline",children:[(0,t.jsx)(b.Z,{className:"h-3 w-3 mr-1"}),e.priority]})}),(0,t.jsx)(u.pj,{children:(0,t.jsxs)(c.C,{variant:"secondary",children:[e.conditionsCount," condici\xf3n",1!==e.conditionsCount?"es":""]})}),(0,t.jsx)(u.pj,{children:(0,t.jsxs)(c.C,{variant:"secondary",children:[e.actionsCount," acci\xf3n",1!==e.actionsCount?"es":""]})}),(0,t.jsx)(u.pj,{children:(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(w.Z,{className:"h-3 w-3"}),e.executionCount," ejecuciones"]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-muted-foreground",children:[(0,t.jsx)(C.Z,{className:"h-3 w-3"}),Math.round(100*e.successRate),"% \xe9xito"]})]})}),(0,t.jsx)(u.pj,{children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(l.z,{variant:"ghost",size:"sm",onClick:()=>F(e.id,e.isActive),children:e.isActive?(0,t.jsx)(y.Z,{className:"h-4 w-4"}):(0,t.jsx)(T.Z,{className:"h-4 w-4"})}),(0,t.jsx)(l.z,{variant:"ghost",size:"sm",onClick:()=>{Y(e.id),M(!0)},children:(0,t.jsx)(Z.Z,{className:"h-4 w-4"})}),(0,t.jsx)(l.z,{variant:"ghost",size:"sm",onClick:()=>G(e.id),children:(0,t.jsx)(E.Z,{className:"h-4 w-4"})})]})})]},e.id))})]})]})]})}),(0,t.jsx)(x.TabsContent,{value:"history",children:(0,t.jsx)(es,{})}),(0,t.jsx)(x.TabsContent,{value:"tester",children:(0,t.jsx)(H,{onTestComplete:B})})]})]})}},56948:function(e,s,a){"use strict";a.d(s,{Cd:function(){return o},X:function(){return d},bZ:function(){return c}});var t=a(15444),i=a(89300),r=a(2371),n=a(65522);let l=(0,r.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=i.forwardRef(({className:e,variant:s,...a},i)=>(0,t.jsx)("div",{ref:i,role:"alert",className:(0,n.cn)(l({variant:s}),e),...a}));c.displayName="Alert";let o=i.forwardRef(({className:e,...s},a)=>(0,t.jsx)("h5",{ref:a,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",e),...s}));o.displayName="AlertTitle";let d=i.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",e),...s}));d.displayName="AlertDescription"},2422:function(e,s,a){"use strict";a.d(s,{d:function(){return c},z:function(){return o}});var t=a(15444),i=a(89300),r=a(21030),n=a(2371),l=a(65522);let c=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=i.forwardRef(({className:e,variant:s,size:a,asChild:i=!1,...n},o)=>{let d=i?r.g7:"button";return(0,t.jsx)(d,{className:(0,l.cn)(c({variant:s,size:a,className:e})),ref:o,...n})});o.displayName="Button"},37108:function(e,s,a){"use strict";a.d(s,{E:function(){return l}});var t=a(15444),i=a(89300),r=a(25052),n=a(65522);let l=i.forwardRef(({className:e,value:s,...a},i)=>(0,t.jsx)(r.fC,{ref:i,className:(0,n.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...a,children:(0,t.jsx)(r.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));l.displayName=r.fC.displayName},70489:function(e,s,a){"use strict";a.d(s,{Bw:function(){return j},Ph:function(){return d},Ql:function(){return f},i4:function(){return m},ki:function(){return x}});var t=a(15444),i=a(89300),r=a(63280),n=a(63751),l=a(16997),c=a(77248),o=a(65522);let d=r.fC;r.ZA;let x=r.B4,m=i.forwardRef(({className:e,children:s,...a},i)=>(0,t.jsxs)(r.xz,{ref:i,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[s,(0,t.jsx)(r.JO,{asChild:!0,children:(0,t.jsx)(n.Z,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=r.xz.displayName;let u=i.forwardRef(({className:e,...s},a)=>(0,t.jsx)(r.u_,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,t.jsx)(l.Z,{className:"h-4 w-4"})}));u.displayName=r.u_.displayName;let h=i.forwardRef(({className:e,...s},a)=>(0,t.jsx)(r.$G,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,t.jsx)(n.Z,{className:"h-4 w-4"})}));h.displayName=r.$G.displayName;let j=i.forwardRef(({className:e,children:s,position:a="popper",...i},n)=>(0,t.jsx)(r.h_,{children:(0,t.jsxs)(r.VY,{ref:n,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...i,children:[(0,t.jsx)(u,{}),(0,t.jsx)(r.l_,{className:(0,o.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,t.jsx)(h,{})]})}));j.displayName=r.VY.displayName,i.forwardRef(({className:e,...s},a)=>(0,t.jsx)(r.__,{ref:a,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=r.__.displayName;let f=i.forwardRef(({className:e,children:s,...a},i)=>(0,t.jsxs)(r.ck,{ref:i,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(r.wU,{children:(0,t.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(r.eT,{children:s})]}));f.displayName=r.ck.displayName,i.forwardRef(({className:e,...s},a)=>(0,t.jsx)(r.Z0,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=r.Z0.displayName},92232:function(e,s,a){"use strict";a.d(s,{Z:function(){return l}});var t=a(15444),i=a(89300),r=a(71033),n=a(65522);let l=i.forwardRef(({className:e,orientation:s="horizontal",decorative:a=!0,...i},l)=>(0,t.jsx)(r.f,{ref:l,decorative:a,orientation:s,className:(0,n.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",e),...i}));l.displayName=r.f.displayName},25181:function(e,s,a){"use strict";a.d(s,{Switch:function(){return l}});var t=a(15444),i=a(89300),r=a(62312),n=a(65522);let l=i.forwardRef(({className:e,...s},a)=>(0,t.jsx)(r.fC,{className:(0,n.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,ref:a,children:(0,t.jsx)(r.bU,{className:(0,n.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));l.displayName=r.fC.displayName},79507:function(e,s,a){"use strict";a.d(s,{RM:function(){return c},SC:function(){return o},iA:function(){return n},pj:function(){return x},ss:function(){return d},xD:function(){return l}});var t=a(15444),i=a(89300),r=a(65522);let n=i.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:a,className:(0,r.cn)("w-full caption-bottom text-sm",e),...s})}));n.displayName="Table";let l=i.forwardRef(({className:e,...s},a)=>(0,t.jsx)("thead",{ref:a,className:(0,r.cn)("[&_tr]:border-b",e),...s}));l.displayName="TableHeader";let c=i.forwardRef(({className:e,...s},a)=>(0,t.jsx)("tbody",{ref:a,className:(0,r.cn)("[&_tr:last-child]:border-0",e),...s}));c.displayName="TableBody",i.forwardRef(({className:e,...s},a)=>(0,t.jsx)("tfoot",{ref:a,className:(0,r.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...s})).displayName="TableFooter";let o=i.forwardRef(({className:e,...s},a)=>(0,t.jsx)("tr",{ref:a,className:(0,r.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...s}));o.displayName="TableRow";let d=i.forwardRef(({className:e,...s},a)=>(0,t.jsx)("th",{ref:a,className:(0,r.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...s}));d.displayName="TableHead";let x=i.forwardRef(({className:e,...s},a)=>(0,t.jsx)("td",{ref:a,className:(0,r.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...s}));x.displayName="TableCell",i.forwardRef(({className:e,...s},a)=>(0,t.jsx)("caption",{ref:a,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",e),...s})).displayName="TableCaption"},86765:function(e,s,a){"use strict";a.d(s,{Tabs:function(){return l},TabsContent:function(){return d},TabsList:function(){return c},TabsTrigger:function(){return o}});var t=a(15444),i=a(89300),r=a(84018),n=a(65522);let l=r.fC,c=i.forwardRef(({className:e,...s},a)=>(0,t.jsx)(r.aV,{ref:a,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));c.displayName=r.aV.displayName;let o=i.forwardRef(({className:e,...s},a)=>(0,t.jsx)(r.xz,{ref:a,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));o.displayName=r.xz.displayName;let d=i.forwardRef(({className:e,...s},a)=>(0,t.jsx)(r.VY,{ref:a,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));d.displayName=r.VY.displayName},67012:function(e,s,a){"use strict";a.d(s,{g:function(){return n}});var t=a(15444),i=a(89300),r=a(65522);let n=i.forwardRef(({className:e,...s},a)=>(0,t.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));n.displayName="Textarea"},65522:function(e,s,a){"use strict";a.d(s,{cn:function(){return r}});var t=a(32191),i=a(23607);function r(...e){return(0,i.m6)((0,t.W)(e))}}},function(e){e.O(0,[9993,5762,688,8077,8151,6298,1561,6448,7238,8408,3036,2386,7156,1744],function(){return e(e.s=10019)}),_N_E=e.O()}]);