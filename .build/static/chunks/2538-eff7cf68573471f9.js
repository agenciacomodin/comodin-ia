"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2538],{82538:function(E,A,I){I.d(A,{ProtectedRoute:function(){return O}});var N=I(15444),_=I(51924),S=I(56948),T=I(81059),e=I(70362),n=I(2422),C=I(79047);function O({children:E,permissions:A=[],requireAll:I=!1,fallback:O,redirectTo:R}){let{isLoading:r,isAuthenticated:t,hasAnyPermission:G,hasAllPermissions:i,getDashboardRoute:s}=(0,_.TE)(),a=(0,C.useRouter)();return r?(0,N.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,N.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t?!(A.length>0)||(I?i(A):G(A))?(0,N.jsx)(N.Fragment,{children:E}):O?(0,N.jsx)(N.Fragment,{children:O}):(0,N.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,N.jsxs)(S.bZ,{className:"max-w-md",children:[(0,N.jsx)(e.Z,{className:"h-4 w-4"}),(0,N.jsx)(S.Cd,{children:"Sin Permisos"}),(0,N.jsx)(S.X,{children:"No tienes los permisos necesarios para acceder a esta funcionalidad."}),(0,N.jsx)(n.z,{onClick:()=>a.push(R||s()),className:"mt-3 w-full",children:"Volver al Dashboard"})]})}):(0,N.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,N.jsxs)(S.bZ,{className:"max-w-md",children:[(0,N.jsx)(T.Z,{className:"h-4 w-4"}),(0,N.jsx)(S.Cd,{children:"Acceso Denegado"}),(0,N.jsx)(S.X,{children:"Debes iniciar sesi\xf3n para acceder a esta p\xe1gina."}),(0,N.jsx)(n.z,{onClick:()=>a.push("/auth/login"),className:"mt-3 w-full",children:"Iniciar Sesi\xf3n"})]})})}},56948:function(E,A,I){I.d(A,{Cd:function(){return C},X:function(){return O},bZ:function(){return n}});var N=I(15444),_=I(89300),S=I(2371),T=I(65522);let e=(0,S.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),n=_.forwardRef(({className:E,variant:A,...I},_)=>(0,N.jsx)("div",{ref:_,role:"alert",className:(0,T.cn)(e({variant:A}),E),...I}));n.displayName="Alert";let C=_.forwardRef(({className:E,...A},I)=>(0,N.jsx)("h5",{ref:I,className:(0,T.cn)("mb-1 font-medium leading-none tracking-tight",E),...A}));C.displayName="AlertTitle";let O=_.forwardRef(({className:E,...A},I)=>(0,N.jsx)("div",{ref:I,className:(0,T.cn)("text-sm [&_p]:leading-relaxed",E),...A}));O.displayName="AlertDescription"},2422:function(E,A,I){I.d(A,{d:function(){return n},z:function(){return C}});var N=I(15444),_=I(89300),S=I(21030),T=I(2371),e=I(65522);let n=(0,T.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),C=_.forwardRef(({className:E,variant:A,size:I,asChild:_=!1,...T},C)=>{let O=_?S.g7:"button";return(0,N.jsx)(O,{className:(0,e.cn)(n({variant:A,size:I,className:E})),ref:C,...T})});C.displayName="Button"},51924:function(E,A,I){I.d(A,{TE:function(){return S}});var N=I(75762),_=I(92937);function S(){let{data:E,status:A}=(0,N.useSession)(),I=E?.user,S=I?.role,T=I?.organizationId;return{isAuthenticated:!!E,isLoading:"loading"===A,user:I,role:S,organizationId:T,hasPermission:E=>!!S&&(0,_.Fs)(S,E),hasAnyPermission:E=>!!S&&(0,_._N)(S,E),hasAllPermissions:E=>!!S&&(0,_.wP)(S,E),canAccessRoute:E=>!!S&&(0,_.mn)(S,E),getDashboardRoute:()=>S?(0,_.Ol)(S):"/dashboard",getAllPermissions:()=>S?(0,_.ai)(S):[],isSuperAdmin:"SUPER_ADMIN"===S,isDistributor:"DISTRIBUIDOR"===S,isOwner:"PROPIETARIO"===S,isAgent:"AGENTE"===S,canManageUsers:"SUPER_ADMIN"===S||"PROPIETARIO"===S,canManageOrganization:"SUPER_ADMIN"===S||"PROPIETARIO"===S,canViewAllConversations:"AGENTE"!==S,canManageWhatsApp:"SUPER_ADMIN"===S||"PROPIETARIO"===S,canManageBilling:"SUPER_ADMIN"===S||"PROPIETARIO"===S,canConfigureAI:"SUPER_ADMIN"===S||"PROPIETARIO"===S,canViewReports:"AGENTE"!==S,canManageClients:"DISTRIBUIDOR"===S||"SUPER_ADMIN"===S}}},92937:function(E,A,I){var N,_;I.d(A,{Fs:function(){return T},Ol:function(){return R},_N:function(){return e},ai:function(){return C},mn:function(){return O},wP:function(){return n},y3:function(){return N}}),(_=N||(N={})).MANAGE_ORGANIZATION="MANAGE_ORGANIZATION",_.VIEW_ORGANIZATION_SETTINGS="VIEW_ORGANIZATION_SETTINGS",_.MANAGE_USERS="MANAGE_USERS",_.INVITE_USERS="INVITE_USERS",_.VIEW_ALL_USERS="VIEW_ALL_USERS",_.VIEW_ALL_CONVERSATIONS="VIEW_ALL_CONVERSATIONS",_.VIEW_ASSIGNED_CONVERSATIONS="VIEW_ASSIGNED_CONVERSATIONS",_.MANAGE_CONVERSATIONS="MANAGE_CONVERSATIONS",_.ASSIGN_CONVERSATIONS="ASSIGN_CONVERSATIONS",_.MANAGE_WHATSAPP_CONFIG="MANAGE_WHATSAPP_CONFIG",_.VIEW_WHATSAPP_SETTINGS="VIEW_WHATSAPP_SETTINGS",_.MANAGE_BILLING="MANAGE_BILLING",_.VIEW_BILLING="VIEW_BILLING",_.CONFIGURE_AI="CONFIGURE_AI",_.USE_AI_FEATURES="USE_AI_FEATURES",_.VIEW_AI_USAGE="VIEW_AI_USAGE",_.USE_AI_BROKER="USE_AI_BROKER",_.VIEW_AI_BROKER_STATS="VIEW_AI_BROKER_STATS",_.VIEW_REPORTS="VIEW_REPORTS",_.VIEW_ADVANCED_ANALYTICS="VIEW_ADVANCED_ANALYTICS",_.VIEW_CONTACTS="VIEW_CONTACTS",_.MANAGE_CONTACTS="MANAGE_CONTACTS",_.CREATE_CONTACTS="CREATE_CONTACTS",_.DELETE_CONTACTS="DELETE_CONTACTS",_.VIEW_CRM_INBOX="VIEW_CRM_INBOX",_.MANAGE_CRM_CONVERSATIONS="MANAGE_CRM_CONVERSATIONS",_.SEND_MESSAGES="SEND_MESSAGES",_.VIEW_ALL_CRM_CONVERSATIONS="VIEW_ALL_CRM_CONVERSATIONS",_.ASSIGN_CRM_CONVERSATIONS="ASSIGN_CRM_CONVERSATIONS",_.MANAGE_CONTACT_TAGS="MANAGE_CONTACT_TAGS",_.VIEW_CONTACT_NOTES="VIEW_CONTACT_NOTES",_.MANAGE_CONTACT_NOTES="MANAGE_CONTACT_NOTES",_.TRANSFER_CONVERSATIONS="TRANSFER_CONVERSATIONS",_.MANAGE_WHATSAPP_CHANNELS="MANAGE_WHATSAPP_CHANNELS",_.VIEW_WHATSAPP_CHANNELS="VIEW_WHATSAPP_CHANNELS",_.CREATE_WHATSAPP_CHANNELS="CREATE_WHATSAPP_CHANNELS",_.DELETE_WHATSAPP_CHANNELS="DELETE_WHATSAPP_CHANNELS",_.CONFIGURE_QR_CONNECTION="CONFIGURE_QR_CONNECTION",_.CONFIGURE_API_CONNECTION="CONFIGURE_API_CONNECTION",_.MANAGE_QUICK_REPLIES="MANAGE_QUICK_REPLIES",_.VIEW_QUICK_REPLIES="VIEW_QUICK_REPLIES",_.CREATE_QUICK_REPLIES="CREATE_QUICK_REPLIES",_.DELETE_QUICK_REPLIES="DELETE_QUICK_REPLIES",_.USE_QUICK_REPLIES="USE_QUICK_REPLIES",_.VIEW_ALL_QUICK_REPLIES="VIEW_ALL_QUICK_REPLIES",_.MANAGE_KNOWLEDGE_BASE="MANAGE_KNOWLEDGE_BASE",_.VIEW_KNOWLEDGE_BASE="VIEW_KNOWLEDGE_BASE",_.MANAGE_ORGANIZATION_SETTINGS="MANAGE_ORGANIZATION_SETTINGS",_.MANAGE_CLIENT_ORGANIZATIONS="MANAGE_CLIENT_ORGANIZATIONS",_.VIEW_COMMISSIONS="VIEW_COMMISSIONS",_.CREATE_CLIENT_ACCOUNTS="CREATE_CLIENT_ACCOUNTS",_.PLATFORM_ADMINISTRATION="PLATFORM_ADMINISTRATION",_.VIEW_ALL_ORGANIZATIONS="VIEW_ALL_ORGANIZATIONS",_.MANAGE_SYSTEM_SETTINGS="MANAGE_SYSTEM_SETTINGS",_.MANAGE_AI_PROVIDERS="MANAGE_AI_PROVIDERS",_.VIEW_INTEGRATIONS="VIEW_INTEGRATIONS",_.MANAGE_INTEGRATIONS="MANAGE_INTEGRATIONS",_.CONNECT_INTEGRATIONS="CONNECT_INTEGRATIONS",_.DISCONNECT_INTEGRATIONS="DISCONNECT_INTEGRATIONS",_.VIEW_INTEGRATION_LOGS="VIEW_INTEGRATION_LOGS",_.CONFIGURE_INTEGRATION_SETTINGS="CONFIGURE_INTEGRATION_SETTINGS",_.VIEW_CAMPAIGNS="VIEW_CAMPAIGNS",_.MANAGE_CAMPAIGNS="MANAGE_CAMPAIGNS",_.CREATE_CAMPAIGNS="CREATE_CAMPAIGNS",_.DELETE_CAMPAIGNS="DELETE_CAMPAIGNS",_.EXECUTE_CAMPAIGNS="EXECUTE_CAMPAIGNS",_.PAUSE_CAMPAIGNS="PAUSE_CAMPAIGNS",_.VIEW_CAMPAIGN_ANALYTICS="VIEW_CAMPAIGN_ANALYTICS",_.VIEW_MESSAGE_TEMPLATES="VIEW_MESSAGE_TEMPLATES",_.MANAGE_MESSAGE_TEMPLATES="MANAGE_MESSAGE_TEMPLATES",_.CREATE_MESSAGE_TEMPLATES="CREATE_MESSAGE_TEMPLATES",_.DELETE_MESSAGE_TEMPLATES="DELETE_MESSAGE_TEMPLATES",_.SYNC_META_TEMPLATES="SYNC_META_TEMPLATES",_.USE_AUDIENCE_BUILDER="USE_AUDIENCE_BUILDER",_.VIEW_AUDIENCE_PREVIEW="VIEW_AUDIENCE_PREVIEW",_.MANAGE_AUDIENCE_FILTERS="MANAGE_AUDIENCE_FILTERS",_.VIEW_SENDING_QUEUE="VIEW_SENDING_QUEUE",_.MANAGE_SENDING_SETTINGS="MANAGE_SENDING_SETTINGS";let S={SUPER_ADMIN:[...Object.values(N)],DISTRIBUIDOR:["MANAGE_CLIENT_ORGANIZATIONS","VIEW_COMMISSIONS","CREATE_CLIENT_ACCOUNTS","VIEW_ORGANIZATION_SETTINGS","VIEW_BILLING","VIEW_REPORTS","USE_AI_FEATURES","VIEW_AI_USAGE","USE_AI_BROKER","VIEW_ALL_CONVERSATIONS","MANAGE_CONVERSATIONS"],PROPIETARIO:["MANAGE_ORGANIZATION","VIEW_ORGANIZATION_SETTINGS","MANAGE_ORGANIZATION_SETTINGS","MANAGE_USERS","INVITE_USERS","VIEW_ALL_USERS","VIEW_ALL_CONVERSATIONS","MANAGE_CONVERSATIONS","ASSIGN_CONVERSATIONS","MANAGE_WHATSAPP_CONFIG","VIEW_WHATSAPP_SETTINGS","MANAGE_BILLING","VIEW_BILLING","CONFIGURE_AI","USE_AI_FEATURES","VIEW_AI_USAGE","USE_AI_BROKER","VIEW_AI_BROKER_STATS","VIEW_REPORTS","VIEW_ADVANCED_ANALYTICS","MANAGE_CAMPAIGNS","VIEW_CAMPAIGNS","VIEW_CONTACTS","MANAGE_CONTACTS","CREATE_CONTACTS","DELETE_CONTACTS","VIEW_CRM_INBOX","MANAGE_CRM_CONVERSATIONS","SEND_MESSAGES","VIEW_ALL_CRM_CONVERSATIONS","ASSIGN_CRM_CONVERSATIONS","MANAGE_CONTACT_TAGS","VIEW_CONTACT_NOTES","MANAGE_CONTACT_NOTES","TRANSFER_CONVERSATIONS","MANAGE_WHATSAPP_CHANNELS","VIEW_WHATSAPP_CHANNELS","CREATE_WHATSAPP_CHANNELS","DELETE_WHATSAPP_CHANNELS","CONFIGURE_QR_CONNECTION","CONFIGURE_API_CONNECTION","MANAGE_QUICK_REPLIES","VIEW_QUICK_REPLIES","CREATE_QUICK_REPLIES","DELETE_QUICK_REPLIES","USE_QUICK_REPLIES","VIEW_ALL_QUICK_REPLIES","MANAGE_KNOWLEDGE_BASE","VIEW_KNOWLEDGE_BASE","VIEW_INTEGRATIONS","MANAGE_INTEGRATIONS","CONNECT_INTEGRATIONS","DISCONNECT_INTEGRATIONS","VIEW_INTEGRATION_LOGS","CONFIGURE_INTEGRATION_SETTINGS","VIEW_CAMPAIGNS","MANAGE_CAMPAIGNS","CREATE_CAMPAIGNS","DELETE_CAMPAIGNS","EXECUTE_CAMPAIGNS","PAUSE_CAMPAIGNS","VIEW_CAMPAIGN_ANALYTICS","VIEW_MESSAGE_TEMPLATES","MANAGE_MESSAGE_TEMPLATES","CREATE_MESSAGE_TEMPLATES","DELETE_MESSAGE_TEMPLATES","SYNC_META_TEMPLATES","USE_AUDIENCE_BUILDER","VIEW_AUDIENCE_PREVIEW","MANAGE_AUDIENCE_FILTERS","VIEW_SENDING_QUEUE","MANAGE_SENDING_SETTINGS"],AGENTE:["VIEW_ASSIGNED_CONVERSATIONS","USE_AI_FEATURES","USE_AI_BROKER","VIEW_WHATSAPP_SETTINGS","VIEW_CONTACTS","VIEW_KNOWLEDGE_BASE","VIEW_CAMPAIGNS","VIEW_CRM_INBOX","SEND_MESSAGES","VIEW_CONTACT_NOTES","MANAGE_CONTACT_NOTES","USE_QUICK_REPLIES","VIEW_QUICK_REPLIES","VIEW_CAMPAIGNS","VIEW_MESSAGE_TEMPLATES"]};function T(E,A){return S[E].includes(A)}function e(E,A){let I=S[E];return A.some(E=>I.includes(E))}function n(E,A){let I=S[E];return A.every(E=>I.includes(E))}function C(E){return S[E]}function O(E,A){let I={"/dashboard":["VIEW_ASSIGNED_CONVERSATIONS","VIEW_ALL_CONVERSATIONS"],"/inbox":["VIEW_CRM_INBOX"],"/conversations":["VIEW_ASSIGNED_CONVERSATIONS","VIEW_ALL_CONVERSATIONS"],"/contacts":["VIEW_CONTACTS"],"/settings":["VIEW_ORGANIZATION_SETTINGS"],"/settings/organization":["MANAGE_ORGANIZATION"],"/settings/users":["MANAGE_USERS"],"/settings/whatsapp":["MANAGE_WHATSAPP_CONFIG"],"/settings/billing":["VIEW_BILLING"],"/settings/ai":["CONFIGURE_AI"],"/reports":["VIEW_REPORTS"],"/admin":["PLATFORM_ADMINISTRATION"],"/admin/ai-providers":["MANAGE_AI_PROVIDERS"],"/admin/ai-broker":["PLATFORM_ADMINISTRATION"],"/distributor":["MANAGE_CLIENT_ORGANIZATIONS"],"/campaigns":["VIEW_CAMPAIGNS"],"/campaigns/create":["CREATE_CAMPAIGNS"],"/campaigns/templates":["VIEW_MESSAGE_TEMPLATES"],"/campaigns/templates/create":["CREATE_MESSAGE_TEMPLATES"],"/campaigns/analytics":["VIEW_CAMPAIGN_ANALYTICS"],"/campaigns/audience-builder":["USE_AUDIENCE_BUILDER"]}[A];return!I||e(E,I)}function R(E){switch(E){case"SUPER_ADMIN":return"/admin";case"DISTRIBUIDOR":return"/distributor";default:return"/dashboard"}}},65522:function(E,A,I){I.d(A,{cn:function(){return S}});var N=I(32191),_=I(23607);function S(...E){return(0,_.m6)((0,N.W)(E))}}}]);