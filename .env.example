
# =============================================================================
# COMODÍN IA - CONFIGURACIÓN DE PRODUCCIÓN
# =============================================================================
# 
# IMPORTANTE: Copia este archivo como .env y configura todas las variables
# antes del primer despliegue. Nunca subas el archivo .env a repositorios.
#
# =============================================================================

# -----------------------------------------------------------------------------
# CONFIGURACIÓN DE BASE DE DATOS
# -----------------------------------------------------------------------------
# URL completa de conexión a PostgreSQL
# Formato: postgresql://usuario:contraseña@host:puerto/nombre_db
DATABASE_URL=postgresql://postgres:tu_password_seguro@postgres:5432/comodin_ia

# Contraseña del usuario postgres (debe coincidir con la del DATABASE_URL)
POSTGRES_PASSWORD=tu_password_seguro_postgres_2024

# -----------------------------------------------------------------------------
# CONFIGURACIÓN DE REDIS (CACHE Y SESIONES)
# -----------------------------------------------------------------------------
# URL de conexión a Redis para cache y sesiones
REDIS_URL=redis://:tu_password_redis@redis:6379
REDIS_PASSWORD=tu_password_redis_seguro_2024

# -----------------------------------------------------------------------------
# CONFIGURACIÓN DE AUTENTICACIÓN (NextAuth.js)
# -----------------------------------------------------------------------------
# URL base de la aplicación (CRÍTICO para OAuth)
NEXTAUTH_URL=https://tu-dominio.com

# Clave secreta para NextAuth (generar con: openssl rand -base64 32)
NEXTAUTH_SECRET=tu_nextauth_secret_super_seguro_32_chars_minimo

# -----------------------------------------------------------------------------
# CONFIGURACIÓN DE SEGURIDAD Y ENCRIPTACIÓN
# -----------------------------------------------------------------------------
# Clave para encriptación de datos sensibles (generar nueva en prod)
ENCRYPTION_SECRET=tu_clave_encriptacion_super_segura_2024

# Clave secreta para trabajos cron y webhooks internos
CRON_SECRET=tu_cron_secret_seguro_2024

# -----------------------------------------------------------------------------
# CONFIGURACIÓN DE STRIPE (PAGOS INTERNACIONALES)
# -----------------------------------------------------------------------------
# Claves de Stripe (obtener de: https://dashboard.stripe.com/apikeys)
STRIPE_SECRET_KEY=sk_live_tu_clave_secreta_de_stripe_aqui
STRIPE_PUBLISHABLE_KEY=pk_live_tu_clave_publica_de_stripe_aqui

# Webhook secret de Stripe (configurar endpoint: /api/webhooks/stripe)
STRIPE_WEBHOOK_SECRET=whsec_tu_webhook_secret_de_stripe

# -----------------------------------------------------------------------------
# CONFIGURACIÓN DE MERCADO PAGO (PAGOS LATAM)
# -----------------------------------------------------------------------------
# Credenciales de MercadoPago (obtener de: https://www.mercadopago.com/developers)
MERCADO_PAGO_ACCESS_TOKEN=APP_USR-tu_access_token_de_mercadopago
MERCADO_PAGO_PUBLIC_KEY=APP_USR-tu_public_key_de_mercadopago
MERCADO_PAGO_CLIENT_ID=tu_client_id_de_mercadopago
MERCADO_PAGO_CLIENT_SECRET=tu_client_secret_de_mercadopago

# -----------------------------------------------------------------------------
# CONFIGURACIÓN DE INTELIGENCIA ARTIFICIAL
# -----------------------------------------------------------------------------
# Clave de API para servicios de IA (Abacus AI o similar)
ABACUSAI_API_KEY=tu_clave_de_abacus_ai_aqui

# Clave de OpenAI (para funcionalidades de IA adicionales)
OPENAI_API_KEY=sk-tu_clave_de_openai_aqui

# -----------------------------------------------------------------------------
# CONFIGURACIÓN DE AWS S3 (ALMACENAMIENTO DE ARCHIVOS)
# -----------------------------------------------------------------------------
# Región de AWS donde está el bucket
AWS_REGION=us-west-2

# Nombre del bucket de S3 para almacenamiento
AWS_BUCKET_NAME=tu-bucket-comodin-ia-prod

# Prefijo de carpeta dentro del bucket
AWS_FOLDER_PREFIX=prod/

# Perfil de AWS (dejar como 'hosted_storage' si usas credenciales de instancia EC2)
AWS_PROFILE=hosted_storage

# Si necesitas credenciales específicas (solo si no usas IAM roles):
# AWS_ACCESS_KEY_ID=tu_access_key_de_aws
# AWS_SECRET_ACCESS_KEY=tu_secret_key_de_aws

# -----------------------------------------------------------------------------
# CONFIGURACIÓN DE WHATSAPP (EVOLUTION API)
# -----------------------------------------------------------------------------
# Clave de API para Evolution API (generar clave fuerte)
EVOLUTION_API_KEY=tu_evolution_api_key_super_segura_2024

# URL de Evolution API (internal Docker network)
EVOLUTION_API_URL=http://evolution-api:8080

# -----------------------------------------------------------------------------
# CONFIGURACIÓN DE EMAIL (OPCIONAL - PARA NOTIFICACIONES)
# -----------------------------------------------------------------------------
# Configuración SMTP para envío de emails
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=tu-email@gmail.com
# SMTP_PASS=tu_password_de_aplicacion
# FROM_EMAIL=noreply@tu-dominio.com

# -----------------------------------------------------------------------------
# CONFIGURACIÓN DE MONITOREO Y LOGGING
# -----------------------------------------------------------------------------
# Nivel de logging (error, warn, info, debug)
LOG_LEVEL=info

# Habilitar logging detallado de base de datos
# DATABASE_LOGGING=false

# -----------------------------------------------------------------------------
# CONFIGURACIÓN DE AMBIENTE
# -----------------------------------------------------------------------------
# Ambiente de ejecución (production, staging, development)
NODE_ENV=production

# Puerto de la aplicación (interno del contenedor)
PORT=3000

# -----------------------------------------------------------------------------
# CONFIGURACIÓN DE BACKUP AUTOMÁTICO
# -----------------------------------------------------------------------------
# Configuración para el servicio de backup automático de PostgreSQL
# Los backups se crearán en ./backups/
BACKUP_SCHEDULE=0 2 * * *  # Diario a las 2:00 AM
BACKUP_KEEP_DAYS=7         # Mantener backups diarios por 7 días
BACKUP_KEEP_WEEKS=4        # Mantener backups semanales por 4 semanas
BACKUP_KEEP_MONTHS=6       # Mantener backups mensuales por 6 meses

# -----------------------------------------------------------------------------
# VARIABLES ADICIONALES (SEGÚN NECESIDADES)
# -----------------------------------------------------------------------------
# Configuración de timezone
TZ=America/Mexico_City

# Límites de memoria para contenedores (opcional)
# POSTGRES_MEMORY_LIMIT=2g
# REDIS_MEMORY_LIMIT=512m
# APP_MEMORY_LIMIT=4g

# =============================================================================
# NOTAS IMPORTANTES DE SEGURIDAD:
# =============================================================================
#
# 1. Cambiar TODAS las contraseñas y claves secretas antes de producción
# 2. Usar un generador de contraseñas para crear claves seguras
# 3. Nunca subir este archivo .env a repositorios de código
# 4. Hacer backup seguro de estas configuraciones
# 5. Rotar claves periódicamente en ambientes de producción
# 6. Configurar SSL/TLS correctamente en nginx.conf
# 7. Configurar firewall para exponer solo puertos necesarios (80, 443)
# 8. Configurar monitoreo y alertas para el sistema
#
# =============================================================================
